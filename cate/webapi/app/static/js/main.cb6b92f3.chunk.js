(this["webpackJsonpcate-app"]=this["webpackJsonpcate-app"]||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return k})),n.d(t,"P",(function(){return w})),n.d(t,"gc",(function(){return S})),n.d(t,"ec",(function(){return j})),n.d(t,"hc",(function(){return I})),n.d(t,"I",(function(){return P})),n.d(t,"fc",(function(){return D})),n.d(t,"h",(function(){return L})),n.d(t,"N",(function(){return T})),n.d(t,"i",(function(){return R})),n.d(t,"v",(function(){return N})),n.d(t,"Q",(function(){return x})),n.d(t,"jc",(function(){return M})),n.d(t,"X",(function(){return V})),n.d(t,"r",(function(){return B})),n.d(t,"B",(function(){return W})),n.d(t,"c",(function(){return F})),n.d(t,"x",(function(){return Y})),n.d(t,"H",(function(){return H})),n.d(t,"V",(function(){return K})),n.d(t,"M",(function(){return z})),n.d(t,"cb",(function(){return q})),n.d(t,"ub",(function(){return J})),n.d(t,"tb",(function(){return X})),n.d(t,"Fb",(function(){return Z})),n.d(t,"Eb",(function(){return Q})),n.d(t,"O",(function(){return $})),n.d(t,"W",(function(){return ee})),n.d(t,"xb",(function(){return te})),n.d(t,"Wb",(function(){return ne})),n.d(t,"w",(function(){return ae})),n.d(t,"yb",(function(){return re})),n.d(t,"E",(function(){return oe})),n.d(t,"F",(function(){return ie})),n.d(t,"T",(function(){return le})),n.d(t,"S",(function(){return ce})),n.d(t,"R",(function(){return se})),n.d(t,"vb",(function(){return ue})),n.d(t,"wb",(function(){return de})),n.d(t,"fb",(function(){return pe})),n.d(t,"D",(function(){return he})),n.d(t,"U",(function(){return fe})),n.d(t,"u",(function(){return me})),n.d(t,"kb",(function(){return be})),n.d(t,"gb",(function(){return ve})),n.d(t,"s",(function(){return ye})),n.d(t,"t",(function(){return ge})),n.d(t,"Sb",(function(){return Ee})),n.d(t,"Rb",(function(){return Oe})),n.d(t,"Tb",(function(){return _e})),n.d(t,"Ub",(function(){return Ce})),n.d(t,"Vb",(function(){return ke})),n.d(t,"lb",(function(){return we})),n.d(t,"jb",(function(){return Se})),n.d(t,"C",(function(){return je})),n.d(t,"hb",(function(){return Ie})),n.d(t,"ib",(function(){return Pe})),n.d(t,"m",(function(){return De})),n.d(t,"o",(function(){return Le})),n.d(t,"n",(function(){return Te})),n.d(t,"p",(function(){return Ae})),n.d(t,"oc",(function(){return Re})),n.d(t,"J",(function(){return Ne})),n.d(t,"mc",(function(){return xe})),n.d(t,"kc",(function(){return Me})),n.d(t,"bb",(function(){return Ve})),n.d(t,"Y",(function(){return We})),n.d(t,"Xb",(function(){return Fe})),n.d(t,"Ab",(function(){return Ue})),n.d(t,"ic",(function(){return Ge})),n.d(t,"Yb",(function(){return Ye})),n.d(t,"Mb",(function(){return He})),n.d(t,"Jb",(function(){return Ke})),n.d(t,"nc",(function(){return ze})),n.d(t,"lc",(function(){return qe})),n.d(t,"K",(function(){return Je})),n.d(t,"ab",(function(){return Ze})),n.d(t,"Z",(function(){return Qe})),n.d(t,"Bb",(function(){return $e})),n.d(t,"zb",(function(){return et})),n.d(t,"Ob",(function(){return tt})),n.d(t,"Pb",(function(){return nt})),n.d(t,"Db",(function(){return at})),n.d(t,"Nb",(function(){return rt})),n.d(t,"z",(function(){return ot})),n.d(t,"g",(function(){return it})),n.d(t,"ac",(function(){return lt})),n.d(t,"Kb",(function(){return ct})),n.d(t,"Gb",(function(){return st})),n.d(t,"cc",(function(){return ut})),n.d(t,"dc",(function(){return dt})),n.d(t,"d",(function(){return pt})),n.d(t,"e",(function(){return ht})),n.d(t,"f",(function(){return ft})),n.d(t,"mb",(function(){return bt})),n.d(t,"Qb",(function(){return vt})),n.d(t,"nb",(function(){return yt})),n.d(t,"y",(function(){return gt})),n.d(t,"db",(function(){return Et})),n.d(t,"pb",(function(){return Ot})),n.d(t,"l",(function(){return _t})),n.d(t,"j",(function(){return Ct})),n.d(t,"k",(function(){return wt})),n.d(t,"L",(function(){return St})),n.d(t,"rb",(function(){return jt})),n.d(t,"qb",(function(){return It})),n.d(t,"ob",(function(){return Pt})),n.d(t,"Ib",(function(){return Dt})),n.d(t,"Hb",(function(){return Lt})),n.d(t,"Lb",(function(){return Tt})),n.d(t,"Zb",(function(){return At})),n.d(t,"bc",(function(){return Rt})),n.d(t,"Cb",(function(){return Nt})),n.d(t,"sb",(function(){return xt})),n.d(t,"G",(function(){return Mt})),n.d(t,"q",(function(){return Vt})),n.d(t,"eb",(function(){return Bt})),n.d(t,"A",(function(){return Wt}));var a=n(33),r=n(6),o=n(31),i=n(135),l=n(25),c=n(63),s=n(38),u=n(18),d=n(53),p=n(60),h=n(15),f=n(16),m=function(){function e(t){Object(h.a)(this,e),this.webAPIClient=void 0,this.webAPIClient=t}return Object(f.a)(e,[{key:"loadPreferences",value:function(){return this.webAPIClient.call("get_preferences",[])}},{key:"updatePreferences",value:function(e){return this.webAPIClient.call("set_preferences",[e])}}]),e}(),b=n(784),v=n(136);function y(e,t,n){var a=function(e,t){return t&&t.length>0&&(e+="?"+t.map((function(e){return e.map(encodeURIComponent).join("=")})).join("&")),e}(e,t);return console.debug("Calling API: ",a),fetch(a,n).then((function(e){if(!e.ok)throw console.log(e),new v.a(e.status,e.statusText);return e})).catch((function(e){throw e}))}function g(e,t,n,a){return y(e,t,n).then((function(e){return e.blob()})).then((function(e){return function(e,t){t||(t="cate_"+Object(b.a)()+".zip");var n=URL.createObjectURL(e),a=document.createElement("a");a.href=n,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)}(e,a),e}))}function E(e,t,n){return y(e,t,n).then((function(e){return e.json()}))}var O=function(){function e(t){Object(h.a)(this,e),this.webAPIClient=void 0,this.webAPIClient=t}return Object(f.a)(e,[{key:"monitorProcess",value:function(e,t){return this.webAPIClient.call("monitor_download_files",[e],t,(function(){}))}},{key:"registerProcess",value:function(e){return E(e+"/files/download",void 0,{mode:"cors",method:"PUT",body:JSON.stringify({})})}},{key:"uploadFiles",value:function(e,t,n){var a=new FormData;return a.append("dir",e),a.append("files",t,t.name),E(n+"/files/upload",void 0,{mode:"cors",method:"POST",body:a})}},{key:"downloadFiles",value:function(e,t,n){var a={target_files:e,process_id:t};return g(n+"/files/download",void 0,{mode:"cors",method:"POST",body:JSON.stringify(a)})}}]),e}(),_=Object(i.b)(),C={},k=[],w=function(e){return e.session.offlineMode},S=function(e){return e.communication.webAPIServiceInfo},j=function(e){return e.communication.webAPIClient},I=function(e){return e.communication.webAPIServiceURL},P=function(e){return!!_&&!!_.ipcRenderer&&!!e.communication.webAPIServiceInfo&&!e.communication.webAPIServiceInfo.userRootMode},D=Object(o.createSelector)(I,(function(e){return function(e){return A(e,!1,"/")}(e)})),L=Object(o.createSelector)(I,(function(e){return function(e){return A(e,!0,"api")}(e)})),T=Object(o.createSelector)(I,(function(e){return function(e){return A(e,!0,"mpl/figures/")}(e)}));function A(e,t,n){var a=new URL(e),r=t?"https:"===a.protocol?"wss:":"ws:":a.protocol,o=a.pathname,i="".concat(r,"//").concat(a.host);return o&&"/"!==o&&(i+=o),n&&(n.startsWith("/")||i.endsWith("/")||(i+="/"),i+=n),i}var R=Object(o.createSelector)(j,(function(e){return new s.a(e)})),N=Object(o.createSelector)(j,(function(e){return new s.c(e)})),x=Object(o.createSelector)(j,(function(e){return new s.h(e)})),M=Object(o.createSelector)(j,(function(e){return new s.i(e)})),V=Object(o.createSelector)(j,(function(e){return new m(e)})),B=Object(o.createSelector)(j,(function(e){return new s.b(e)})),W=Object(o.createSelector)(j,(function(e){return null!==e?new s.f(e):null})),F=function(e){var t=new Set;for(var n in e.communication.tasks){var a=e.communication.tasks[n];a.status!==s.g.NEW&&a.status!==s.g.SUBMITTED&&a.status!==s.g.IN_PROGRESS||t.add(a.requestLock)}return t},U={},G=function(e){return e.control.dialogs},Y=function(e){return U[e]||(U[e]=Object(o.createSelector)(G,(function(t){return t[e]||C}))),U[e]},H=Object(o.createSelector)(G,(function(e){return Object.getOwnPropertyNames(e).some((function(t){return e[t].isOpen}))})),K=function(e){return e.session.panelContainerUndockedMode},z=function(e){return e.session.leftPanelContainerLayout},q=function(e){return e.session.rightPanelContainerLayout},J=function(e){return e.session.selectedLeftTopPanelId},X=function(e){return e.session.selectedLeftBottomPanelId},Z=function(e){return e.session.selectedRightTopPanelId},Q=function(e){return e.session.selectedRightBottomPanelId},$=function(e){return e.control.newPlacemarkToolType},ee=function(e){return e.session.placemarkCollection},te=function(e){return e.session.selectedPlacemarkId},ne=function(e){return e.session.showPlacemarkDetails},ae=function(e){return e.session.defaultPlacemarkStyle},re=Object(o.createSelector)((function(e){return e.session.placemarkCollection.features}),te,(function(e,t){return Ft(e,t)?e.find((function(e){return e.id===t})):null})),oe=function(e){return e.location.globeMousePosition},ie=function(e){return e.location.globeViewPosition},le=function(e){return e.data.operations},ce=function(e){return e.session.operationFilterTags},se=function(e){return e.session.operationFilterExpr},ue=function(e){return e.session.selectedOperationName},de=Object(o.createSelector)(le,ue,(function(e,t){return e&&e.length&&t?e.find((function(e){return e.name===t})):null})),pe=Object(o.createSelector)(le,(function(e){return e.control.selectedCtxOperationName}),(function(e,t){return e&&e.length&&t?e.find((function(e){return e.name===t})):null})),he=Object(o.createSelector)(le,ce,se,(function(e,t,n){var a=e&&e.length,r=n&&""!==n,o=t&&t.length;if(a&&(r||o)){var i,l;if(r){var c=n.toLowerCase().split(" ");i=function(e){return c.every((function(t){return e.name.toLowerCase().includes(t)}))}}else i=function(e){return!0};return l=o?function(e){return!t.length||t.every((function(t){return new Set(e.tags).has(t)}))}:function(e){return!0},e.filter((function(e){return i(e)&&l(e)}))}return e||k})),fe=Object(o.createSelector)(le,(function(e){var t=new Map;return(e||k).forEach((function(e){return(e.tags||k).forEach((function(e){t.set(e,(t.get(e)||0)+1)}))})),t})),me=function(e){return e.data.dataStores},be=function(e){return e.session.selectedDataStoreId},ve=function(e){return e.session.selectedDataSourceId},ye=function(e){return e.session.dataSourceFilterExpr},ge=function(e){return e.session.dataSourceListHeight},Ee=function(e){return e.session.showDataSourceDetails},Oe=function(e){return e.session.showAllDataSources},_e=function(e){return e.session.showDataSourceIDs},Ce=function(e){return e.session.showDataStoreDescription},ke=function(e){return e.session.showDataStoreNotices},we=Object(o.createSelector)(me,be,(function(e,t){return Ft(e,t)?e.find((function(e){return e.id===t})):null})),Se=Object(o.createSelector)(we,(function(e){return e&&e.dataSources||null})),je=Object(o.createSelector)(Se,ye,Oe,(function(e,t,n){if(e&&e.length&&(t&&""!==t||!n)){var a=t.toLowerCase().split(" ");return e.filter((function(e){return function(e,t,n){if(!t&&!Object(l.o)(e))return!1;var a=e.id.toLowerCase();if(n.every((function(e){return a.includes(e)})))return!0;var r=e.title||(e.metaInfo?e.metaInfo.title:null);if(!r||""===r)return!1;return r=r.toLowerCase(),n.every((function(e){return r.includes(e)}))}(e,n,a)}))}return e}));var Ie=Object(o.createSelector)(Se,ve,(function(e,t){return Ft(e,t)?e.find((function(e){return e.id===t})):null})),Pe=Object(o.createSelector)(Ie,(function(e){return e&&e.metaInfo&&e.metaInfo.time_range||null})),De=Object(o.createSelector)(be,Ie,(function(e,t){return null!==e&&"local"!==e&&"cci-zarr-store"!==e&&(!!t&&Object(l.j)(t))})),Le=(Object(o.createSelector)(Ie,(function(e){return!!e&&Object(l.n)(e)})),Object(o.createSelector)(Ie,(function(e){return e&&Object(l.l)(e)}))),Te=Object(o.createSelector)(Ie,(function(e){return e&&Object(l.k)(e)})),Ae=Object(o.createSelector)(Ie,(function(e){return e&&Object(l.m)(e)})),Re=function(e){return e.data.workspace},Ne=function(e){return e.data.workspace&&e.data.workspace.isScratch},xe=function(e){return e.data.workspace&&e.data.workspace.id},Me=function(e){return e.data.workspace&&e.data.workspace.baseDir},Ve=function(e){return e.data.workspace?e.data.workspace.resources:k},Be=function(e){return e.data.workspace?e.data.workspace.workflow.steps:k},We=function(e){return e.session.resourceListHeight},Fe=function(e){return e.session.showResourceDetails},Ue=function(e){return e.control.selectedWorkspaceResourceName},Ge=function(e){return e.session.workflowStepListHeight},Ye=function(e){return e.session.showWorkflowStepDetails},He=function(e){return e.control.selectedWorkflowStepId||Ue(e)},Ke=function(e){return e.control.selectedVariableName},ze=Object(o.createSelector)(Me,(function(e){return function(e){if(!e)return null;var t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>=0?e.substring(t+1):e}(e)})),qe=Object(o.createSelector)(Me,(function(e){return Xe(e)})),Je=Object(o.createSelector)((function(e){return e.session.lastWorkspacePath}),(function(e){return Xe(e)}));function Xe(e){if(!e)return null;var t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>=0?e.substring(0,t):""}var Ze=Object(o.createSelector)(Ve,(function(e){return e.map((function(e){return e.name}))})),Qe=Object(o.createSelector)(Ve,(function(e){var t={};return e.forEach((function(e){t[e.name]=e})),t})),$e=Object(o.createSelector)(Ve,Ue,(function(e,t){return Ft(e,t)?e.find((function(e){return e.name===t})):null})),et=Object(o.createSelector)($e,(function(e){if(!e||!e.attributes)return k;var t=[],n=e.attributes;for(var a in n)n.hasOwnProperty(a)&&t.push([a,n[a]]);return t})),tt=Object(o.createSelector)(Ve,He,(function(e,t){return Ft(e,t)?e.find((function(e){return e.name===t})):null})),nt=Object(o.createSelector)(Be,He,(function(e,t){return Ft(e,t)?e.find((function(e){return e.id===t})):null})),at=Object(o.createSelector)(Be,Ue,(function(e,t){return Ft(e,t)?e.find((function(e){return e.id===t})):null})),rt=Object(o.createSelector)(le,nt,(function(e,t){return e&&t&&t.op?Object(l.r)(e,t.op):null})),ot=Object(o.createSelector)(Ve,(function(e){return e.filter((function(e){return Object(l.U)(e)}))})),it=(Object(o.createSelector)($e,(function(e){return e&&Object(l.U)(e)?e:null})),Object(o.createSelector)(Ve,(function(e){return e.filter((function(e){return Object(l.S)(e)}))}))),lt=Object(o.createSelector)($e,(function(e){return e&&e.variables||null})),ct=Object(o.createSelector)(lt,Ke,(function(e,t){return Ft(e,t)?(e||k).find((function(e){return e.name===t})):null})),st=Object(o.createSelector)(ct,(function(e){if(!e)return null;var t=[["Data type",e.dataType],["Units",e.units||""],["Valid minimum",e.validMin],["Valid maximum",e.validMax],["Dimension names",e.dimNames&&e.dimNames.join(", ")],["Array shape",e.shape&&e.shape.join(", ")],["Chunk sizes",e.chunkSizes&&e.chunkSizes.join(", ")],[" ",""]],n=e.attributes;return n&&Object.getOwnPropertyNames(n).forEach((function(e){t.push([e,n[e]])})),t})),ut=function(e){return e.control.viewLayout},dt=function(e){return e.control.views},pt=function(e){return e.control.activeViewId},ht=(Object(o.createSelector)(dt,(function(e){return e?e.filter((function(e){return"figure"===e.type})):k})),Object(o.createSelector)(dt,pt,(function(e,t){return Ft(e,t)?e.find((function(e){return e.id===t})):null}))),ft=Object(o.createSelector)(ht,(function(e){return e?e.type:null})),mt=Object(o.createSelector)(ht,(function(e){return e&&"world"===e.type?e.data.selectedEntityId:null})),bt=Object(o.createSelector)(ht,mt,(function(e,t){return Object(l.N)(e)})),vt=Object(o.createSelector)(ht,(function(e){return e?Object(l.Q)(e):null})),yt=Object(o.createSelector)(ht,l.O),gt=function(e){return l.f},Et=function(e){return e.session.savedLayers},Ot=Object(o.createSelector)(ht,(function(e){return e&&e.data.selectedLayerId||null})),_t=function(e){return e.data.baseMaps},Ct=Object(o.createSelector)(_t,ht,(function(e,t){return t&&t.data.baseMapId||l.e})),kt=Object(o.createSelector)(_t,ht,(function(e,t){return t&&t.data.baseMapId&&e.find((function(e){return e.id===t.data.baseMapId}))||l.d})),wt=Object(o.createSelector)(kt,(function(e){return e.options})),St=Object(o.createSelector)(ht,(function(e){return e&&e.data.layers||null})),jt=Object(o.createSelector)(St,Ot,(function(e,t){return Ft(e,t)?e.find((function(e){return e.id===t})):null})),It=Object(o.createSelector)(St,Ot,(function(e,t){return Ft(e,t)?e.findIndex((function(e){return e.id===t})):-1})),Pt=Object(o.createSelector)(jt,(function(e){return!e||"Image"!==e.type&&"VariableImage"!==e.type?null:e})),Dt=Object(o.createSelector)(jt,(function(e){return e&&"VariableImage"===e.type?e:null})),Lt=Object(o.createSelector)(Dt,(function(e){if(e){var t=Object(u.d)(e.displayMin)?e.displayMin:0;return[t,Object(u.d)(e.displayMax)?e.displayMax:t+1]}return null})),Tt=Object(o.createSelector)(jt,(function(e){return!e||"Vector"!==e.type&&"ResourceVector"!==e.type?null:e})),At=function(e){return e.session.styleContext},Rt=Object(o.createSelector)(ht,At,Tt,re,bt,(function(e){return e.control.entityUpdateCount}),(function(e,t,n,a,o,i){var s,u=n&&n.style;if(t===c.e)s=u;else if(t===c.d)if(a){var h=Object(p.c)(a.properties);s=Object(r.a)(Object(r.a)({},u),h)}else if(o){var f=Object(d.g)(o),m=Object(l.P)(e,o),b=m&&m.style,v=m&&m.entityStyles&&m.entityStyles[o.id];s=Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({},u),b),f),v)}return Object(r.a)(Object(r.a)({},p.a),s)})),Nt=Object(o.createSelector)(jt,(function(e){return e&&"ResourceVector"===e.type?e:null})),xt=Object(o.createSelector)(Ve,(function(e){var t,n=[],r=Object(a.a)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(o.variables){var i,c=Object(a.a)(o.variables);try{for(c.s();!(i=c.n()).done;){var s=i.value;(Object(l.Y)(s)||Object(l.Z)(s))&&n.push({resource:o,variable:s})}}catch(u){c.e(u)}finally{c.f()}}}}catch(u){r.e(u)}finally{r.f()}return n})),Mt=Object(o.createSelector)($e,ct,Dt,F,(function(e,t,n,a){var r=n;if(!e||!t||!r)return!1;var o=Object(l.G)(e.name,t.name,r.varIndex);return a.has(o)})),Vt=function(e){return e.data.colorMaps},Bt=Object(o.createSelector)(Vt,Dt,(function(e,t){var n=t?t.colorMapName:null;if(Ft(e,n)){var r,o=Object(a.a)(e);try{for(o.s();!(r=o.n()).done;){var i=r.value.colorMaps.find((function(e){return e.name===n}));if(i)return i}}catch(l){o.e(l)}finally{o.f()}}return null})),Wt=Object(o.createSelector)(j,(function(e){return new O(e)}));function Ft(e,t){return e&&e.length&&!!t}},101:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));n(6);var a=n(44);n(18);function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return Object.assign.apply(Object,[{},e].concat(n))}function o(e,t,n){var o=e[t];return r(e,Object(a.a)({},t,r(o,n)))}},106:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return v}));var a=n(15),r=n(16),o=n(7),i=n(19),l=n(20),c=n(68),s=n(2),u=n(28),d=n(5),p=n(41),h=n(8),f=n(10),m=n(46),b="openWorkspaceDialog",v="deleteWorkspaceDialog";var y=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).renderItem=function(e){return s.createElement("span",null,e)},r.state={workspaceDir:"",currentWorkspaceName:"",selectedWorkspaceName:"",deleteEntireWorkspace:!0},r.onCancel=r.onCancel.bind(Object(o.a)(r)),r.onConfirm=r.onConfirm.bind(Object(o.a)(r)),r.canConfirm=r.canConfirm.bind(Object(o.a)(r)),r.renderBody=r.renderBody.bind(Object(o.a)(r)),r.onWorkspaceNameChange=r.onWorkspaceNameChange.bind(Object(o.a)(r)),r.onWorkspaceDirChange=r.onWorkspaceDirChange.bind(Object(o.a)(r)),r}return Object(r.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.setState({workspaceDir:e.workspaceDir,currentWorkspaceName:e.currentWorkspaceName})}},{key:"onCancel",value:function(){this.props.dispatch(h.Pb(this.props.dialogId)),this.resetSelectedWorkspaceName()}},{key:"canConfirm",value:function(){return!("undefined"===this.state.selectedWorkspaceName||!this.state.selectedWorkspaceName)&&/^([A-Za-z_\-\s0-9.]+)$/.test(this.state.selectedWorkspaceName)}},{key:"composeWorkspacePath",value:function(){var e=this.state.workspaceDir,t=this.state.selectedWorkspaceName;return null===e?t:e+"/"+t}},{key:"onConfirm",value:function(){this.props.dispatch(h.Pb(this.props.dialogId,this.state)),this.props.dialogId===v?this.props.dispatch(h.Jb(this.composeWorkspacePath(),this.state.deleteEntireWorkspace)):this.props.dispatch(h.gc(this.composeWorkspacePath())),this.resetSelectedWorkspaceName()}},{key:"resetSelectedWorkspaceName",value:function(){this.setState({selectedWorkspaceName:""})}},{key:"setSelectedWorkspace",value:function(e){this.setState({selectedWorkspaceName:e})}},{key:"handleCheckboxChange",value:function(e){this.setState({deleteEntireWorkspace:e.target.checked})}},{key:"onWorkspaceDirChange",value:function(e){this.setState({workspaceDir:e.target.value})}},{key:"onWorkspaceNameChange",value:function(e){this.setState({currentWorkspaceName:e.target.value})}},{key:"render",value:function(){var e,t,n=this.props.isOpen;return n?(this.props.dialogId===v?(e="Delete Workspace",t="Delete"):(e="Open Workspace",t="Open"),s.createElement(p.a,{isOpen:n,title:e,confirmTitle:t,onCancel:this.onCancel,canConfirm:this.canConfirm,onConfirm:this.onConfirm,renderBody:this.renderBody})):null}},{key:"renderBody",value:function(){var e,t=this;return this.props.isOpen?0===this.props.workspaceNames.length?s.createElement("div",null,s.createElement("p",{style:{marginTop:"1em"}},"No saved workspaces found.")):(this.props.dialogId===v&&(e=s.createElement(d.Tooltip,{content:"Also delete other files in the workspace folder"},s.createElement(d.Checkbox,{style:{marginTop:"1em"},label:"Delete entire workspace",checked:this.state.deleteEntireWorkspace,onChange:this.handleCheckboxChange.bind(this)}))),s.createElement("div",null,s.createElement("p",{style:{marginTop:"1em"}},"Saved workspaces:"),s.createElement(m.a,{items:this.props.workspaceNames,selectionMode:m.b.SINGLE,getItemKey:function(e,t){return e},renderItem:this.renderItem,onSelection:function(e){return t.setSelectedWorkspace(""+e[0])},selection:this.state.selectedWorkspaceName}),e)):null}}]),n}(s.Component);t.c=Object(u.b)((function(e,t){var n,a=f.x(t.dialogId)(e),r=a.isOpen,o=t.dialogId,i=f.I(e),l=a.workspaceDir,s=a.workspaceName;if(r&&(f.J(e)||(l=l||f.lc(e),s=s||f.nc(e)),l=l||f.K(e)),l=i?l||"":null,s=s||"",e.data.workspace&&e.data.workspaceNames){var u=(n=Object(c.a)(e.data.workspaceNames)).indexOf(s);u>-1&&n.splice(u,1)}return{workspaceDir:l,currentWorkspaceName:s,selectedWorkspaceName:"",dialogId:o,isOpen:r,isLocalFSAllowed:i,workspaceNames:n,deleteEntireWorkspace:this.deleteEntireWorkspace}}))(y)},135:function(e,t,n){"use strict";function a(){return Boolean(window.electron)}function r(){return window.electron||null}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),a()&&console.debug("We are running on Electron :)")},136:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(15),r=n(16),o=n(19),i=n(20),l=n(412),c=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(e,r){var o;return Object(a.a)(this,n),(o=t.call(this,r))._status=void 0,o._status=e,o}return Object(r.a)(n,[{key:"status",get:function(){return this._status}},{key:"statusText",get:function(){return this.message}}],[{key:"fromResponse",value:function(e){return new n(e.status,e.statusText)}}]),n}(Object(l.a)(Error))},18:function(e,t,n){"use strict";function a(e){return"undefined"!==typeof e}function r(e){return"undefined"===typeof e}function o(e){return null!==e&&"undefined"!==typeof e}function i(e){return null===e||"undefined"===typeof e}function l(e){return"number"===typeof e}function c(e){return"string"===typeof e}function s(e){return"boolean"===typeof e}n.d(t,"b",(function(){return a})),n.d(t,"f",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return s}))},208:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var a=n(33),r=n(6),o=n(15),i=n(16),l=n(7),c=n(19),s=n(20),u=n(2),d=n(28),p=n(5),h=n(411),f=n(41),m=n(8),b=n(10),v=n(49),y={width:"100%",marginBottom:"2em",display:"flex",flexGrow:1},g={flexGrow:1},E={flex:"none"},O={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",border:"2px dashed #137cbd",borderRadius:"5px",background:"rgba(16, 22, 26, 0.3)",color:"#f5f8fa",transition:"border .24s ease-in-out"};var _=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleOnDrop=function(e){a.setState(Object(r.a)(Object(r.a)({},a.state),{},{files:e}))},a.handleOpenDirectoryOnClose=function(e){a.setState(Object(r.a)(Object(r.a)({},a.state),{},{dir:e})),console.log(e)},a.handleOpenDirectoryOpen=function(){a.props.dispatch(Object(m.Xc)({title:"Select Target Directory"},a.handleOpenDirectoryOnClose))},a.state={files:[],dir:"./"},a.onCancel=a.onCancel.bind(Object(l.a)(a)),a.onConfirm=a.onConfirm.bind(Object(l.a)(a)),a.canConfirm=a.canConfirm.bind(Object(l.a)(a)),a.renderBody=a.renderBody.bind(Object(l.a)(a)),a}return Object(i.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.setState({files:[],dir:"./"})}},{key:"onCancel",value:function(){this.props.dispatch(m.Pb(n.DIALOG_ID))}},{key:"canConfirm",value:function(){return this.state.files.length>0}},{key:"onConfirm",value:function(){this.props.dispatch(m.Pb(n.DIALOG_ID,this.state));var e,t=Object(a.a)(this.state.files);try{for(t.s();!(e=t.n()).done;){var r=e.value;this.props.dispatch(m.sd(this.state.dir,r))}}catch(o){t.e(o)}finally{t.f()}}},{key:"render",value:function(){var e=this.props.isOpen;return e?u.createElement(f.a,{isOpen:e,title:"Upload files",icon:"upload",confirmTitle:"Upload",confirmIconName:"upload",confirmTooltip:"Upload files.",onCancel:this.onCancel,canConfirm:this.canConfirm,onConfirm:this.onConfirm,renderBody:this.renderBody}):null}},{key:"renderBody",value:function(){var e=this.state.files.map((function(e){return u.createElement("li",{key:e.name},e.name," - ",e.size," bytes")}));return this.state.files?u.createElement("div",null,u.createElement("div",null,"Remote target directory:",u.createElement(p.ControlGroup,{style:y,fill:!0},u.createElement(v.a,{style:g,value:this.state.dir,onChange:function(e){console.log(e)},nullable:!1}),u.createElement(p.AnchorButton,{intent:p.Intent.PRIMARY,style:E,onClick:this.handleOpenDirectoryOpen},"..."))),u.createElement("div",null,"Files to upload:",u.createElement(p.ControlGroup,{style:y,fill:!0},u.createElement(h.a,{onDrop:this.handleOnDrop},(function(t){var n=t.getRootProps,a=t.getInputProps;return u.createElement("section",{className:"container"},u.createElement("div",n({style:O}),u.createElement("input",a()),u.createElement("p",null,"Drag 'n' drop files here, or click to select files")),u.createElement("aside",null,e.length>0?u.createElement("h4",null,"Files"):"",u.createElement("ul",null,e)))}))))):null}}]),n}(u.Component);_.DIALOG_ID="fileUploadDialog";var C=_.DIALOG_ID;t.b=Object(d.b)((function(e){return{isOpen:b.x(_.DIALOG_ID)(e).isOpen,dialogId:_.DIALOG_ID}}))(_)},209:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(15),r=n(16),o=n(136),i=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,[{key:"getServiceInfo",value:function(e){var t=new URL(e+"/");return fetch(t.toString()).then((function(e){if(!e.ok)throw o.a.fromResponse(e);return e.json()})).then((function(e){var t=e.content;return{name:t.name,version:t.version,timestamp:t.timestamp,userRootMode:t.user_root_mode,hostOS:t.host_os,dependencies:t.dependencies}}))}}]),e}()},211:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return g}));var a=n(6),r=n(33),o=n(25),i=n(18);var l=n(10),c=n(23),s=n(53);function u(e,t,n,a,i){if(!e||!e.length)return l.b;var c,s,u,f=Object(r.a)(e);try{for(f.s();!(u=f.n()).done;){var m=u.value,b=void 0,v=void 0;switch(m.type){case"VariableImage":b=d(m,a,i,t);break;case"ResourceVector":v=p(m,a,i,t);break;case"Vector":v=h(m,a,n)}b?c?c.push(b):c=[b]:v?s?s.push(v):s=[v]:m.id!==o.a&&console.warn('GlobeView: layer with ID "'.concat(m.id,'" will not be rendered'))}}catch(y){f.e(y)}finally{f.f()}return{imageLayerDescriptors:c,vectorLayerDescriptors:s}}function d(e,t,n,a){var r=Object(o.u)(a,e);if(!r)return console.warn('GlobeView: variable "'.concat(e.varName,'" not found in resource "').concat(e.resId,'"')),null;var i=r.imageLayout;if(!r.imageLayout)return console.warn('GlobeView: variable "'.concat(e.varName,'" of resource "').concat(e.resId,'" has no imageLayout')),null;var l=Object(o.M)(t,n,e),s=c.u.MAX_VALUE;if(i.extent){var u=i.extent;s=c.u.fromDegrees(u.west,u.south,u.east,u.north)}return Object.assign({},e,{imageryProvider:f,imageryProviderOptions:{url:l,rectangle:s,minimumLevel:0,maximumLevel:i.numLevels-1,tileWidth:i.tileWidth,tileHeight:i.tileHeight,tilingScheme:new c.k({rectangle:s,numberOfLevelZeroTilesX:i.numLevelZeroTilesX,numberOfLevelZeroTilesY:i.numLevelZeroTilesY})}})}function p(e,t,n,r){var i=Object(o.s)(r,e);return i?Object(a.a)(Object(a.a)({},e),{},{dataSource:b,dataSourceOptions:{data:Object(o.z)(t,n,e),resId:i.id,style:e.style}}):(console.warn('globe-view-layers: resource "'.concat(e.resId,'" not found"')),null)}function h(e,t,n){var r=e.data,i=e.style;return e.id===o.c?r=Object(o.C)(t):e.id===o.h&&(r=n),Object(a.a)(Object(a.a)({},e),{},{dataSource:m,dataSourceOptions:{data:r,style:i}})}function f(e,t){var n=new c.z(t);return n.errorEvent.addEventListener((function(e){console.error("GlobeView:",e)})),n}function m(e,t){var n=Object(s.k)(t.style||l.b);return c.j.load(t.data,n)}function b(e,t){return v(t.data,t.resId,t.style)}var v=function(e,t){var n={},a=0,r=function(){for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];var c=o.map((function(e){return"(".concat(e,":").concat(typeof e,")")})).join();if(c in n)return n[c];var s=e.apply(void 0,o);return(Object(i.g)(t)||t>0&&a<t)&&(n[c]=s,a++),s};return r.getMaxSize=function(){return t},r.getSize=function(){return a},r.clearCache=function(){n={},a=0},r}((function(e,t,n){var a=new c.g("Cate Resource #"+t),o=Object(s.k)(n),l=new Worker("".concat(".","/stream-geojson.js"));return l.postMessage(e),l.onmessage=function(e){var t=e.data;if(t){var n=c.d.fromAlpha(o.fill,.9),l=c.d.fromAlpha(o.fill,.5),s={type:"FeatureCollection",features:t};c.j.load(s,o).then((function(e){var o=new Map;t.forEach((function(e){return o.set(e.id,e)}));var s=new c.r(200,1,1e7,.1),u=new c.r(200,1,1e7,.5);a.entities.suspendEvents();var d,p=Object(r.a)(e.entities.values);try{for(p.s();!(d=p.n()).done;){var h=d.value,f=o.get(h.id);if(f&&Object(i.d)(f._simp)&&Object(i.d)(f._resId)&&Object(i.d)(f._idx)&&(h.point||h.billboard||h.label)){var m=.2;if(f.properties){var b=f.properties.area_npl43;b&&((m=(b-20)/480)<0&&(m=0),m>1&&(m=1))}var v=10+90*m;(h=new c.i({id:h.id,position:h.position,description:h.description,properties:h.properties,point:{color:n,outlineColor:l,outlineWidth:10,pixelSize:v,scaleByDistance:s,translucencyByDistance:u}}))._simp=f._simp,h._resId=f._resId,h._idx=f._idx}try{a.entities.add(h)}catch(y){console.error("failed to add entity: ",h,y)}}}catch(g){p.e(g)}finally{p.f()}e.entities.removeAll(),a.entities.resumeEvents(),a.changedEvent.raiseEvent()}))}},a})),y=["billboard","label","point","corridor","polyline","polygon"];function g(e,t,n){var a=Object(s.k)(n);c.j.load(t,a).then((function(t){var n=t.entities.values;n&&n.length&&function(e,t){var n=y.find((function(t){return c.E(e[t])})),a=y.find((function(e){return c.E(t[e])}));a&&n&&a!==n&&(t[a]=void 0);n&&(t[n]=e[n],Object(i.d)(t._simp)&&(t._simp&=-2))}(n[0],e)}))}},221:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=221},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"g",(function(){return b})),n.d(t,"i",(function(){return v})),n.d(t,"W",(function(){return y})),n.d(t,"X",(function(){return g})),n.d(t,"y",(function(){return E})),n.d(t,"p",(function(){return O})),n.d(t,"o",(function(){return C})),n.d(t,"j",(function(){return k})),n.d(t,"l",(function(){return w})),n.d(t,"k",(function(){return S})),n.d(t,"n",(function(){return j})),n.d(t,"m",(function(){return I})),n.d(t,"M",(function(){return D})),n.d(t,"z",(function(){return L})),n.d(t,"A",(function(){return T})),n.d(t,"x",(function(){return A})),n.d(t,"D",(function(){return R})),n.d(t,"C",(function(){return N})),n.d(t,"J",(function(){return x})),n.d(t,"I",(function(){return M})),n.d(t,"Y",(function(){return V})),n.d(t,"Z",(function(){return B})),n.d(t,"w",(function(){return W})),n.d(t,"U",(function(){return U})),n.d(t,"S",(function(){return G})),n.d(t,"T",(function(){return Y})),n.d(t,"E",(function(){return H})),n.d(t,"F",(function(){return K})),n.d(t,"s",(function(){return z})),n.d(t,"t",(function(){return q})),n.d(t,"u",(function(){return X})),n.d(t,"r",(function(){return Z})),n.d(t,"q",(function(){return Q})),n.d(t,"v",(function(){return $})),n.d(t,"K",(function(){return ee})),n.d(t,"b",(function(){return ne})),n.d(t,"e",(function(){return ae})),n.d(t,"d",(function(){return re})),n.d(t,"fb",(function(){return ce})),n.d(t,"cb",(function(){return se})),n.d(t,"B",(function(){return ue})),n.d(t,"bb",(function(){return de})),n.d(t,"db",(function(){return pe})),n.d(t,"f",(function(){return he})),n.d(t,"Q",(function(){return me})),n.d(t,"N",(function(){return be})),n.d(t,"P",(function(){return ve})),n.d(t,"O",(function(){return ye})),n.d(t,"ab",(function(){return ge})),n.d(t,"V",(function(){return Ee})),n.d(t,"eb",(function(){return Ce})),n.d(t,"gb",(function(){return ke})),n.d(t,"H",(function(){return Se})),n.d(t,"G",(function(){return je})),n.d(t,"R",(function(){return De})),n.d(t,"L",(function(){return Le}));var a=n(33),r=n(6),o=n(63),i=n(29),l=n(18),c=n(10),s=n(53),u=n(60),d="auto",p="countries",h="myPlaces",f={id:d,type:"Unknown",visible:!0},m={id:p,name:"Countries",type:"Vector",visible:!1,style:Object(r.a)(Object(r.a)({},u.a),{},{stroke:"#ffff00",fill:"#FFFFFF",fillOpacity:.2,strokeWidth:1.5})},b={id:h,name:"My Places",type:"Vector",visible:!0,style:{markerSize:"small",markerColor:"#ff0000",markerSymbol:"",fill:"#0000ff",fillOpacity:.5,stroke:"#ffff00",strokeOpacity:.5,strokeWidth:1}},v="placemark-";function y(e){return e&&("local"===e.id||e.isLocal)}function g(e){return e&&"local"!==e.id&&!e.isLocal}function E(e){var t,n,a=e.metaInfo;return a&&(!(t=a.catalog_url||a.catalogue_url)&&e.id.includes("esacci")&&a.uuid&&(t="https://catalogue.ceda.ac.uk/uuid/".concat(a.uuid)),n=a.info_url),{catalogUrl:t,infoUrl:n}}function O(e){var t=e.metaInfo;if(t){var n=_(t,"time"),a=_(t,"lon")&&_(t,"lat");if(n&&a)return["open","constrain_time","constrain_region"];if(n)return["open","constrain_time"];if(a)return["open","constrain_region"];if(Object(l.e)(t.data_type)&&"dataset"===t.data_type)return["open"]}}function _(e,t){return!(!e.coords||!e.coords.find((function(e){return function(e,t){return e.name===t&&!!e.dims&&1===e.dims.length&&!!e.dims.find((function(e){return e===t}))}(e,t)})))}function C(e){return P(e,"open","constrain_region","constrain_time","write_zarr")}function k(e){return P(e,"write_zarr")}function w(e){return P(e,"constrain_time")}function S(e){return P(e,"constrain_region")}function j(e){return P(e,"constrain_region")}function I(e){return e.metaInfo&&e.metaInfo.data_vars&&e.metaInfo.data_vars.length>1}function P(e){var t=e.capabilities;if(t||(e.dataType&&"dataset"===e.dataType||e.id.endsWith(".zarr"))&&(t=["open"]),Array.isArray(t)){for(var n=new Set(t),a=arguments.length,r=new Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];for(var i=0,l=r;i<l.length;i++){var c=l[i];if(n.has(c))return!0}return!1}}function D(e,t,n){return e+"ws/res/tile/".concat(t,"/").concat(n.resId,"/{z}/{y}/{x}.png?")+"&var=".concat(encodeURIComponent(n.varName))+"&index=".concat(encodeURIComponent((n.varIndex||[]).join()))+"&cmap=".concat(encodeURIComponent(n.colorMapName)+(n.alphaBlending?"_alpha":""))+"&min=".concat(encodeURIComponent(n.displayMin+""))+"&max=".concat(encodeURIComponent(n.displayMax+""))}function L(e,t,n){return e+"ws/res/geojson/".concat(t,"/").concat(n.resId)}function T(e,t,n,a){return e+"ws/res/geojson/".concat(t,"/").concat(n.resId,"/").concat(a)}function A(e,t,n,a){var r="";return a&&(r="?var=".concat(encodeURIComponent(a))),e+"ws/res/csv/".concat(t,"/").concat(n.resId).concat(r)}function R(e,t,n){return e+"ws/res/html/".concat(t,"/").concat(n)}function N(e){return e+"ws/countries"}function x(e,t,n){return"".concat(e).concat(t,"/").concat(n)}function M(e,t,n){return"".concat(e,"mpl/download/").concat(t,"/").concat(n)}function V(e){return e.numDims&&e.numDims>=2&&!!e.imageLayout}function B(e){return e.isFeatureAttribute}function W(e){return e+Math.floor(4294967296*(1+Math.random())).toString(16)+"-"+Math.floor(Date.now()).toString(16)}function F(){return W("layer-")}function U(e){return e&&Object(l.d)(e.id)&&e.dataType.endsWith(".Figure")}function G(e){return e&&Object(l.d)(e.id)&&e.dataType.endsWith(".HTML")}function Y(e){return e&&(e.dataType.endsWith(".DataFrame")||e.dataType.endsWith(".GeoDataFrame"))}function H(e){if(e.name)return e.name;var t=e.varName,n=e.resName;return e.id===d?n&&t?"Selected Variable (".concat(n," / ").concat(t,")"):"Selected Variable (none)":n&&t?"".concat(n," / ").concat(t):e.id}function K(e){return ge(e)?"map-marker":"Image"===e.type||"VariableImage"===e.type?"layout-grid":"layer"}function z(e,t){return J(e,t.resId)}function q(e,t){return e.find((function(e){return e.name===t}))}function J(e,t){return e.find((function(e){return e.id===t}))}function X(e,t){var n=z(e,t);return n&&n.variables&&n.variables.find((function(e){return e.name===t.varName}))}function Z(e,t){return e&&e.find((function(e){return e.qualifiedName===t||e.name===t}))}function Q(e,t,n){var a=e&&e.find((function(e){return e.id===t}));if(a){var r=a.dataSources&&a.dataSources.find((function(e){return e.id===n}));if(r)return r}return null}function $(e,t){var n=J(e,t.resId);if(!n)return c.a;var a=n.coordVariables;if(!a)return c.a;var r=n&&n.variables.find((function(e){return e.name===t.varName}));if(!r)return c.a;var o=t.varIndex;if(!o||!o.length)return c.a;var i=r.dimNames;if(!i||!i.length)return c.a;var l={};a.forEach((function(e){l[e.name]=e.data}));for(var s=[],u=0;u<o.length;u++){var d=o[u],p=u<i.length?i[u]:null,h=void 0;if(p){var f=l[p];h=f&&f.length&&d<f.length?f[d]:"-"}else h="?";s.push([p,h])}return s}function ee(e,t){var n=e.coordVariables;if(!n)return c.b;var a=e&&e.variables.find((function(e){return e.name===t.varName}));if(!a)return c.b;var r=t.varIndex;if(!r||!r.length)return c.b;var o=a.dimNames;if(!o||!o.length)return c.b;var i={};n.forEach((function(e){i[e.name]=e.data}));for(var l={},s=0;s<r.length;s++){var u=r[s],d=s<o.length?o[s]:null;if(d){var p=i[d];p&&p.length&&u<p.length&&(l[d]=p[u])}}return l}var te=function(e){return{id:e,title:e[0].toUpperCase()+e.substring(1),options:{url:"https://storage.googleapis.com/esa-cfs-tiles/0.7.0/basemaps/".concat(e,"/{z}/{x}/{reverseY}.png"),tilingScheme:"Geographic",maximumLevel:4}}},ne=[{id:"natural",title:"Natural",options:null},{id:"natural_offline",title:"Natural (offline)",options:{url:"./Cesium/Assets/Textures/NaturalEarthII/{z}/{x}/{reverseY}.jpg",credit:"\xa9 Analytical Graphics, Inc.",tilingScheme:"Geographic",maximumLevel:2}},te("atmosphere"),te("blue"),te("dark"),te("land"),te("ocean")],ae="atmosphere",re=ne.find((function(e){return"atmosphere"===e.id}));function oe(e){return{viewMode:"3D",projectionCode:"EPSG:4326",baseMapId:e||ae,layers:[Object(r.a)({},f),Object(r.a)({},m),Object(r.a)({},b)],selectedLayerId:d,selectedEntityId:null,layerSplitPosition:.5}}function ie(e,t){return{resName:e,varName:t,dataRows:null}}var le=0;function ce(e){var t=++le;return{title:"World (".concat(t,")"),id:W("world-"),type:"world",icon:"globe",data:oe(e)}}function se(e){return{title:ue(e.name),id:"fig-".concat(e.id),type:"figure",icon:"timeline-area-chart",data:(t=e.id,{resourceId:t,fixedSize:!1})};var t}function ue(e){return"Figure - ".concat(e)}function de(e){return{title:(n=e.name,"Animation - ".concat(n)),id:"anim-".concat(e.id),type:"animation",icon:"play",data:(t=e.id,{resourceId:t,fixedSize:!1})};var t,n}function pe(e,t){return{title:t?"".concat(e,".").concat(t):e,id:W("table-"),type:"table",icon:"th",data:ie(e,t)}}var he={id:"global_external_object_store"};function fe(e){if(e&&"world"===e.type)return he["CesiumGlobe-"+e.id]}function me(e){var t=fe(e);return t?t.object:null}function be(e){var t=me(e);return t&&t.selectedEntity?t.selectedEntity:null}function ve(e,t){var n=fe(e);if(!t||!n)return null;var r=n.object;i.a(r);var o=n.state.dataSourceMap;i.a(o);for(var l=r.dataSources,c=0;c<l.length;c++){var s=l.get(c);if(s.entities.contains(t)){var u,d=Object(a.a)(Object.getOwnPropertyNames(o));try{for(d.s();!(u=d.n()).done;){var p=u.value;if(s===o[p]){var h,f=Object(a.a)(e.data.layers);try{for(f.s();!(h=f.n()).done;){var m=h.value;if(m.id===p)return i.a(ge(m)),m}}catch(b){f.e(b)}finally{f.f()}}}}catch(b){d.e(b)}finally{d.f()}}}return null}function ye(e){var t=be(e);return t?function(){return Object(s.f)(t)}:null}function ge(e){return"Vector"===e.type||"ResourceVector"===e.type}function Ee(e){return"Image"===e.type||"VariableImage"===e.type}var Oe=["#550000","#005500","#000055","#555555"],_e=["#FF0000","#FFA500","#FFFF00","#00FF00","#0000FF","#FF00FF","#00FFFF"];function Ce(e,t,n){i.a(e),i.a(t);var a=t&&V(t),o=t&&B(t);if(i.a(a||o,"geo-spatial variable expected"),a){var l=n&&n[t.name],c=Ie(t,l);return Object(r.a)(Object(r.a)({},l),{},{id:F(),type:"VariableImage",name:"".concat(e.name,".").concat(t.name),visible:!0,resId:e.id,resName:e.name,varName:t.name},c)}var s=n&&n[t.name],u=s&&s.style;return Object(r.a)(Object(r.a)({},s),{},{id:F(),type:"ResourceVector",name:"".concat(e.name),visible:!0,resId:e.id,resName:e.name,style:we(e.id,u)})}function ke(e,t,n,a){i.a(e),i.a(e.id===d);var o=n&&V(n),l=n&&B(n);if(o){var c=a&&a[n.name],s=Ie(n,c);return Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({},e),c),{},{type:"VariableImage",name:"Auto ".concat(t.name,".").concat(n.name),resId:t.id,resName:t.name,varName:n.name},s),{},{id:d})}if(l){var u=a&&a[t.name],p=u&&u.style;return Object(r.a)(Object(r.a)(Object(r.a)({},e),u),{},{type:"ResourceVector",name:"Auto ".concat(t.name),resId:t.id,resName:t.name,style:we(t.id,p),id:d})}return{type:"Unknown",name:n?"Auto ".concat(n.name," (geo-ref not found or recognized)"):"Auto (no selection)",visible:e.visible,id:d}}function we(e,t){return Object(r.a)(Object(r.a)({},u.a),{},{stroke:Oe[e%Oe.length],fill:_e[e%_e.length]},t)}function Se(e){return'loadDataSources("'.concat(e,'")')}function je(e,t,n){return function(e,t,n,a){return a&&a.length?"".concat(e,'("').concat(t,'", "').concat(n,'", [').concat(a,"])"):"".concat(e,'("').concat(t,'", "').concat(n,'")')}("getWorkspaceVariableStatistics",e,t,n)}function Ie(e,t){var n,a;return t?a=t.varIndex&&t.varIndex.slice():e&&(n=function(e){var t=Object(l.d)(e.validMin)?e.validMin:0,n=Object(l.d)(e.validMax)?e.validMax:t+1;return{colorMapName:Object(l.e)(e.colorMapName)?e.colorMapName:"inferno",displayMin:Object(l.d)(e.displayMin)?e.displayMin:t,displayMax:Object(l.d)(e.displayMax)?e.displayMax:n,alphaBlending:!1,opacity:1,brightness:1,contrast:1,hue:0,saturation:1,gamma:1,splitMode:o.b}}(e)),e&&(a=function(e,t){if(e.numDims&&e.numDims>=2&&(!t||t.length!==e.numDims-2))return Array(e.numDims-2).fill(0);return t}(e,a)),Object(r.a)(Object(r.a)({},n),{},{varIndex:a})}var Pe=null;function De(){var e,t;if(null===Pe)try{e=document.createElement("canvas"),Pe=!0,t=(e.getContext("webgl")||e.getContext("experimental-webgl")).getSupportedExtensions(),console.debug("WebGL supported extensions:",t)}catch(n){return Pe=!1,console.warn("WebGL not supported but required by world view"),!1}return e=null,null,Pe}function Le(e,t){var n,r,o,i,l=e.geometry.type,c=t.features,s=new Set,u=Object(a.a)(c);try{for(u.s();!(n=u.n()).done;){var d=n.value.properties;d&&d.title&&d.title.startsWith(l)&&s.add(d.title)}}catch(p){u.e(p)}finally{u.f()}for(o=1;o<=c.length+1;o++)if(i="".concat(l," ").concat(o),!s.has(i)){r=i;break}return{title:r,index:o}}},29:function(e,t,n){"use strict";function a(e,t){if(!e)throw new Error("assertion failed"+(t?": ".concat(t):""))}n.d(t,"a",(function(){return a}))},310:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return ERROR_CODE_INVALID_PARAMS})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ERROR_CODE_CANCELLED})),__webpack_require__.d(__webpack_exports__,"h",(function(){return newWebAPIClient})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getJobFailureIntentName})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getJobFailureIconName})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getJobFailureTitle})),__webpack_require__.d(__webpack_exports__,"f",(function(){return isDeveloperError})),__webpack_require__.d(__webpack_exports__,"g",(function(){return isUserError}));var D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(16),_blueprintjs_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5),_Job__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(91),ERROR_CODE_INVALID_REQUEST=-32600,ERROR_CODE_METHOD_NOT_FOUND=-32601,ERROR_CODE_INVALID_PARAMS=-32602,ERROR_CODE_OS_ERROR=-32001,ERROR_CODE_OUT_OF_MEMORY=-32002,ERROR_CODE_METHOD_ERROR=-32003,ERROR_CODE_INVALID_RESPONSE=-32004,ERROR_CODE_CANCELLED=999,CANCEL_METHOD="__cancel__",DEBUG=!1;function newWebAPIClient(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new WebAPIClientImpl(e,t,n)}var WebAPIClientImpl=function(){function WebAPIClientImpl(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0;Object(D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,WebAPIClientImpl),this.url=void 0,this.onOpen=void 0,this.onClose=void 0,this.onError=void 0,this.onWarning=void 0,this.socket=void 0,this.currentMessageId=0,this.activeJobs=void 0,this.url=e,this.currentMessageId=n,this.activeJobs=[],this.socket=a||new WebSocket(e),this.socket.onopen=function(e){t.onOpen&&t.onOpen(e)},this.socket.onclose=function(e){t.onClose&&t.onClose(e)},this.socket.onerror=function(e){t.onError&&t.onError(e)},this.socket.onmessage=function(e){t.processMessage(e.data)}}return Object(D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(WebAPIClientImpl,[{key:"call",value:function(e,t,n,a){var r={id:this.newId(),method:e,params:t},o=new JobImpl(this,r,a);return this.activeJobs[r.id]=o,o.invoke(n)}},{key:"cancel",value:function(e){var t=this.activeJobs[e];t?t.cancel():this.warn('Job with "id"='.concat(e," does not exist"))}},{key:"close",value:function(){this.socket.close()}},{key:"sendMessage",value:function(e){var t=Object.assign({},{jsonrpc:"2.0"},e),n=JSON.stringify(t);this.socket.send(n)}},{key:"processMessage",value:function processMessage(messageText){var message;try{message=eval("(".concat(messageText,")"))}catch(err){return void this.warnInvalidJsonRcpMessage("Message is no valid JSON",messageText)}if("2.0"===message.jsonrpc&&"number"===typeof message.id){var job=this.activeJobs[message.id];if(job)if(message.response||null===message.response)job.notifyDone(message.response),delete this.activeJobs[message.id];else if(message.progress)message.progress.id=message.id,job.notifyInProgress(message.progress);else{if(!message.error)return void this.warnInvalidJsonRcpMessage('Method is neither a "response", "progress", nor "error"',messageText);job.notifyFailed(message.error),delete this.activeJobs[message.id]}else this.warnInvalidJsonRcpMessage('Method with "id"='.concat(message.id," has no associated job"),messageText)}else this.warnInvalidJsonRcpMessage("Message is not JSON-RCP 2.0 compliant",messageText)}},{key:"warnInvalidJsonRcpMessage",value:function(e,t){if(this.onWarning){var n="Received invalid JSON-RCP message from Cate service. ".concat(e,". Ignoring it.\n--------------------\n").concat(t,"\n--------------------");this.onWarning({type:"warning",message:n})}}},{key:"warn",value:function(e){this.onWarning&&this.onWarning({type:"warning",message:e})}},{key:"newId",value:function(){return this.currentMessageId++}},{key:"isOpen",get:function(){return this.socket.readyState===WebSocket.OPEN}}]),WebAPIClientImpl}(),JobImpl=function(){function e(t,n,a){Object(D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,e),this.webAPIClient=void 0,this.request=void 0,this.status=void 0,this.onProgress=void 0,this.onResolve=void 0,this.onReject=void 0,this.transformer=void 0,this.webAPIClient=t,this.request=n,this.status=_Job__WEBPACK_IMPORTED_MODULE_3__.a.NEW,this.transformer=a}return Object(D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(e,[{key:"getRequest",value:function(){return this.request}},{key:"getStatus",value:function(){return this.status}},{key:"isCancelled",value:function(){return this.status===_Job__WEBPACK_IMPORTED_MODULE_3__.a.CANCELLED}},{key:"cancel",value:function(e,t){this.webAPIClient.call(CANCEL_METHOD,{id:this.request.id}).then(e||function(){},t||function(){})}},{key:"invoke",value:function(e){var t=this,n=new Promise(function(n,a){t.setHandlers(e,n,a),t.sendMessage(),t.setStatus(_Job__WEBPACK_IMPORTED_MODULE_3__.a.SUBMITTED)}.bind(this));return n.getJob=this.getJob.bind(this),n.getJobId=this.getJobId.bind(this),n}},{key:"notifyInProgress",value:function(e){this.setStatus(_Job__WEBPACK_IMPORTED_MODULE_3__.a.IN_PROGRESS),this.onProgress&&this.onProgress(e)}},{key:"notifyDone",value:function(e){this.setStatus(_Job__WEBPACK_IMPORTED_MODULE_3__.a.DONE),this.onResolve&&this.onResolve(this.transformer?this.transformer(e):e)}},{key:"notifyFailed",value:function(e){this.setStatus(e.code===ERROR_CODE_CANCELLED?_Job__WEBPACK_IMPORTED_MODULE_3__.a.CANCELLED:_Job__WEBPACK_IMPORTED_MODULE_3__.a.FAILED),this.onReject&&this.onReject(e)}},{key:"getJob",value:function(){return this}},{key:"getJobId",value:function(){return this.getRequest().id}},{key:"setHandlers",value:function(e,t,n){this.onProgress=e,this.onResolve=t,this.onReject=n}},{key:"sendMessage",value:function(){this.webAPIClient.sendMessage(this.request)}},{key:"setStatus",value:function(e){this.status=e}}]),e}();function getJobFailureIntentName(e){if(e)switch(e.code){case ERROR_CODE_INVALID_PARAMS:case ERROR_CODE_CANCELLED:return _blueprintjs_core__WEBPACK_IMPORTED_MODULE_2__.Intent.PRIMARY;case ERROR_CODE_OS_ERROR:default:return _blueprintjs_core__WEBPACK_IMPORTED_MODULE_2__.Intent.WARNING}return _blueprintjs_core__WEBPACK_IMPORTED_MODULE_2__.Intent.WARNING}function getJobFailureIconName(e){if(e){if(e.data){if("cate.core.ds.NetworkError"===e.data.exception)return"offline";if("cate.core.ds.DataAccessError"===e.data.exception)return"database"}switch(e.code){case ERROR_CODE_INVALID_PARAMS:return"manually-entered-data";case ERROR_CODE_CANCELLED:return"hand";default:return"error"}}return"warning-sign"}function getJobFailureTitle(e){if(e){if(console.log(e),e.data){if("cate.core.ds.NetworkError"===e.data.exception)return"Network Problem";if("cate.core.ds.DataAccessError"===e.data.exception)return"Data Access Error"}switch(e.code){case ERROR_CODE_INVALID_PARAMS:return"Invalid Input";case ERROR_CODE_OUT_OF_MEMORY:return"Out-Of-Memory Error";case ERROR_CODE_OS_ERROR:return"External Problem";case ERROR_CODE_CANCELLED:return"Task Cancelled";case ERROR_CODE_METHOD_NOT_FOUND:return"Internal Error (Method Not Found)";case ERROR_CODE_INVALID_REQUEST:return"Internal Error (Invalid Request)";case ERROR_CODE_INVALID_RESPONSE:return"Internal Error (Invalid Response)";case ERROR_CODE_METHOD_ERROR:return"Operation Error"}}return"Unknown Error"}var NON_DEVELOPER_ERRORS=[ERROR_CODE_INVALID_PARAMS,ERROR_CODE_CANCELLED,ERROR_CODE_OS_ERROR,ERROR_CODE_OUT_OF_MEMORY];function isDeveloperError(e){return NON_DEVELOPER_ERRORS.indexOf(e.code)<0}var USER_ERRORS=[ERROR_CODE_INVALID_PARAMS,ERROR_CODE_CANCELLED];function isUserError(e){return USER_ERRORS.indexOf(e.code)>=0}},38:function(e,t,n){"use strict";n.d(t,"g",(function(){return a.a})),n.d(t,"e",(function(){return r.b})),n.d(t,"d",(function(){return r.a})),n.d(t,"o",(function(){return r.h})),n.d(t,"k",(function(){return r.d})),n.d(t,"j",(function(){return r.c})),n.d(t,"l",(function(){return r.e})),n.d(t,"m",(function(){return r.f})),n.d(t,"n",(function(){return r.g})),n.d(t,"c",(function(){return l})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return y})),n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return _})),n.d(t,"f",(function(){return C}));var a=n(91),r=n(310),o=n(15),i=n(16),l=function(){function e(t){Object(o.a)(this,e),this.webAPIClient=void 0,this.webAPIClient=t}return Object(i.a)(e,[{key:"getDataStores",value:function(){return this.webAPIClient.call("get_data_stores",[])}},{key:"getDataSources",value:function(t,n){return this.webAPIClient.call("get_data_sources",[t],n,e.responseToDataSources)}},{key:"getDataSourceMetaInfo",value:function(t,n,a){return this.webAPIClient.call("get_data_source_meta_info",[t,n],a,e.responseToMetaInfo)}},{key:"addLocalDataSource",value:function(e,t,n){return this.webAPIClient.call("add_local_data_source",[e,t],n)}},{key:"removeLocalDataSource",value:function(e,t,n){return this.webAPIClient.call("remove_local_data_source",[e,t],n)}},{key:"extractPixelValues",value:function(e,t,n,a){return this.webAPIClient.call("extract_pixel_values",[e,t,n,a])}}],[{key:"responseToDataSources",value:function(e){return e.map((function(e,t){return console.debug("dataSources[".concat(t,"]:"),e),{id:e.id,title:e.title,dataType:e.data_type||"dataset",capabilities:e.verification_flags,metaInfoStatus:"init"}}))}},{key:"responseToMetaInfo",value:function(e){return e}}]),e}();function c(e){return e?e.map(s):null}function s(e){return{qualifiedName:e.qualified_name,name:e.name||e.qualified_name,description:e.header&&e.header.description||null,tags:e.header&&e.header.tags||[],hasMonitor:e.has_monitor||!1,inputs:e.inputs.map(u),outputs:e.outputs.map(d)}}function u(e){return{name:e.name,dataType:e.data_type,description:e.description||null,units:e.units,password:e.password,defaultValue:e.default_value,nullable:e.nullable||null===e.default_value,valueSet:e.value_set,valueSetSource:e.value_set_source,valueRange:e.value_range,scriptLang:e.script_lang,fileOpenMode:e.file_open_mode,fileFilters:e.file_filters,fileProps:e.file_props,noUI:e.no_ui||e.step_id}}function d(e){return{name:e.name,dataType:e.data_type,description:e.description||null}}var p=function(){function e(t){Object(o.a)(this,e),this.webAPIClient=void 0,this.webAPIClient=t}return Object(i.a)(e,[{key:"getOperations",value:function(){return this.webAPIClient.call("get_operations",[],null,c)}}]),e}(),h=n(6),f=n(18),m=n(10);function b(e){return e?{id:e.id,baseDir:e.base_dir,description:e.description,isScratch:e.is_scratch,isModified:e.is_modified,isSaved:e.is_saved,workflow:e.workflow,resources:(t=e.resources,(t||m.a).map((function(e){return e.variables?Object(h.a)(Object(h.a)({},e),{},{variables:(t=e.variables,(t||m.a).map((function(e){var t=e.attributes||m.b,n=t.valid_min,a=t.valid_max,r=t.valid_range,o=Object(f.b)(r)&&2===r.length;n=!Object(f.d)(n)&&o&&Object(f.d)(r[0])?r[0]:n,a=!Object(f.d)(a)&&o&&Object(f.d)(r[1])?r[1]:a;var i=t.units;return"kelvin"!==i&&"Kelvin"!==i||((!Object(f.d)(n)||n<270)&&(n=270),(!Object(f.d)(a)||a>310)&&(a=310)),Object(h.a)(Object(h.a)({},e),{},{units:i,validMin:n,validMax:a})})))}):e;var t})))}:null;var t}function v(e){return[b(e[0]),e[1]]}var y=function(){function e(t){Object(o.a)(this,e),this.webAPIClient=void 0,this.webAPIClient=t}return Object(i.a)(e,[{key:"listWorkspaces",value:function(){return this.webAPIClient.call("list_workspace_names",[])}},{key:"newWorkspace",value:function(e){return this.webAPIClient.call("new_workspace",[e],null,b)}},{key:"openWorkspace",value:function(e,t){return this.webAPIClient.call("open_workspace",[e],t,b)}},{key:"closeWorkspace",value:function(e){return this.webAPIClient.call("close_workspace",[e])}},{key:"saveWorkspace",value:function(e,t){return this.webAPIClient.call("save_workspace",[e],t,b)}},{key:"saveWorkspaceAs",value:function(e,t,n){return this.webAPIClient.call("save_workspace_as",[e,t],n,b)}},{key:"cleanWorkspace",value:function(e){return this.webAPIClient.call("clean_workspace",[e],null,b)}},{key:"setWorkspaceResource",value:function(e,t,n,a,r,o){return this.webAPIClient.call("set_workspace_resource",[e,t,n,a,r],o,v)}},{key:"setWorkspaceResourcePersistence",value:function(e,t,n){return this.webAPIClient.call("set_workspace_resource_persistence",[e,t,n],null,b)}},{key:"runOpInWorkspace",value:function(e,t,n,a){return this.webAPIClient.call("run_op_in_workspace",[e,t,n],a)}},{key:"renameWorkspaceResource",value:function(e,t,n){return this.webAPIClient.call("rename_workspace_resource",[e,t,n],null,b)}},{key:"deleteWorkspace",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.webAPIClient.call("delete_workspace",[e,t],null,b)}},{key:"deleteWorkspaceResource",value:function(e,t){return this.webAPIClient.call("delete_workspace_resource",[e,t],null,b)}},{key:"getWorkspaceVariableStatistics",value:function(e,t,n,a,r){return this.webAPIClient.call("get_workspace_variable_statistics",[e,t,n,a],r)}}]),e}();function g(e){return e?{dataStoresPath:e.data_stores_path,useWorkspaceImageryCache:e.use_workspace_imagery_cache,resourceNamePattern:e.default_res_pattern,proxyUrl:e.http_proxy}:null}var E=function(){function e(t){Object(o.a)(this,e),this.webAPIClient=void 0,this.webAPIClient=t}return Object(i.a)(e,[{key:"getBackendConfig",value:function(){return this.webAPIClient.call("get_config",[],null,g)}},{key:"setBackendConfig",value:function(e){return this.webAPIClient.call("set_config",[(t=e,t?{data_stores_path:t.dataStoresPath,use_workspace_imagery_cache:t.useWorkspaceImageryCache,default_res_pattern:t.resourceNamePattern,http_proxy:t.proxyUrl}:{})]);var t}}]),e}();function O(e){return e?e.map((function(e){return{name:e[0],description:e[1],colorMaps:e[2].map((function(e){return{name:e[0],imageData:e[1]}}))}})):null}var _=function(){function e(t){Object(o.a)(this,e),this.webAPIClient=void 0,this.webAPIClient=t}return Object(i.a)(e,[{key:"getColorMaps",value:function(){return this.webAPIClient.call("get_color_maps",[],null,O)}}]),e}(),C=function(){function e(t){Object(o.a)(this,e),this.webAPIClient=void 0,this.webAPIClient=t}return Object(i.a)(e,[{key:"updateFileNode",value:function(e){return this.webAPIClient.call("update_file_node",[e])}}]),e}()},402:function(e,t,n){e.exports=n.p+"static/media/cate-icon-128.4edcc198.png"},406:function(e){e.exports=JSON.parse('{"ecvs":{"aerosol":{"group":"atmosphere","color":"ecv_blue","label":"AER"},"cloud":{"group":"atmosphere","color":"ecv_blue","label":"CL"},"ghg":{"group":"atmosphere","color":"ecv_blue","label":"GHG"},"ozone":{"group":"atmosphere","color":"ecv_blue","label":"OZ"},"biomass":{"group":"terrestrial","color":"ecv_orange","label":"BIO"},"fire":{"group":"terrestrial","color":"ecv_orange","label":"FIR"},"glaciers":{"group":"terrestrial","color":"ecv_orange","label":"GLA"},"lc":{"group":"terrestrial","color":"ecv_orange","label":"LC"},"permafrost":{"group":"terrestrial","color":"ecv_orange","label":"PF"},"soilmoisture":{"group":"terrestrial","color":"ecv_orange","label":"SM"},"snow":{"group":"terrestrial","color":"ecv_orange","label":"SNW"},"ghrsst":{"group":"ocean","color":"ecv_green","label":"SST"},"icesheats":{"group":"ocean","color":"ecv_green","label":"IS"},"oc":{"group":"ocean","color":"ecv_green","label":"OC"},"seaice":{"group":"ocean","color":"ecv_green","label":"SI"},"sealevel":{"group":"ocean","color":"ecv_green","label":"SL"},"seasurfacesalinity":{"group":"ocean","color":"ecv_green","label":"SAL"},"sst":{"group":"ocean","color":"ecv_green","label":"SST"}},"colors":{"ecv_deep_space":"#002B40","ecv_deep_space_1":"#2F5D6F","ecv_green":"#248A90","ecv_orange":"#FF902B","ecv_blue":"#32A6DC","esa_teal":"#0BB7A0","esa_teal_55":"#78D4C7","default":"#0BB7A0"},"mappings":{"icesheets_antarctica_gmb":"icesheets","icesheets_greenland_gmb":"icesheets","l3c_cloud":"cloud","l3c_snow":"snow","l4_ghrsst":"sst"}}')},407:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DictValueEditor}));var D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(16),D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7),D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(19),D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(20),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),_components_field_Field__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(52),_components_field_TextField__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(49),DictValueEditor=function(e){Object(D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__.a)(n,e);var t=Object(D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__.a)(n);function n(e){var a;return Object(D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,n),(a=t.call(this,e)).onChange=a.onChange.bind(Object(D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__.a)(a)),a}return Object(D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(n,[{key:"onChange",value:function(e){this.props.onChange(this.props.input,e)}},{key:"render",value:function(){var e=Object(_components_field_Field__WEBPACK_IMPORTED_MODULE_6__.c)(this.props.value);return react__WEBPACK_IMPORTED_MODULE_5__.createElement(_components_field_TextField__WEBPACK_IMPORTED_MODULE_7__.a,{value:e,validator:validateDictText,size:36,placeholder:"Enter key-value pairs (Python), separated by comma",onChange:this.onChange,style:n.TEXT_FIELD_STYLE,nullable:this.props.input.nullable})}}]),n}(react__WEBPACK_IMPORTED_MODULE_5__.Component);function validateDictText(value){if(value&&""!==value.trim()){var None=null,True=!0,False=!1;eval("var ".concat(value,";"))}}DictValueEditor.TEXT_FIELD_STYLE={flexGrow:1}},408:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return LiteralValueEditor}));var D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(16),D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7),D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(19),D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(20),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),_components_field_Field__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(52),_components_field_TextField__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(49),LiteralValueEditor=function(e){Object(D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__.a)(n,e);var t=Object(D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__.a)(n);function n(e){var a;return Object(D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,n),(a=t.call(this,e)).onChange=a.onChange.bind(Object(D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__.a)(a)),a}return Object(D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(n,[{key:"onChange",value:function(e){this.props.onChange(this.props.input,e)}},{key:"render",value:function(){var e=Object(_components_field_Field__WEBPACK_IMPORTED_MODULE_6__.c)(this.props.value);return react__WEBPACK_IMPORTED_MODULE_5__.createElement(_components_field_TextField__WEBPACK_IMPORTED_MODULE_7__.a,{value:e,validator:this.props.validator||validatePythonLiteralText,size:36,placeholder:this.props.placeholder||"Enter constant (Python) literal",onChange:this.onChange,style:n.TEXT_FIELD_STYLE})}}]),n}(react__WEBPACK_IMPORTED_MODULE_5__.Component);function validatePythonLiteralText(value){if(value&&""!==value.trim()){var None=null,True=!0,False=!1;eval(value)}}LiteralValueEditor.TEXT_FIELD_STYLE={flexGrow:1}},41:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(68),r=n(15),o=n(16),i=n(19),l=n(20),c=n(2),s=n(5),u=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return this.props.isOpen?c.createElement(s.Dialog,{isOpen:this.props.isOpen,title:this.props.title,icon:this.props.icon,onClose:this.props.onCancel,autoFocus:!0,canEscapeKeyClose:!0,canOutsideClickClose:!1,enforceFocus:!0,style:this.props.style},this.renderDialogContent(),this.renderDialogFooter()):null}},{key:"renderDialogContent",value:function(){return c.createElement("div",{className:s.Classes.DIALOG_BODY},this.props.renderBody?this.props.renderBody():this.props.children)}},{key:"renderDialogFooter",value:function(){return c.createElement("div",{className:s.Classes.DIALOG_FOOTER},c.createElement("div",{className:s.Classes.DIALOG_FOOTER_ACTIONS},this.props.renderActions?this.props.renderActions():this.renderActions()))}},{key:"renderActions",value:function(){var e,t=!this.props.canConfirm||this.props.canConfirm();this.props.noCancelButton||(e=c.createElement(s.AnchorButton,{key:"cancel",onClick:this.props.onCancel},"Cancel"));var n,r=c.createElement(s.AnchorButton,{key:"confirm",onClick:this.props.onConfirm,intent:s.Intent.PRIMARY,disabled:!t,icon:this.props.confirmIconName},this.props.confirmTitle||"OK");return this.props.confirmTooltip&&(r=c.createElement(s.Tooltip,{key:"confirmTooltip",content:this.props.confirmTooltip},r)),this.props.renderExtraActions&&(n=this.props.renderExtraActions()),n?[e].concat(Object(a.a)(n),[r]):[e,r]}}]),n}(c.Component)},410:function(module,__webpack_exports__,__webpack_require__){"use strict";var D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(16),D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7),D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(19),D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(20),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),react_redux__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(28),_actions__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(8),_selectors__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(10),_blueprintjs_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(5),_common_types__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(18);function mapStateToProps(e,t){return{view:t.view,baseUrl:_selectors__WEBPACK_IMPORTED_MODULE_8__.fc(e),baseDir:_selectors__WEBPACK_IMPORTED_MODULE_8__.kc(e),animationResources:_selectors__WEBPACK_IMPORTED_MODULE_8__.g(e),mplWebSocketUrl:_selectors__WEBPACK_IMPORTED_MODULE_8__.N(e)}}var AnimationView=function(_React$Component){Object(D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__.a)(AnimationView,_React$Component);var _super=Object(D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_4__.a)(AnimationView);function AnimationView(e){var t;return Object(D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,AnimationView),(t=_super.call(this,e)).divElement=void 0,t.state={},t.divElement=null,t.onRef=t.onRef.bind(Object(D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__.a)(t)),t}return Object(D_Projects_cate_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(AnimationView,[{key:"componentWillMount",value:function(){var e=this;this.props.view.data.innerHTML||this.state.loading||this.setState({loading:!0},(function(){e.props.dispatch(_actions__WEBPACK_IMPORTED_MODULE_7__.Ub(e.props.view.id,e.props.view.data.resourceId))}))}},{key:"onRef",value:function onRef(divElement){if(this.divElement=divElement,divElement&&this.props.view.data.innerHTML)for(var elements=divElement.getElementsByTagName("script"),i=0;i<elements.length;i++){var script=elements[i].innerHTML;try{eval("eval")(script)}catch(e){console.error(e)}}}},{key:"render",value:function(){if(!this.getAnimationResource())return react__WEBPACK_IMPORTED_MODULE_5__.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_9__.Card,null,"Animation not found.");var e=this.props.view.data,t=e.innerHTML,n=e.status;return t?react__WEBPACK_IMPORTED_MODULE_5__.createElement("div",{style:AnimationView.DIV_STYLE,dangerouslySetInnerHTML:{__html:t},ref:this.onRef}):Object(_common_types__WEBPACK_IMPORTED_MODULE_10__.d)(n)&&(n<200||n>=300)?react__WEBPACK_IMPORTED_MODULE_5__.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_9__.Card,null,"`Error loading animation (status $",e.status,"`)"):this.state.loading?react__WEBPACK_IMPORTED_MODULE_5__.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_9__.Card,null,"Loading animation..."):react__WEBPACK_IMPORTED_MODULE_5__.createElement(_blueprintjs_core__WEBPACK_IMPORTED_MODULE_9__.Card,null,"???")}},{key:"getAnimationResource",value:function(){var e=this.props.view.data;return this.props.animationResources.find((function(t){return t.id===e.resourceId}))}}]),AnimationView}(react__WEBPACK_IMPORTED_MODULE_5__.Component);AnimationView.DIV_STYLE={width:"100%",height:"100%",overflowX:"hidden",overflowY:"auto"},__webpack_exports__.a=Object(react_redux__WEBPACK_IMPORTED_MODULE_6__.b)(mapStateToProps)(AnimationView)},430:function(e,t,n){e.exports=n(774)},45:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"m",(function(){return r})),n.d(t,"k",(function(){return o})),n.d(t,"s",(function(){return i})),n.d(t,"o",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"r",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"p",(function(){return f})),n.d(t,"q",(function(){return m})),n.d(t,"l",(function(){return b})),n.d(t,"t",(function(){return v})),n.d(t,"u",(function(){return y})),n.d(t,"w",(function(){return g})),n.d(t,"v",(function(){return E})),n.d(t,"i",(function(){return O})),n.d(t,"h",(function(){return _})),n.d(t,"g",(function(){return C})),n.d(t,"j",(function(){return k})),n.d(t,"n",(function(){return w})),n.d(t,"x",(function(){return S}));var a="bool",r="int",o="float",i="str",l="numpy.ndarray",c="xarray.core.dataset.Dataset",s="xarray.core.dataarray.DataArray",u="pandas.core.frame.DataFrame",d="pandas.core.series.Series",p="cate.core.types.DatasetLike",h="cate.core.types.DataFrameLike",f="cate.core.types.PointLike",m="cate.core.types.PolygonLike",b="cate.core.types.GeometryLike",v="cate.core.types.TimeLike",y="cate.core.types.TimeRangeLike",g="cate.core.types.VarName",E="cate.core.types.VarNamesLike",O="cate.core.types.DimName",_="cate.core.types.DimNamesLike",C="cate.core.types.DictLike",k="cate.core.types.FileLike",w="cate.core.types.Literal";function S(e,t){if(!e||!t)return!1;if(e===t)return!0;switch(e){case"object":case"cate.core.types.Arbitrary":return!0;case w:return t===i;case a:return t===r||t===o;case r:return t===a;case o:return t===a||t===r;case l:return t===s;case u:return t===h||"geopandas.geodataframe.GeoDataFrame"===t||"cate.core.types.GeoDataFrame"===t;case h:return t===u||"geopandas.geodataframe.GeoDataFrame"===t||"cate.core.types.GeoDataFrame"===t||t===c||t===p;case"geopandas.geodataframe.GeoDataFrame":return"cate.core.types.GeoDataFrame"===t;case c:return t===p;case p:return t===c||t===u;case d:return"geopandas.geoseries.GeoSeries"===t;case g:case E:case O:case _:case C:case k:case v:case y:return t===i;case f:return t===i||"shapely.geometry.point.Point"===t;case m:return t===i||"shapely.geometry.polygon.Polygon"===t;case b:return t===i||t===f||t===m||"shapely.geometry.base.BaseGeometry"===t||"shapely.geometry.point.Point"===t||"shapely.geometry.multipoint.MultiPoint"===t||"shapely.geometry.linestring.LineString"===t||"shapely.geometry.multilinestring.MultiLineString"===t||"shapely.geometry.polygon.Polygon"===t||"shapely.geometry.multipolygon.multiPolygon"===t||"shapely.geometry.collection.GeometryCollection"===t}return!1}},450:function(e,t){},452:function(e,t){},46:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var a,r=n(15),o=n(16),i=n(19),l=n(20),c=n(2);!function(e){e[e.SINGLE=0]="SINGLE",e[e.MULTIPLE=1]="MULTIPLE"}(a||(a={}));var s=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"handleClick",value:function(e,t,n){if(2!==e.detail){if(this.props.onSelection){var r,o=d(this.props.selection);if(this.props.selection){var i=this.props.selectionMode||a.SINGLE,l=o.findIndex((function(e){return e===n}));l>=0?(r=o.slice()).splice(l,1):i===a.SINGLE?r=[n]:i===a.MULTIPLE&&(r=o.slice()).push(n)}else r=[n];this.props.onSelection(r,o)}this.props.onItemClick&&this.props.onItemClick(this.props.items[t],t)}}},{key:"handleDoubleClick",value:function(e,t){this.props.onItemDoubleClick&&this.props.onItemDoubleClick(this.props.items[t],t)}},{key:"render",value:function(){var e=this,t=this.props.items;if(!t)return null;for(var n=new Set(d(this.props.selection)),a=this.props.getItemKey||function(e,t){return t},r=this.props.renderItem,o=[],i=function(i){var l=t[i],s=a(l,i),u=r(l,i),d=n.has(s)?"cate-selected":null;o.push(c.createElement("li",{key:s,onClick:function(t){return e.handleClick(t,i,s)},onDoubleClick:function(t){return e.handleDoubleClick(t,i)},className:d,style:e.props.itemStyle},u))},l=0;l<t.length;l++)i(l);return c.createElement("ul",{className:"cate-list-box",style:this.props.style},o)}}]),n}(c.PureComponent),u=[];function d(e){return null===e||"undefined"===typeof e?u:e.constructor===Array?e:[e]}},48:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"m",(function(){return l})),n.d(t,"i",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"k",(function(){return f})),n.d(t,"j",(function(){return m})),n.d(t,"c",(function(){return b})),n.d(t,"f",(function(){return v})),n.d(t,"e",(function(){return y})),n.d(t,"l",(function(){return g}));var a=n(68),r=n(6),o=n(61),i=(n(18),{name:"All files",extensions:["*"]});function l(e,t,n){return""===t?Object(r.a)(Object(r.a)(Object(r.a)({},e),n),{},{status:"ready"}):function(e,t,n){if(!e.childNodes)return console.error("_updateFileNode: root node without child nodes"),e;n=n.status?n:Object(r.a)(Object(r.a)({},n),{},{status:"ready"});for(var o=Object(r.a)(Object(r.a)({},e),{},{childNodes:Object(a.a)(e.childNodes)}),i=o,l=function(o){if(!i.childNodes)return console.error("_updateFileNode: no child nodes at index ".concat(o,' in "').concat(t.join("/"),'"')),{v:e};var l=t[o],c=i.childNodes.findIndex((function(e){return 0===l.localeCompare(e.name)}));if(c<0)return console.error('_updateFileNode: invalid path component "'.concat(l,'" at index ').concat(o,' in "').concat(t.join("/"),'"')),{v:e};if(o===t.length-1)i.childNodes[c]=n;else{var s,u=i.childNodes[c];s=u.childNodes?Object(r.a)(Object(r.a)({},u),{},{childNodes:Object(a.a)(u.childNodes)}):Object(r.a)({},u),i.childNodes[c]=s,i=s}},c=0;c<t.length;c++){var s=l(c);if("object"===typeof s)return s.v}return o}(e,t.split("/"),n)}function c(e,t){if(""===t)return[];var n=t.split("/"),a=s(e.childNodes,n);return n.length===a.length?a:null}function s(e,t){for(var n=e,a=[],r=function(e){if(!n)return{v:a};var r=t[e],o=n.find((function(e){return 0===e.name.localeCompare(r)}));if(!o)return{v:a};a.push(o),n=o.childNodes},o=0;o<t.length;o++){var i=r(o);if("object"===typeof i)return i.v}return a}function u(e,t){if(""===t)return e;var n=c(e,t);return n?0===n.length?e:n[n.length-1]:null}function d(e){return e.isDir?"folder-close":"document"}function p(e,t){if(e.isDir){if(!t.isDir)return-1}else if(t.isDir)return 1;return e.name.localeCompare(t.name)}function h(e,t){var n=Object(o.c)(t),r=e.filter((function(e){return!(e===t||e===n||t.startsWith(e+"/"))}));return[].concat(Object(a.a)(r),[t])}function f(e,t){var n=Object(o.c)(t),r=e.filter((function(e){return!(e===t||e===n||e.startsWith(t+"/"))}));return""!==n?[].concat(Object(a.a)(r),[n]):r}function m(e,t,n){return t<e.length&&e[t]===n}function b(e,t){var n=new Set(t.extensions);return n.has("*")?e:e.filter((function(e){if(e.isDir)return!0;var t=Object(o.b)(e.name);return n.has(t)}))}function v(e,t,n,a){if(""===(e=e.trim()))return[];var r;if(n){var i="Windows"===a;r=[];for(var l=null,c="",s=0;s<e.length;s++){var u=e[s];'"'===u||"'"===u?null===l?(l=u,c=""):l===u?l=null:c+=u:" "===u?null===l?""!==c&&(r.push(c),c=""):c+=u:(i||"\\"!==u)&&(c+=u)}""!==c&&r.push(c)}else r=[e];return r.map((function(e){return function(e,t,n){var a=Object(o.d)(e,n);if(e=function(e,t){var n;if("Windows"===t){for(;e.indexOf("\\")>=0;)e=e.replace("\\","/");e.startsWith("//")&&(n="//",e=e.substring(2))}else for(;e.indexOf("\\")>=0;)e=e.replace("\\","");for(;e.startsWith("/");)e=e.substring(1);for(;e.endsWith("/");)e=e.substring(0,e.length-1);for(;e.indexOf("//")>0;)e=e.replace("//","/");return n?n+e:e}(e,n),a)return e;if(""===t)return e;return t+"/"+e}(e,t,a)}))}function y(e,t){return"Windows"===t?(e=e.split("/").join("\\"),Object(o.e)(e)?e:"\\"+e):"/"+e}function g(e,t){return 0===e.length?"":t?e.map((function(e){return function(e){if(e.indexOf(" ")>=0)return e.indexOf('"')>=0?"'".concat(e,"'"):'"'.concat(e,'"');return e}(Object(o.a)(e))})).join(" "):Object(o.a)(e[0])}},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(15),r=n(16),o=n(89),i=n(66),l=n(19),c=n(20),s=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"validateValue",value:function(e){if(Object(o.a)(Object(i.a)(n.prototype),"validateValue",this).call(this,e),!e&&!this.props.nullable)throw new Error("Text value expected.")}}]),n}(n(52).a)},52:function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return f}));var a=n(6),r=n(15),o=n(16),i=n(7),l=n(19),c=n(20),s=n(5),u=n(2),d=n(18);function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return f(e)?Object(d.c)(e.textValue)?e.textValue:"".concat(e.value):Object(d.e)(e)?e:Object(d.c)(e)?"".concat(e):t}var h=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e))._fieldValue=void 0,a._fieldValue=a.toFieldValue(e.value),a.props.uncontrolled&&(a.state=a._fieldValue),a.handleKeyPress=a.handleKeyPress.bind(Object(i.a)(a)),a.handleBlur=a.handleBlur.bind(Object(i.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(i.a)(a)),a}return Object(o.a)(n,[{key:"getValue",value:function(){return this._fieldValue.value}},{key:"setValue",value:function(e){this.setFieldValue(this.newFieldValueFromValue(e))}},{key:"setValueAndTextValue",value:function(e,t){this.setFieldValue(this.newFieldValueFromValueAndTextValue(e,t))}},{key:"getTextValue",value:function(){return this._fieldValue.textValue||""}},{key:"setTextValue",value:function(e){this.setFieldValue(this.newFieldValueFromTextValue(e))}},{key:"getError",value:function(){return this._fieldValue.error}},{key:"setError",value:function(e){this.setFieldValue(Object(a.a)(Object(a.a)({},this._fieldValue),{},{error:e}))}},{key:"componentWillReceiveProps",value:function(e){this._fieldValue=this.toFieldValue(e.value),this.props.uncontrolled&&this.setState(this._fieldValue)}},{key:"parseValue",value:function(e){return e&&""!==e?e:null}},{key:"formatValue",value:function(e){return Object(d.g)(e)?"":Object(d.e)(e)?e:"".concat(e)}},{key:"validateValue",value:function(e){this.props.validator&&this.props.validator(e)}},{key:"handleKeyPress",value:function(e){this.props.uncontrolled&&13===e.charCode&&this.props.onChange(this.state)}},{key:"handleBlur",value:function(){this.props.uncontrolled&&this.props.onChange(this.state)}},{key:"handleInputChange",value:function(e){var t=e.target.value;this.setTextValue(t||"")}},{key:"newFieldValueFromTextValue",value:function(e){var t,n=null;try{n=this.parseValue(e),this.validateValue(n)}catch(a){n=this._fieldValue?this._fieldValue.value:n,t=a}return{textValue:e,value:n,error:t}}},{key:"newFieldValueFromValue",value:function(e){if(f(e))return Object(a.a)({},e);var t,n;try{t=this.formatValue(e)}catch(r){t="",n=r}try{this.validateValue(e)}catch(r){n=r}return{textValue:t,value:e,error:n}}},{key:"newFieldValueFromValueAndTextValue",value:function(e,t){var n;try{this.validateValue(e)}catch(a){n=a}return{textValue:t,value:e,error:n}}},{key:"toFieldValue",value:function(e){return f(e)?e:Object(d.e)(e)?this.newFieldValueFromTextValue(e):this.newFieldValueFromValue(e)}},{key:"setFieldValue",value:function(e){this._fieldValue=e,this.props.uncontrolled?this.setState(e):this.props.onChange(e)}},{key:"render",value:function(){var e=this.getError(),t=n.ERROR_CLASS+" "+this.props.className,a=n.NOMINAL_CLASS+" "+this.props.className;return u.createElement(s.InputGroup,{value:this.getTextValue(),onChange:this.handleInputChange,onBlur:this.handleBlur,onKeyPress:this.handleKeyPress,type:this.props.type||"text",className:e?t:a,style:this.props.style,size:this.props.size,placeholder:this.props.placeholder,disabled:this.props.disabled})}}]),n}(u.PureComponent);function f(e){return Object(d.c)(e)&&(Object(d.b)(e.textValue)||Object(d.b)(e.value))}h.NOMINAL_CLASS="",h.ERROR_CLASS=s.Classes.INTENT_DANGER},53:function(e,t,n){"use strict";n.d(t,"k",(function(){return c})),n.d(t,"g",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return b})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return y})),n.d(t,"i",(function(){return g})),n.d(t,"j",(function(){return E})),n.d(t,"h",(function(){return O}));var a=n(33),r=n(23),o=n(18),i=n(60),l={small:24,medium:48,large:64};function c(e,t){var n={};if(Object(o.e)(e.stroke)||Object(o.d)(e.strokeOpacity)||Object(o.d)(e.strokeWidth)){var a=j("stroke",e,t,i.a),c=r.d.fromCssColorString(a),s=S("strokeWidth",e,t,i.a),u=S("strokeOpacity",e,t,i.a);u>=0&&u<1&&(c=r.d.fromAlpha(c,u)),n.stroke=c,n.strokeWidth=s}if(Object(o.e)(e.fill)||Object(o.d)(e.fillOpacity)){var d=j("fill",e,t,i.a),p=r.d.fromCssColorString(d),h=S("fillOpacity",e,t,i.a);h>=0&&h<1&&(p=r.d.fromAlpha(p,h)),n.fill=p}if(Object(o.e)(e.markerSymbol)||Object(o.e)(e.markerColor)||Object(o.e)(e.markerSize)){var f=j("markerSymbol",e,t,i.a),m=j("markerColor",e,t,i.a),b=j("markerSize",e,t,i.a),v=r.d.fromCssColorString(m),y=l[b]||48,g=new r.s;""===f?n.markerCanvas=g.fromColor(v,y):1===f.length?(n.markerSymbol=f,n.markerCanvas=g.fromText(f,v,y)):(n.markerSymbol=f,Promise.resolve(g.fromMakiIconId(f,v,y)).then((function(e){n.markerCanvas=e}))),n.markerSize=y,n.markerColor=v}return Object(o.e)(e.title)&&(n.title=e.title),Object(o.e)(e.description)&&(n.description=e.description),n}function s(e){return e?e.point?function(e){var t,n,a,i,l=r.p.now(),c=e.outlineColor,s=e.outlineWidth,u=e.pixelSize,d=e.color;if(Object(o.b)(u)){var p=u.getValue(l);t=p<=24?"small":p<=48?"medium":"large"}if(Object(o.b)(d)){var f=d.getValue(l);n=h(f.red,f.green,f.blue)}if(Object(o.b)(c)){var m=c.getValue(l);a=h(m.red,m.green,m.blue)}Object(o.b)(s)&&(i=s.getValue(l));return{markerSize:t,markerColor:n,markerSymbol:void 0,stroke:a,strokeWidth:i}}(e.point):e.billboard?function(e){var t,n,a,i=r.p.now(),l=e.image,c=e.scale,s=e.color;if(Object(o.b)(l)){var u=l.getValue(i);Object(o.e)(u)&&(t=u)}if(Object(o.b)(c)){var d=c.getValue(i);n=d<1?"small":d<2?"medium":"large"}if(Object(o.b)(s)){var p=s.getValue(i);a=h(p.red,p.green,p.blue)}return{markerSymbol:t,markerSize:n,markerColor:a}}(e.billboard):e.label?function(e){var t,n,a,i=r.p.now(),l=e.text&&e.text.getValue(i),c=e.scale&&e.scale.getValue(i),s=e.fillColor&&e.fillColor.getValue(i);Object(o.e)(l)&&(t=l);Object(o.d)(c)&&(n=c<1?"small":c<2?"medium":"large");Object(o.b)(s)&&(a=h(s.red,s.green,s.blue));return{title:t,markerSize:n,markerColor:a}}(e.label):e.polyline?function(e){var t,n,a,i=r.p.now(),l=e.width&&e.width.getValue(i),c=e.material&&e.material.getValue(i),s=c&&c.color;Object(o.b)(l)&&(a=l);Object(o.b)(s)&&(t=h(s.red,s.green,s.blue),n=s.alpha);return{stroke:t,strokeOpacity:n,strokeWidth:a}}(e.polyline):e.polygon?function(e){var t,n,a,l,c,s=r.p.now(),u=e.fill&&e.fill.getValue(s),d=e.material&&e.material.getValue(s),p=d&&d.color,f=e.outline&&e.outline.getValue(s),m=e.outlineColor&&e.outlineColor.getValue(s),b=e.outlineWidth&&e.outlineWidth.getValue(s);Object(o.b)(p)?(l=h(p.red,p.green,p.blue),c=p.alpha):(l=i.a.fill,c=i.a.fillOpacity);Object(o.a)(u)&&!Boolean(u)&&(c=0);Object(o.b)(m)&&(t=h(m.red,m.green,m.blue),n=m.alpha);Object(o.b)(f)&&!m&&(n=0);Object(o.b)(b)&&(a=b);return{fill:l,fillOpacity:c,stroke:t,strokeOpacity:n,strokeWidth:a}}(e.polygon):null:null}function u(e,t){var n,r=Object(a.a)(t);try{for(r.s();!(n=r.n()).done;){d(e,n.value)}}catch(o){r.e(o)}finally{r.f()}}function d(e,t){if(t.point){var n=t.point;Object(o.b)(e.markerColor)&&(n.color=new r.f(e.markerColor)),Object(o.d)(e.markerSize)&&(n.pixelSize=new r.f(e.markerSize/24*16))}else if(t.billboard){var a=t.billboard;Object(o.b)(e.markerCanvas)?a.image=new r.f(e.markerCanvas):(Object(o.b)(e.markerColor)&&(a.color=new r.f(e.markerColor)),Object(o.d)(e.markerSize)&&(a.scale=new r.f(e.markerSize/48)))}else if(t.label){var i=t.label;Object(o.b)(e.title)&&(i.text=new r.f(e.title)),Object(o.b)(e.markerColor)&&(i.fillColor=new r.f(e.markerColor)),Object(o.d)(e.markerSize)&&(i.scale=new r.f(e.markerSize/48))}else if(t.polyline){var l=t.polyline;Object(o.b)(e.stroke)&&(l.material=new r.e(e.stroke)),Object(o.d)(e.strokeWidth)&&(l.width=new r.f(e.strokeWidth))}else if(t.polygon){var c=t.polygon;Object(o.b)(e.fill)&&(c.material=new r.e(e.fill)),Object(o.b)(e.stroke)&&(c.outlineColor=new r.f(e.stroke)),Object(o.d)(e.strokeWidth)&&(c.outlineWidth=new r.f(e.strokeWidth))}}function p(e){if(e<=0)return"00";if(e>=1)return"ff";var t=Math.floor(255.9999*e);return t<=0?"00":t>=255?"ff":t<16?"0"+t.toString(16):t.toString(16)}function h(e,t,n){return"#"+p(e)+p(t)+p(n)}function f(e,t,n){if(!e)return null;if(e.position){var o=r.c.fromCartesian(e.position.getValue(r.p.now()));return m(e,t,n,{type:"Point",coordinates:[r.q.toDegrees(o.longitude),r.q.toDegrees(o.latitude)]})}if(e.polyline){var i,l=e.polyline.positions.getValue(r.p.now()),c=[],s=Object(a.a)(l);try{for(s.s();!(i=s.n()).done;){var u=i.value,d=r.c.fromCartesian(u);c.push([r.q.toDegrees(d.longitude),r.q.toDegrees(d.latitude)])}}catch(O){s.e(O)}finally{s.f()}return m(e,t,n,{type:"LineString",coordinates:c})}if(e.polygon){var p=e.polygon.hierarchy.getValue(r.p.now()),h=p.positions||p,f=p.holes;if(f&&f.length)throw new Error("entityToGeoJson() does not yet support polygons with holes");var b,v=[],y=Object(a.a)(h);try{for(y.s();!(b=y.n()).done;){var g=b.value,E=r.c.fromCartesian(g);v.push([r.q.toDegrees(E.longitude),r.q.toDegrees(E.latitude)])}}catch(O){y.e(O)}finally{y.f()}return v.push([v[0][0],v[0][1]]),m(e,t,n,{type:"Polygon",coordinates:[v]})}throw new Error("entityToGeoJson() called with unsupported entity: ".concat(e.toString()))}function m(e,t,n,a){return{type:"Feature",id:t=t||e.id.toString(),geometry:a,properties:n}}function b(e){if(e.polyline){var t=e.polyline.positions.getValue(r.p.now());return"LINESTRING (".concat(function(e){return _(e).join(", ")}(t),")")}if(e.polygon){var n=e.polygon.hierarchy.getValue(r.p.now()),o=n.positions,i=n.holes,l=_(o);l.length>2&&l.push(l[0]);var c=["(".concat(l.join(", "),")")];if(i&&i.length){var s,u=Object(a.a)(i);try{for(u.s();!(s=u.n()).done;){var d=_(s.value.positions);d.length>2&&d.push(d[0]),c.push("(".concat(d.join(", "),")"))}}catch(y){u.e(y)}finally{u.f()}}return"POLYGON (".concat(c.join(", "),")")}if(e.rectangle){var p=e.rectangle.coordinates.getValue(r.p.now()),h=k(p.west),f=k(p.south),m=k(p.east),b=k(p.north);return"POLYGON ((".concat(h," ").concat(f,", ").concat(m," ").concat(f,", ").concat(m," ").concat(b,", ").concat(h," ").concat(b,", ").concat(h," ").concat(f,"))")}if(e.position){var v=e.position.getValue(r.p.now());return"POINT (".concat(C(v),")")}throw new TypeError("can't understand geometry of selected entity")}function v(e,t,n){var a;if(t){var o=e.scene.globe.ellipsoid,i=e.camera.pickEllipsoid(t,o);if(i&&(a=o.cartesianToCartographic(i))&&n){a={longitude:Math.round(1e4*r.q.toDegrees(a.longitude))/1e4,latitude:Math.round(1e4*r.q.toDegrees(a.latitude))/1e4,height:a.height}}}return a}function y(e,t){var n;if(t){var a=e.canvas.getBoundingClientRect(),o=t.x,i=t.y;o>=a.left&&o<=a.right&&i>=a.top&&i<=a.bottom&&(n=new r.b(o-a.left,i-a.top))}return n}function g(e,t){if(t){var n=e.scene.pick(t);return n&&n.id}}function E(e,t){var n;if(null===t)n=r.D();else{var a="Geographic"===t.tilingScheme?new r.k:new r.B,o=t.ellipsoid&&new r.h(t.ellipsoid.x,t.ellipsoid.y,t.ellipsoid.z);n=new r.z({url:t.url,tilingScheme:a,ellipsoid:o,credit:t.credit,minimumLevel:t.minimumLevel,maximumLevel:t.maximumLevel})}if(e.imageryLayers.length>0){var i=e.imageryLayers.get(0);e.imageryLayers.remove(i)}e.imageryLayers.add(new r.m(n),0)}function O(e,t){for(var n=0;n<e.dataSources.length;n++){var a=e.dataSources.get(n).entities.getById(t);if(a)return a}return null}function _(e){return e.map((function(e){return C(e)}))}function C(e){var t=r.c.fromCartesian(e);return"".concat(k(t.longitude)," ").concat(k(t.latitude))}function k(e){return e*(180/Math.PI)}function w(e,t,n){var r,o=Object(a.a)(n);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i){var l=i[e];if(t(l))return l}}}catch(c){o.e(c)}finally{o.f()}}function S(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return w(e,o.d,n)}function j(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return w(e,o.e,n)}},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return l}));var a=n(33),r=n(18),o={title:"",description:"",markerSize:"medium",markerSymbol:"",markerColor:"#7e7e7e",stroke:"#555555",strokeOpacity:1,strokeWidth:2,fill:"#555555",fillOpacity:.6};function i(e){var t,n={title:e.title,description:e.description,markerSymbol:e["marker-symbol"],markerSize:e["marker-size"],markerColor:e["marker-color"],stroke:e.stroke,strokeOpacity:e["stroke-opacity"],strokeWidth:e["stroke-width"],fill:e.fill,fillOpacity:e["fill-opacity"]},o={},i=Object(a.a)(Object.getOwnPropertyNames(n));try{for(i.s();!(t=i.n()).done;){var l=t.value;Object(r.b)(n[l])&&(o[l]=n[l])}}catch(c){i.e(c)}finally{i.f()}return o}function l(e){var t,n={title:e.title,description:e.description,"marker-symbol":e.markerSymbol,"marker-size":e.markerSize,"marker-color":e.markerColor,stroke:e.stroke,"stroke-opacity":e.strokeOpacity,"stroke-width":e.strokeWidth,fill:e.fill,"fill-opacity":e.fillOpacity},o={},i=Object(a.a)(Object.getOwnPropertyNames(n));try{for(i.s();!(t=i.n()).done;){var l=t.value;Object(r.b)(n[l])&&(o[l]=n[l])}}catch(c){i.e(c)}finally{i.f()}return o}},61:function(e,t,n){"use strict";function a(e,t){return"Windows"===t&&o(e)||r(e)}function r(e){return e.startsWith("/")}function o(e){return i(e)||l(e)}function i(e){return e.startsWith("//")||e.startsWith("\\\\")}function l(e){return e.length>=2&&/^[a-z]+$/i.test(e[0])&&":"===e[1]&&(2===e.length||"/"===e[2]||"\\"===e[2])}function c(e,t,n){var a=p(e,n),r=p(t,n);return a.length>0&&""===a[a.length-1]&&(a=a.slice(0,a.length-1)),r.length>0&&""===r[0]&&(r=r.slice(1)),d(u(a.concat(r)),n)}function s(e,t,n){if(""===e||e===t)return"";for(var a,r=p(e,n),o=p(t,n),i=r.length,l=o.length,c=Math.max(i,l),s=Math.min(i,l),u=0;u<c;u++){if(u<i&&u<l)if(r[u]!==o[u]){s=u;break}}return s===c?"":(a=l>s?new Array(l-s).fill(".."):[],i>s&&(a=a.concat(r.slice(s))),a.join("/"))}function u(e,t){for(var n=Array(e.length),a=0,r=0;r<e.length;r++){var o=e[r];if("."===o);else if(".."===o)a--;else{if(a<0)return e;n[a]=o,a++}}return a<0?e:n.slice(0,a)}function d(e,t){return e.join("Windows"===t?"\\":"/")}function p(e,t){if("Windows"===t){if(i(e)||l(e)){var n=p(e.substring(2));return 0===n.length?n:[e.substr(0,2)+n[0]].concat(n.slice(1))}return e.split(/[/\\]/)}return e.split("/")}function h(e,t){var n=p(e,t);return n.length>0?d(n.slice(0,n.length-1),t):""}function f(e,t){var n=p(e,t);return n.length>0?n[n.length-1]:e}function m(e){var t=e.lastIndexOf(".");return t>0?e.substring(t+1):""}n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return s})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m}))},63:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return l}));n(15);var a="off",r="left",o="right",i="entity",l="layer"},67:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(5),r=null;function o(e,t){var n,o,i;r||(r=a.Toaster.create({className:"cate-toaster",position:a.Position.BOTTOM})),"info"===e.type?(n="info-sign",o=a.Intent.NONE,t=t||2500):"success"===e.type?(n="tick",o=a.Intent.SUCCESS,t=t||2500):"notification"===e.type?(n="notifications",o=a.Intent.PRIMARY,t=t||2500):"warning"===e.type?(n="warning-sign",o=a.Intent.WARNING,t=t||6e3):"error"===e.type?(n="error",o=a.Intent.DANGER,t=t||1e4):t=t||5e3,e.action&&(i={onClick:e.action.onClick,text:e.action.text,icon:e.action.icon,href:e.action.href,target:e.action.href?"_blank":void 0}),r.show({message:e.text,icon:n,intent:o,action:i,timeout:t})}},772:function(e,t,n){},773:function(e,t,n){},774:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(54),o=n(28),i=n(115),l=(n(439),n(398)),c=n(8),s=n(44),u=n(68),d=n(6),p=n(99),h=n.n(p),f=n(29),m=n(60),b=n(101),v=n(18),y=n(48),g=n(33);function E(e){return"layouts"in e}function O(e){return"viewIds"in e}function _(e,t){return function e(t,n,a){if(O(t))return t;if(a<n.length){f.a(E(t),"ViewSplitState expected");var r=t,o=n[a];return e(r.layouts[o],n,a+1)}return null}(e,t,0)}function C(e,t){if(O(e)){var n=e;return t&&t(n)?n:null}f.a(E(e),"ViewSplitState expected");var a=e;return C(a.layouts[0],t)||C(a.layouts[1],t)}function k(e,t){var n={before:[],after:[]};return function e(t,n,a){var r=t.viewIds;if(r)for(var o=null,i=0;i<r.length;i++){var l=r[i];if(l!==n){var c=i<r.length+1?r[i+1]:null;null!==c&&c===n||a.after.push(l),null!==o&&o===n||a.before.push(l)}o=l}var s=t.layouts;if(s){var u,d=Object(g.a)(s);try{for(d.s();!(u=d.n()).done;){var p=u.value;e(p,n,a)}}catch(h){d.e(h)}finally{d.f()}}}(e,t,n),n}function w(e,t,n,a){return function e(t,n,a,r){if(E(t)){var o=t,i=o.layouts[0],l=o.layouts[1],c=e(i,n,a,r),s=e(l,n,a,r);return i===c&&l===s?o:null===c?(f.a(s),s):null===s?c:Object(d.a)(Object(d.a)({},o),{},{layouts:[c,s]})}var u=t,p=u.viewIds,h=u.selectedViewId,m=p.findIndex((function(e){return e===n}));if(m>=0){if((p=p.slice()).splice(m,1),0===p.length)return null;if(h===n&&p.length){var b=m<p.length?m:p.length-1;h=p[b]}}var v=p.findIndex((function(e){return e===r}));if(v>=0&&(p="before"===a?p.slice(0,v).concat([n].concat(p.slice(v))):p.slice(0,v+1).concat([n].concat(p.slice(v+1))),h=n),p!==u.viewIds)return{viewIds:p,selectedViewId:h};return t}(e,t,n,a)}function S(e,t,n){return function e(t,n,a){if(E(t)){var r,o=t,i=o.layouts[0],l=o.layouts[1],c=e(i,n,a);if(r=i===c?e(l,n,a):l,i===c&&l===r)return o;var s=[c,r];return Object(d.a)(Object(d.a)({},o),{},{layouts:s})}var u=t,p=u.viewIds,h=p.findIndex((function(e){return e===n}));if(h<0)return u;var f=h+1;return{viewIds:p.slice(0,f).concat([a].concat(p.slice(f))),selectedViewId:a}}(e,t,n)}function j(e,t){return function e(t,n){if(E(t)){var a=t,r=a.layouts[0],o=[e(r,n),a.layouts[1]];return Object(d.a)(Object(d.a)({},a),{},{layouts:o})}return{viewIds:t.viewIds.concat([n]),selectedViewId:n}}(e,t)}function I(e,t,n,a){return function e(t,n,a,r,o){if(f.a(o<=n.length,"illegal path index"),o<n.length){f.a(E(t),"ViewSplitState expected");var i,l=t,c=n.charCodeAt(o)-48,s=l.layouts[c],u=e(s,n,a,r,o+1);return i=0===c?[u,l.layouts[1]]:[l.layouts[0],u],Object(d.a)(Object(d.a)({},l),{},{layouts:i})}f.a(O(t),"ViewPanelState expected");var p=t,h=p.viewIds;f.a(h.length>1,"ViewPanelState must have more than one view to be split");var m=p.selectedViewId,b=h.findIndex((function(e){return e===m}));b===h.length-1&&(b-=1),f.a(b>=0);var v=h.slice(0,b+1),y=h.slice(b+1);return{dir:a,pos:r,layouts:[{viewIds:v,selectedViewId:v[v.length-1]},{viewIds:y,selectedViewId:y[0]}]}}(e,t,n,a,0)}function P(e,t,n){return function e(t,n,a,r){if(f.a(r<=n.length,"illegal path index"),r<n.length){f.a(E(t),"ViewSplitState expected");var o,i=t,l=n.charCodeAt(r)-48,c=i.layouts[l],s=e(c,n,a,r+1);return o=0===l?[s,i.layouts[1]]:[i.layouts[0],s],Object(d.a)(Object(d.a)({},i),{},{layouts:o})}f.a(E(t),"ViewSplitState expected");var u=t;return Object(d.a)(Object(d.a)({},u),{},{pos:u.pos+a})}(e,t,n,0)}function D(e,t,n){return function e(t,n,a,r){if(f.a(r<=n.length,"illegal path index"),r<n.length){f.a(E(t),"ViewSplitState expected");var o,i=t,l=n.charCodeAt(r)-48,c=i.layouts[l],s=e(c,n,a,r+1);return c===s?i:(o=0===l?[s,i.layouts[1]]:[i.layouts[0],s],Object(d.a)(Object(d.a)({},i),{},{layouts:o}))}f.a(O(t),"ViewPanelState expected");var u=t,p=u.viewIds;return a===u.selectedViewId?u:(f.a(p.indexOf(a)>=0,"viewId not found"),{viewIds:p,selectedViewId:a})}(e,t,n,0)}function L(e,t,n){return R(e,t,n,0)}function T(e,t){for(;;){var n=e.findIndex((function(e){return e.id===t}));if(!(n>=0))break;e=e.slice(0,n).concat(e.slice(n+1))}return e}function A(e,t){if(E(e)){var n=e,a=n.layouts[0],r=n.layouts[1],o=A(a,t),i=A(r,t);if(a!==o||r!==i)return Object(d.a)(Object(d.a)({},n),{},{layouts:[o,i]})}else{var l=e;if(t!==l.selectedViewId){var c=l.viewIds;if(c.findIndex((function(e){return e===t}))>=0)return{viewIds:c,selectedViewId:t}}}return e}function R(e,t,n,a){if(f.a(a<=t.length,"illegal path index"),a<t.length){f.a(E(e),"ViewSplitState expected");var r,o=e,i=t.charCodeAt(a)-48,l=o.layouts[i],c=R(l,t,n,a+1);return l===c?o:O(c)&&0===c.viewIds.length?0===i?o.layouts[1]:o.layouts[0]:(r=0===i?[c,o.layouts[1]]:[o.layouts[0],c],Object(d.a)(Object(d.a)({},o),{},{layouts:r}))}f.a(O(e),"ViewPanelState expected");var s=e;if(n){var u=s.viewIds,p=u.indexOf(n);if(p<0)return s;u=u.slice(0,p).concat(u.slice(p+1));var h=s.selectedViewId;return h===n&&(h=p>0?u[p-1]:p<u.length?u[p]:null),{viewIds:u,selectedViewId:h}}return{viewIds:[],selectedViewId:null}}var N=n(161),x={expires:365};function M(e){N.set("cookieConsentObtained","1",x),N.set("trackingConsentObtained",e?"1":"0",x)}var V=n(63),B=n(25),W={dataStores:null,operations:null,workspace:null,colorMaps:null,baseMaps:B.b,fsRootNode:{name:"",isDir:!0,lastModified:"",size:0},workspaceNames:null,hasWebGL:Object(B.R)()},F=Object(B.fb)(),U={selectedWorkflowStepId:null,selectedWorkspaceResourceName:null,selectedVariableName:null,dialogs:{},directorySelectDialog:{onClose:function(){}},fileOpenDialog:{onClose:function(){}},fileSaveDialog:{onClose:function(){}},fileBrowseDialog:{onClose:function(){}},messageBox:{},selectedCtxOperationName:null,views:[F],viewLayout:{viewIds:[F.id],selectedViewId:F.id},activeViewId:F.id,newPlacemarkToolType:"NoTool",entityUpdateCount:0},G={reopenLastWorkspace:!1,lastWorkspacePath:null,autoUpdateSoftware:!0,autoShowNewFigures:!0,offlineMode:!1,showSelectedVariableLayer:!0,savedLayers:{},selectedDataStoreId:null,selectedDataSourceId:null,dataSourceFilterExpr:"",selectedOperationName:null,operationFilterTags:[],operationFilterExpr:"",dataSourceListHeight:200,showDataSourceDetails:!0,resourceListHeight:100,showResourceDetails:!0,workflowStepListHeight:100,showWorkflowStepDetails:!0,operationListHeight:200,showOperationDetails:!0,variableListHeight:200,showVariableDetails:!0,layerListHeight:160,showLayerDetails:!0,lastBaseMapId:B.e,panelContainerUndockedMode:!1,leftPanelContainerLayout:{horPos:300,verPos:400},rightPanelContainerLayout:{horPos:300,verPos:400},selectedLeftTopPanelId:"dataSources",selectedLeftBottomPanelId:"operations",selectedRightTopPanelId:"workspace",selectedRightBottomPanelId:"variables",placemarkCollection:{type:"FeatureCollection",features:[]},selectedPlacemarkId:null,placemarkListHeight:160,showPlacemarkDetails:!0,defaultPlacemarkStyle:Object(d.a)({},B.g.style),workspacePanelMode:"steps",showDataStoreDescription:!1,showDataStoreNotices:!0,showDataSourceIDs:!0,showAllDataSources:!1,showLayerTextOverlay:!0,debugWorldView:!1,styleContext:V.d,backendConfig:{dataStoresPath:null,useWorkspaceImageryCache:!1,resourceNamePattern:"res_{index}",proxyUrl:null},cookieConsentObtained:"1"===N.get("cookieConsentObtained"),trackingConsentObtained:"1"===N.get("trackingConsentObtained")},Y={webAPIServiceURL:"http://localhost:9090",webAPIStatus:null,webAPIServiceInfo:null,webAPIClient:null,tasks:{}},H={globeMousePosition:null,globeViewPosition:null,positionData:null},K=function(e,t,n){var a=t.payload.dataStoreId,r=e.dataStores.findIndex((function(e){return e.id===a}));if(r<0)throw Error("illegal data store ID: "+a);var o=e.dataStores[r],i=Object(d.a)(Object(d.a)({},o),{},{dataSources:n(o)}),l=Object(u.a)(e.dataStores);return l[r]=i,Object(d.a)(Object(d.a)({},e),{},{dataStores:l})};function z(e,t,n){var a,r=t.id,o=function(e,t){return e.concat([t])}(e.views,t),i=e.viewLayout;return n&&(a=S(i,n,r)),a&&a!==i||(a=j(i,r)),Object(d.a)(Object(d.a)({},e),{},{viewLayout:a,views:o,activeViewId:r})}var q=function(e,t,n){for(var a=null,r=0;r<e.length;r++){var o=e[r],i=J(o,t,n);o!==i&&(a||(a=e.slice(0,r))),a&&i&&a.push(i)}return a||e},J=function(e,t,n){var a=e.id===n;switch(t.type){case c.A:if("world"===e.type){var r=X(e.data.layers,t,a);if(r!==e.data.layers)return Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{layers:r})})}else if("figure"===e.type){var o=Object(B.B)(t.payload.resName);if(e.title===o)return o=Object(B.B)(t.payload.newResName),Object(d.a)(Object(d.a)({},e),{},{title:o})}break;case c.fb:var i=t.payload.viewId;if(e.id===i&&"world"===e.type){var l=X(e.data.layers,t,a);if(l!==e.data.layers)return Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{layers:l})})}break;case c.N:if("world"===e.type){var s=X(e.data.layers,t,a);if(s!==e.data.layers)return Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{layers:s})})}break;case c.L:if(t.payload.viewId===e.id&&"world"===e.type){var u=t.payload.selectedLayerId;return Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{selectedLayerId:u})})}break;case c.K:if(t.payload.viewId===e.id&&"world"===e.type){var p=t.payload.selectedEntityId;return Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{selectedEntityId:p})})}break;case c.O:if(t.payload.viewId===e.id){f.a("world"===e.type);var h=t.payload.viewMode;return Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{viewMode:h})})}break;case c.I:var m=t.payload,v=m.viewId,y=m.layerSplitPosition;if(v===e.id)return f.a("world"===e.type),Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{layerSplitPosition:y})});break;case c.D:if(t.payload.viewId===e.id){f.a("world"===e.type);var g=t.payload.baseMapId;return Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{baseMapId:g})})}break;case c.J:if(t.payload.viewId===e.id){f.a("world"===e.type);var E=t.payload.projectionCode;return Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{projectionCode:E})})}break;case c.b:if(t.payload.viewId===e.id){f.a("world"===e.type);var O=t.payload.layer,_=t.payload.selectLayer?O.id:e.data.selectedLayerId,C=e.data.layers.concat([O]);return Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{layers:C,selectedLayerId:_})})}break;case c.x:if(t.payload.viewId===e.id){f.a("world"===e.type);var k=t.payload.id,w=e.data.layers.slice(),S=e.data.selectedLayerId;k===S&&(S=null);var j=w.findIndex((function(e){return e.id===k}));if(j>=0)return w.splice(j,1),Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{layers:w,selectedLayerId:S})})}break;case c.p:if(t.payload.viewId===e.id){f.a("world"===e.type);var I=t.payload.id,P=e.data.layers.slice(),D=P.findIndex((function(e){return e.id===I}));if(f.a(D>=0,"layerIndex >= 0"),D>0){var L=P[D-1];return P[D-1]=P[D],P[D]=L,Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{layers:P})})}}break;case c.o:if(t.payload.viewId===e.id){f.a("world"===e.type);var T=t.payload.id,A=e.data.layers.slice(),R=A.findIndex((function(e){return e.id===T}));if(f.a(R>=0,"layerIndex >= 0"),R>=0&&R<A.length-1){var N=A[R+1];return A[R+1]=A[R],A[R]=N,Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{layers:A})})}}break;case c.jb:if(t.payload.viewId===e.id){f.a("world"===e.type);var x=t.payload.layer,M=e.data.layers.slice(),V=M.findIndex((function(e){return e.id===x.id}));return f.a(V>=0,"layerIndex >= 0"),M[V]=Object(b.a)(M[V],x),Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{layers:M})})}break;case c.kb:if(t.payload.viewId===e.id){f.a("world"===e.type);var W=t.payload,F=W.layerId,U=W.style,G=e.data.layers.slice(),Y=G.findIndex((function(e){return e.id===F}));f.a(Y>=0,"layerIndex >= 0");var H=G[Y];return G[Y]=Object(d.a)(Object(d.a)({},H),{},{style:Object(d.a)(Object(d.a)({},H.style),U)}),Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{layers:G})})}break;case c.rb:if(t.payload.viewId===e.id){f.a("table"===e.type);var K=Object(d.a)(Object(d.a)({},e.data),t.payload);return Object(d.a)(Object(d.a)({},e),{},{data:K})}break;case c.Y:if(t.payload.viewId===e.id){f.a("animation"===e.type);var z=Object(d.a)(Object(d.a)({},e.data),t.payload);return Object(d.a)(Object(d.a)({},e),{},{data:z})}break;default:if("world"===e.type){var q=X(e.data.layers,t,a);if(q!==e.data.layers)return Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},{layers:q})})}}return e},X=function(e,t,n){for(var a,r=0;r<e.length;r++){var o=e[r],i=Z(o,t,n);o!==i&&(a||(a=e.slice(0,r))),a&&i&&a.push(i)}return a||e},Z=function(e,t,n){switch(t.type){case c.A:var a=t.payload.resName,r=t.payload.newResName;if(e.resName===a)return Object(d.a)(Object(d.a)({},e),{},{resName:r});break;case c.fb:var o=t.payload,i=o.layerId,l=o.entityId,u=o.style;if(e.id===i&&Object(B.ab)(e)){var p=e.entityStyles,f=p&&p[l],m=Object(d.a)(Object(d.a)({},f),u);if(!h()(f,m))return Object(d.a)(Object(d.a)({},e),{},{entityStyles:Object(d.a)(Object(d.a)({},p),{},Object(s.a)({},l,m))})}break;case c.N:if(e.id===B.a){var b=t.payload.showSelectedVariableLayer;return Object(d.a)(Object(d.a)({},e),{},{visible:b})}break;case c.M:if(e.id===B.a&&n){var v=t.payload.resource,y=t.payload.selectedVariable,g=t.payload.savedLayers;return Object(B.gb)(e,v,y,g)}break;case c.H:var E=t.payload,O=E.layerId,_=E.splitMode;if(e.id===O&&Object(B.V)(e))return Object(d.a)(Object(d.a)({},e),{},{splitMode:_})}return e},Q=function(e,t,n){var a=e.placemarkCollection.features.slice(),r=a.findIndex((function(e){return e.id===t})),o=r>=0&&a[r];f.a(o);var i=o&&o.properties,l=Object(d.a)(Object(d.a)({},i),n),c=Object(d.a)(Object(d.a)({},o),{},{properties:l});r>=0?a[r]=c:a.push(c);var s=Object(d.a)(Object(d.a)({},e.placemarkCollection),{},{features:a});return Object(d.a)(Object(d.a)({},e),{},{placemarkCollection:s})},$=function(e,t,n){var a=e.placemarkCollection.features.slice(),r=a.findIndex((function(e){return e.id===t})),o=r>=0&&a[r];f.a(o);var i=o&&o.geometry,l=Object(d.a)(Object(d.a)({},i),n),c=Object(d.a)(Object(d.a)({},o),{},{geometry:l});r>=0?a[r]=c:a.push(c);var s=Object(d.a)(Object(d.a)({},e.placemarkCollection),{},{features:a});return Object(d.a)(Object(d.a)({},e),{},{placemarkCollection:s})},ee=Object(i.c)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.tb:var n=t.payload.workspaceNames||null;return Object(d.a)(Object(d.a)({},e),{},{workspaceNames:n});case c.mb:var a=t.payload.operations;return Object(d.a)(Object(d.a)({},e),{},{operations:a});case c.E:var r=t.payload.workspace;return Object(d.a)(Object(d.a)({},e),{},{workspace:r});case c.gb:var o=t.payload,i=o.path,l=o.updatedFileNode,s=Object(y.m)(e.fsRootNode,i,l);return Object(d.a)(Object(d.a)({},e),{},{fsRootNode:s});case c.Z:var p=t.payload.colorMaps;return Object(d.a)(Object(d.a)({},e),{},{colorMaps:p});case c.db:var h=t.payload.dataStores.slice();return Object(d.a)(Object(d.a)({},e),{},{dataStores:h});case c.bb:return K(e,t,(function(){return t.payload.dataSources.slice()}));case c.cb:return K(e,t,(function(e){var n=Object(u.a)(e.dataSources),a=t.payload,r=a.dataSourceId,o=a.metaInfo,i=a.metaInfoStatus,l=n.findIndex((function(e){return e.id===r}));if(l<0)throw Error("illegal data source ID: "+r);var c=n[l],s=Object(d.a)(Object(d.a)({},c),{},{metaInfo:o,metaInfoStatus:i}),p=s.capabilities;return!p&&o&&"ok"===i&&(p=Object(B.p)(s)),p!==s.capabilities&&(s=Object(d.a)(Object(d.a)({},s),{},{capabilities:p})),n[l]=s,n}))}return e},control:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.A:var n=t.payload.resName,a=t.payload.newResName,r=e.selectedWorkspaceResourceName;r===n&&(r=a);var o=q(e.views,t,e.activeViewId);return r!==e.selectedWorkspaceResourceName||o!==e.views?Object(d.a)(Object(d.a)({},e),{},{selectedWorkspaceResourceName:r,views:o}):e;case c.fb:var i=q(e.views,t,e.activeViewId);return i!==e.views?Object(d.a)(Object(d.a)({},e),{},{views:i}):e;case c.bb:var l=t.payload.dataSources,u=l&&l.length?l[0].id:null;return Object(d.a)(Object(d.a)({},e),{},{selectedDataSourceId:u});case c.mb:var p=t.payload.operations,h=p&&p.length?p[0].name:null;return Object(d.a)(Object(d.a)({},e),{},{selectedOperationName:h});case c.M:var f=t.payload.selectedVariable,m=f?f.name:null,v=e.views,y=q(e.views,t,e.activeViewId);return y!==v&&(v=y),Object(d.a)(Object(d.a)({},e),{},{selectedVariableName:m,views:v});case c.ab:return Object(d.a)(Object(d.a)({},e),t.payload);case c.c:return Object(d.a)(Object(d.a)({},e),{},{newPlacemarkToolType:"NoTool"});case c.a:var g=t.payload.newPlacemarkToolType;return g===e.newPlacemarkToolType&&(g="NoTool"),Object(d.a)(Object(d.a)({},e),{},{newPlacemarkToolType:g});case c.eb:var E=Object(b.b)(e.dialogs,t.payload.dialogId,t.payload.dialogState);return Object(d.a)(Object(d.a)({},e),{},{dialogs:E});case c.e:var O=Object(B.fb)(t.payload.baseMapId);return z(e,O,t.payload.placeAfterViewId);case c.V:var k=t.payload,S=k.resource,j=k.placeAfterViewId,R=e.views.find((function(e){return"figure"===e.type&&S.id===e.data.resourceId}));if(R){var N=A(e.viewLayout,R.id);return Object(d.a)(Object(d.a)({},e),{},{viewLayout:N})}var x=Object(B.cb)(S);return z(e,x,j);case c.U:var M=t.payload,V=M.resource,W=M.placeAfterViewId,F=e.views.find((function(e){return"animation"===e.type&&V.id===e.data.resourceId}));if(F){var G=A(e.viewLayout,F.id);return Object(d.a)(Object(d.a)({},e),{},{viewLayout:G})}var Y=Object(B.bb)(V);return z(e,Y,W);case c.W:var H=t.payload,K=H.resName,J=H.varName,X=H.placeAfterViewId,Z=e.views.find((function(e){return"table"===e.type&&e.data.resName===K&&e.data.varName===J}));if(Z){var Q=A(e.viewLayout,Z.id);return Object(d.a)(Object(d.a)({},e),{},{viewLayout:Q})}var $=Object(B.db)(K,J);return z(e,$,X);case c.d:var ee=t.payload,te=ee.placeAfterViewId,ne=ee.resName,ae=ee.varName,re=Object(B.db)(ne,ae);return z(e,re,te);case c.C:var oe=t.payload,ie=oe.viewPath,le=oe.viewId,ce=D(e.viewLayout,ie,le);return Object(d.a)(Object(d.a)({},e),{},{viewLayout:ce,activeViewId:le});case c.q:var se=t.payload,ue=se.sourceViewId,de=se.placement,pe=se.targetViewId,he=w(e.viewLayout,ue,de,pe),fe=e.activeViewId;if(fe){var me=function(e){return e.viewIds.indexOf(fe)>=0},be=C(he,me);be&&be.selectedViewId!==fe&&(fe=be.selectedViewId)}return Object(d.a)(Object(d.a)({},e),{},{viewLayout:he,activeViewId:fe});case c.l:var ve=t.payload.viewPath,ye=t.payload.viewId,ge=T(e.views,ye),Ee=L(e.viewLayout,ve,ye),Oe=e.activeViewId;if(Oe===ye){Oe=null;var _e=_(Ee,ve);(_e&&_e.selectedViewId||(_e=C(Ee,(function(e){return!!e.selectedViewId}))))&&(Oe=_e.selectedViewId)}return Object(d.a)(Object(d.a)({},e),{},{viewLayout:Ee,views:ge,activeViewId:Oe});case c.X:var Ce=t.payload.viewPath,ke=t.payload.dir,we=t.payload.pos,Se=I(e.viewLayout,Ce,ke,we);return Object(d.a)(Object(d.a)({},e),{},{viewLayout:Se});case c.f:var je=t.payload.viewPath,Ie=t.payload.delta,Pe=P(e.viewLayout,je,Ie);return Object(d.a)(Object(d.a)({},e),{},{viewLayout:Pe});case c.m:var De=e.entityUpdateCount+1;return Object(d.a)(Object(d.a)({},e),{},{entityUpdateCount:De});case c.n:var Le=t.payload,Te=Le.selectedCtxOperationName,Ae=Le.inputAssignments,Re=e.dialogs.newCtxOperationStepDialog;return Re=Object(d.a)(Object(d.a)({},Re),{},{isOpen:!0,inputAssignments:Ae}),Object(d.a)(Object(d.a)({},e),{},{selectedCtxOperationName:Te,dialogs:Object(d.a)(Object(d.a)({},e.dialogs),{},Object(s.a)({},"newCtxOperationStepDialog",Re))});case c.lb:return Object(d.a)(Object(d.a)({},e),t.payload);case c.w:return Object(d.a)(Object(d.a)({},e),{},{messageBox:Object(d.a)(Object(d.a)(Object(d.a)({},e.messageBox),t.payload),{},{isOpen:!0})});case c.k:return Object(d.a)(Object(d.a)({},e),{},{messageBox:Object(d.a)(Object(d.a)(Object(d.a)({},e.messageBox),t.payload),{},{isOpen:!1})});case c.s:return Object(d.a)(Object(d.a)({},e),{},{directorySelectDialog:Object(d.a)(Object(d.a)(Object(d.a)({},e.directorySelectDialog),t.payload),{},{isOpen:!0})});case c.g:return Object(d.a)(Object(d.a)({},e),{},{directorySelectDialog:Object(d.a)(Object(d.a)(Object(d.a)({},e.directorySelectDialog),t.payload),{},{isOpen:!1})});case c.u:return Object(d.a)(Object(d.a)({},e),{},{fileOpenDialog:Object(d.a)(Object(d.a)(Object(d.a)({},e.fileOpenDialog),t.payload),{},{isOpen:!0})});case c.i:return Object(d.a)(Object(d.a)({},e),{},{fileOpenDialog:Object(d.a)(Object(d.a)(Object(d.a)({},e.fileOpenDialog),t.payload),{},{isOpen:!1})});case c.v:return Object(d.a)(Object(d.a)({},e),{},{fileSaveDialog:Object(d.a)(Object(d.a)(Object(d.a)({},e.fileSaveDialog),t.payload),{},{isOpen:!0})});case c.j:return Object(d.a)(Object(d.a)({},e),{},{fileSaveDialog:Object(d.a)(Object(d.a)(Object(d.a)({},e.fileSaveDialog),t.payload),{},{isOpen:!1})});case c.t:return Object(d.a)(Object(d.a)({},e),{},{fileBrowseDialog:Object(d.a)(Object(d.a)(Object(d.a)({},e.fileBrowseDialog),t.payload),{},{isOpen:!0})});case c.h:return Object(d.a)(Object(d.a)({},e),{},{fileBrowseDialog:Object(d.a)(Object(d.a)(Object(d.a)({},e.fileBrowseDialog),t.payload),{},{isOpen:!1})});default:var Ne=q(e.views,t,e.activeViewId);if(Ne!==e.views)return Object(d.a)(Object(d.a)({},e),{},{views:Ne})}return e},session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.K:var n=t.payload.selectedEntityId||null,a=null;if(Object(v.e)(n)&&n.startsWith(B.i)&&(a=n),a!==e.selectedPlacemarkId)return Object(d.a)(Object(d.a)({},e),{},{selectedPlacemarkId:a});break;case c.ib:return Object(d.a)(Object(d.a)({},e),t.payload.session);case c.qb:case c.N:return Object(d.a)(Object(d.a)({},e),t.payload);case c.D:return Object(d.a)(Object(d.a)({},e),{},{lastBaseMapId:t.payload.baseMapId});case c.B:var r=t.payload,o=r.key,i=r.layer,l=Object(b.a)(e.savedLayers,Object(s.a)({},o,i));return Object(d.a)(Object(d.a)({},e),{},{savedLayers:l});case c.c:var u=t.payload.placemark,p=e.placemarkCollection.features,h=Object(d.a)({},u.properties),f=Object(B.L)(u,e.placemarkCollection),y=f.title,g=f.index;y&&(h=Object(d.a)(Object(d.a)({},h),{},{title:y}),"Point"===u.geometry.type&&(h["marker-symbol"]=g.toString(16).slice(-1)),u=Object(d.a)(Object(d.a)({},u),{},{properties:h})),p=p.concat([u]);var E=Object(d.a)(Object(d.a)({},e.placemarkCollection),{},{features:p});return Object(d.a)(Object(d.a)({},e),{},{placemarkCollection:E,selectedPlacemarkId:u.id});case c.y:var O=t.payload.placemarkId,_=e.placemarkCollection.features,C=_.findIndex((function(e){return e.id===O}));if(C>=0){(_=_.slice()).splice(C,1);var k=null;C<_.length?k=_[C].id:_.length>0&&(k=_[_.length-1].id);var w=Object(d.a)(Object(d.a)({},e.placemarkCollection),{},{features:_});return Object(d.a)(Object(d.a)({},e),{},{placemarkCollection:w,selectedPlacemarkId:k})}break;case c.nb:var S=t.payload,j=S.placemarkId,I=S.geometry;return $(e,j,I);case c.ob:var P=t.payload,D=P.placemarkId,L=P.properties;return Q(e,D,L);case c.pb:var T=t.payload,A=T.placemarkId,R=T.style,N=Object(m.b)(R),x=Object(d.a)(Object(d.a)({},e.defaultPlacemarkStyle),R);return Object(d.a)(Object(d.a)({},Q(e,A,N)),{},{defaultPlacemarkStyle:x});case c.r:var V=t.payload.trackingConsentObtained;return M(V),Object(d.a)(Object(d.a)({},e),{},{cookieConsentObtained:!0,trackingConsentObtained:V})}return e},communication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.S:var n=t.payload.webAPIServiceURL;return Object(d.a)(Object(d.a)({},e),{},{webAPIServiceURL:n});case c.T:var a=t.payload.webAPIStatus;return Object(d.a)(Object(d.a)({},e),{},{webAPIStatus:a});case c.Q:var r=t.payload.webAPIClient;return Object(d.a)(Object(d.a)({},e),{},{webAPIClient:r,webAPIStatus:"open"});case c.R:var o=t.payload.webAPIServiceInfo;return Object(d.a)(Object(d.a)({},e),{},{webAPIServiceInfo:Object(d.a)(Object(d.a)({},e.webAPIServiceInfo),o)});case c.P:var i=t.payload.webAPIAutoStopInfo;return Object(d.a)(Object(d.a)({},e),{},{webAPIServiceInfo:Object(d.a)(Object(d.a)({},e.webAPIServiceInfo),{},{autoStopInfo:i})});case c.hb:return Object(d.a)(Object(d.a)({},e),{},{hubStatus:t.payload});case c.sb:return Object(d.a)(Object(d.a)({},e),{},{tasks:Object(b.b)(e.tasks,t.payload.jobId,t.payload.taskState)});case c.z:var l=Object(d.a)({},e.tasks);return delete l[t.payload.jobId],Object(d.a)(Object(d.a)({},e),{},{tasks:l})}return e},location:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;if(t.type===c.F){var n=t.payload.position;if(e.globeMousePosition!==n)return Object(d.a)(Object(d.a)({},e),{},{globeMousePosition:n})}else if(t.type===c.G){var a=t.payload.position,r=t.payload.positionData;if(e.globeViewPosition!==a||e.positionData!==r)return Object(d.a)(Object(d.a)({},e),{},{globeViewPosition:a,positionData:r})}return e}}),te=n(65),ne=n(785),ae=n(781),re=n(15),oe=n(16),ie=n(7),le=n(19),ce=n(20),se=n(787),ue=n(5);var de=Object(o.b)((function(e){return{cookieConsentObtained:e.session.cookieConsentObtained,trackingConsentObtained:e.session.trackingConsentObtained}}))((function(e){var t=e.cookieConsentObtained,n=e.trackingConsentObtained,r=e.dispatch,o=a.useState(!1),i=Object(te.a)(o,2),l=i[0],s=i[1],u=a.useState(n),d=Object(te.a)(u,2),p=d[0],h=d[1];if(t)return null;return a.createElement(ue.Drawer,{title:"Data Protection Notice",icon:"info-sign",position:ue.Position.BOTTOM,isOpen:!0,isCloseButtonShown:!1,canOutsideClickClose:!1,canEscapeKeyClose:!1,size:240},a.createElement("div",{className:ue.Classes.DRAWER_BODY},a.createElement("div",{className:ue.Classes.DIALOG_BODY},"We use cookies so you can optimally use this website. Some cookies that are necessary for the operation of Cate App. In addition, we use cookies for statistical purposes. You can adjust the data protection settings or agree to all cookies directly. ",a.createElement("a",{href:"https://climate.esa.int/en/privacy/"},"Privacy Statement")),a.createElement("div",{className:ue.Classes.DIALOG_FOOTER},a.createElement("div",{className:ue.Classes.DIALOG_FOOTER_ACTIONS},a.createElement(ue.Button,{intent:ue.Intent.PRIMARY,onClick:function(){r(Object(c.ec)(!l||p))}},l?"I agree to selected Cookies":"I agree to all Cookies"),a.createElement(ue.Button,{rightIcon:l?"caret-up":"caret-down",onClick:function(){return s(!l)}},"Settings"))),a.createElement(ue.Collapse,{isOpen:l},a.createElement("div",{className:ue.Classes.DIALOG_BODY},a.createElement(ue.Checkbox,{checked:!0},a.createElement("strong",null,"Functional"),": Cate does not work without functional cookies. We'll just save your consent with this notice and possibly auto-login information if you use the Cate cloud services."),a.createElement(ue.Checkbox,{checked:p,onChange:function(e){h(e.currentTarget.checked)}},a.createElement("strong",null,"Tracking"),": Cate uses the open source software tool ",a.createElement("a",{href:"https://matomo.org/"},"Matomo"),", which uses cookies. With these cookies we count Cate App visits - of course anonymously. Matomo fully complies to the EU General Data Protection Regulation (GDPR).")))))})),pe=n(135),he=n(402),fe=n.n(he);var me=Object(o.b)((function(e){return{}}))((function(e){return a.createElement(ue.Menu,null,a.createElement(ue.MenuItem,{text:"New Workspace",icon:"folder-new",onClick:function(){e.dispatch(Object(c.cc)())}}),a.createElement(ue.MenuItem,{text:"Open Workspace",icon:"folder-shared-open",onClick:function(){e.dispatch(Object(c.hc)())}}),a.createElement(ue.MenuItem,{text:"Close Workspace",icon:"folder-close",onClick:function(){e.dispatch(Object(c.Fb)())}}),a.createElement(ue.MenuDivider,null),a.createElement(ue.MenuItem,{text:"Save Workspace",icon:"add-to-folder",onClick:function(){e.dispatch(Object(c.rc)())}}),a.createElement(ue.MenuItem,{text:"Save Workspace As...",onClick:function(){e.dispatch(Object(c.qc)())}}),a.createElement(ue.MenuDivider,null),a.createElement(ue.MenuItem,{text:"Delete Workspace",icon:"trash",onClick:function(){e.dispatch(Object(c.Kb)())}}))}));var be=Object(o.b)((function(e){return{}}))((function(e){return a.createElement("div",null,a.createElement(ue.Menu,null,a.createElement(ue.MenuItem,{text:"Upload Files...",icon:"upload",onClick:function(){e.dispatch(Object(c.Nb)())}}),a.createElement(ue.MenuDivider,null),a.createElement(ue.MenuItem,{text:"Download Files...",icon:"download",onClick:function(){e.dispatch(Object(c.Mb)())}}),a.createElement(ue.MenuDivider,null),a.createElement(ue.MenuItem,{text:"Browse Files...",icon:"folder-close",onClick:function(){e.dispatch(Object(c.bd)(""))}})))}));var ve=Object(o.b)((function(e){return{}}))((function(){var e=function(e){window.open(e,"_blank")};return a.createElement("div",null,a.createElement(ue.Menu,null,a.createElement(ue.MenuItem,{text:"Cate Documentation",onClick:function(){return e("http://cate.readthedocs.io")}}),a.createElement(ue.MenuItem,{text:"Cate Website",onClick:function(){return e("https://climate.esa.int/en/explore/analyse-climate-data")}}),a.createElement(ue.MenuItem,{text:"Cate on GitHub",onClick:function(){return e("https://github.com/CCI-Tools/cate")}}),a.createElement(ue.MenuItem,{text:"ESA Climate Office Helpdesk",onClick:function(){return e("https://climate.esa.int/en/helpdesk")}})))})),ye={marginLeft:10};var ge=Object(o.b)((function(e){return{}}))((function(e){var t=e.dispatch;return a.createElement(ue.Navbar,null,a.createElement(ue.NavbarGroup,null,a.createElement("img",{src:fe.a,width:32,height:32,alt:"Cate icon"}),a.createElement("h2",{style:ye},"Cate - ESA CCI Toolbox")),a.createElement(ue.NavbarGroup,{align:"right"},a.createElement(ue.Popover,{content:a.createElement(me,null),position:ue.PopoverPosition.BOTTOM},a.createElement(ue.Button,{className:"bp3-minimal",rightIcon:"caret-down"},"Workspaces")),a.createElement(ue.Popover,{content:a.createElement(be,null),position:ue.PopoverPosition.BOTTOM},a.createElement(ue.Button,{className:"bp3-minimal",rightIcon:"caret-down"},"Files")),a.createElement(ue.Popover,{content:a.createElement(ve,null),position:ue.PopoverPosition.BOTTOM},a.createElement(ue.Button,{className:"bp3-minimal",rightIcon:"caret-down"},"Help")),a.createElement(ue.NavbarDivider,null),a.createElement(ue.Button,{className:"bp3-minimal",icon:"cog",onClick:function(){t(c.fd())}})))})),Ee=n(106),Oe=n(10),_e=a.createElement("span",null,"This is very likely a configuration error."),Ce=a.createElement(ue.NonIdealState,{title:"No workspace",description:a.createElement("span",null,"Try ",a.createElement("strong",null,"File / New")," or ",a.createElement("strong",null,"File / Open")," from the main menu."),icon:"circle"}),ke=a.createElement(ue.NonIdealState,{title:"No workspace resources",icon:"database",description:a.createElement("span",null,"Open a dataset in DATA SOURCES panel or add a ",a.createElement("code",null,"read_")," operation step from the OPERATIONS panel.")}),we=a.createElement(ue.NonIdealState,{title:"No workflow steps",icon:"flows",description:a.createElement("span",null,"Open a dataset in DATA SOURCES panel or add a ",a.createElement("code",null,"read_")," operation step from the OPERATIONS panel.")}),Se=a.createElement(ue.NonIdealState,{title:"No data stores found",icon:"offline",description:_e}),je=a.createElement(ue.NonIdealState,{title:"No data sources",icon:"circle",description:a.createElement("span",null,'You can add a new data source using the "+" button below.')}),Ie=a.createElement(ue.NonIdealState,{title:"Loading data sources...",icon:a.createElement("div",{style:{marginTop:14}},a.createElement(ue.Spinner,{intent:ue.Intent.PRIMARY})),description:a.createElement("div",{className:"bp3-text-small bp3-text-muted"},"Note: If loading seems to take forever, try switching to another data store in between, then come back to the desired one.")}),Pe=a.createElement(ue.NonIdealState,{title:"No data sources found",icon:"circle",description:_e}),De=a.createElement(ue.NonIdealState,{title:"No operations found",description:_e,icon:"circle"}),Le=a.createElement(ue.NonIdealState,{title:"No variables",icon:"circle",description:"Select a resource in the WORKSPACE panel first."}),Te=a.createElement(ue.NonIdealState,{title:"No active view",description:"Add a new view first.",icon:"circle"}),Ae=a.createElement(ue.NonIdealState,{title:"Can't open world view",description:"Cate's world view component requires WebGL, which doesn't seem to be supported by your environment. This is likely on virtualized HW with low graphics capabilities. Sorry!",icon:"disable"}),Re=a.createElement(ue.NonIdealState,{title:"No places",description:a.createElement("span",null,"Press the tool buttons below to add a new place."),icon:"circle"}),Ne=a.createElement(ue.NonIdealState,{title:"No place selected",description:"Select a place to show and edit its details.",icon:"circle"}),xe=a.createElement(ue.NonIdealState,{title:"No layers",description:"To show layers, activate a world view",icon:"circle"}),Me=a.createElement(ue.NonIdealState,{title:"No layers",description:a.createElement("span",null,"Press the ",a.createElement(ue.Icon,{icon:"add"})," button to add a layer."),icon:"circle"}),Ve=a.createElement(ue.NonIdealState,{title:"No layer selected",description:"Select a layer to browse and edit its details.",icon:"circle"}),Be=a.createElement(ue.NonIdealState,{title:"Styles unavailable",description:"Select a layer in the LAYERS panel to modify its style.",icon:"circle"}),We=a.createElement(ue.NonIdealState,{title:"Styles unavailable",description:"Select an entity in the World View to modify its style.",icon:"circle"}),Fe=(ue.NonIdealState,ue.Icon,a.createElement(ue.NonIdealState,{title:"No table data",description:a.createElement("span",null,"The resource seems to be empty or an error occurred."),icon:"circle"})),Ue=n(23),Ge=n(256);var Ye=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).parentContainer=void 0,n.checkProps(e),a.parentContainer=null,a.onRef=a.onRef.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"getExternalObjectRef",value:function(){return this.externalObjectStore[this.props.id]||null}},{key:"propsToExternalObjectState",value:function(e,t){return Object(d.a)(Object(d.a)({},t),e)}},{key:"externalObjectMounted",value:function(e,t,n,a){}},{key:"externalObjectUnmounted",value:function(e,t,n,a){}},{key:"componentWillUpdate",value:function(e){this.props.debug&&console.log("ExternalObjectComponent.componentWillUpdate nextProps.id =",e.id),n.checkProps(e),this.props.id===e.id?this.updateExternalComponentAndSaveProps(e):this.parentContainer&&this.remountExternalObject(this.parentContainer,e)}},{key:"onRef",value:function(e){this.props.debug&&console.log("ExternalObjectComponent.onRef: this.props =",this.props),this.remountExternalObject(e,this.props)}},{key:"render",value:function(){return a.createElement("div",{id:this.props.id,className:this.props.className,style:this.props.style,ref:this.onRef},this.renderChildren())}},{key:"renderChildren",value:function(){return null}},{key:"forceRegeneration",value:function(){var e=this.externalObjectStore,t=e[this.props.id];t&&(delete e[this.props.id],this.parentContainer&&t.container&&this.parentContainer.removeChild(t.container),this.remountExternalObject(this.parentContainer,this.props))}},{key:"remountExternalObject",value:function(e,t){t.debug&&console.log("ExternalObjectComponent.remountExternalObject: props.id =",t.id),e?(e.id!==t.id&&this.unmountExternalObject(e,this.props),t.id in this.externalObjectStore?this.mountExistingExternalObject(e,t):this.mountNewExternalObject(e,t)):this.parentContainer&&this.unmountExternalObject(this.parentContainer,t)}},{key:"mountNewExternalObject",value:function(e,t){t.debug&&console.log("ExternalObjectComponent.mountNewExternalObject: props.id =",t.id);var n=this.newContainer(t.id);n&&(t.debug&&console.log("ExternalObjectComponent: attaching new external object with id =",t.id),e.appendChild(n));var a=this.newExternalObject(e,n);this.externalObjectStore[t.id]={object:a,container:n},this.parentContainer=e,this.externalObjectMounted(a,t,e,n),this.updateExternalComponentAndSaveProps(t)}},{key:"mountExistingExternalObject",value:function(e,t){t.debug&&console.log("ExternalObjectComponent.mountExistingExternalObject: props.id =",t.id);var n=this.externalObjectStore[t.id];f.a(n);var a=n.container;a&&!e.contains(a)&&(t.debug&&console.log("ExternalObjectComponent: attaching existing external object with id =",t.id),e.appendChild(a)),this.parentContainer=e,this.externalObjectMounted(n.object,t,e,a),this.updateExternalComponentAndSaveProps(t)}},{key:"unmountExternalObject",value:function(e,t){this.props.debug&&console.log("ExternalObjectComponent.unmountExternalObject: parentContainer.id =",e.id);var n=this.externalObjectStore[e.id];f.a(n);var a=n.container;a&&e.contains(a)&&(t.debug&&console.log("ExternalObjectComponent: detaching external object with id =",a.id),e.removeChild(a)),this.parentContainer=null,this.externalObjectUnmounted(n.object,t,e,a)}},{key:"updateExternalComponentAndSaveProps",value:function(e){var t=this.externalObjectStore[e.id];f.a(t);var n=t.state,a=this.propsToExternalObjectState(e,n);this.props.debug&&(console.log("ExternalObjectComponent: updating existing external object"),console.log("  this.props.id =",this.props.id),console.log("  nextProps.id  =",e.id),console.log("  prevState     =",n),console.log("  nextState     =",a)),this.shouldExternalObjectUpdate(n,a)&&this.updateExternalObject(t.object,n,a,this.parentContainer,t.container),t.state=a}},{key:"shouldExternalObjectUpdate",value:function(e,t){return!function(e,t){if(e===t)return!0;if(e&&t){var n=typeof e;if(n!==typeof t)return!1;if("Array"===n){if(!e.length!==!t.length)return!1;if(!e.length&&!t.length)return!0;for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}if("object"===n){var r=Object.getOwnPropertyNames(e),o=Object.getOwnPropertyNames(t);if(!r.length!==!o.length)return!1;if(!r.length&&!o.length)return!0;var i,l=Object(g.a)(r);try{for(l.s();!(i=l.n()).done;){var c=i.value;if(e[c]!==t[c])return!1}}catch(p){l.e(p)}finally{l.f()}var s,u=Object(g.a)(o);try{for(u.s();!(s=u.n()).done;){var d=s.value;if(e[d]!==t[d])return!1}}catch(p){u.e(p)}finally{u.f()}return!0}}return!1}(e,t)}},{key:"externalObjectStore",get:function(){return this.props.externalObjectStore||n.DEFAULT_EXTERNAL_OBJECT_STORE}}],[{key:"checkProps",value:function(e){if(!e.id)throw new Error("cannot construct ExternalObjectComponent without id")}}]),n}(a.PureComponent);function He(e,t,n){for(var a=[],r=e.slice(),o=new Set(t.map((function(e){return e.id}))),i=e.length-1;i>=0;i--){var l=e[i];o.has(l.id)||(a.push({type:"REMOVE",index:i,oldElement:l}),r.splice(i,1))}f.a(r.length<=t.length);for(var c=0;c<t.length;c++){var s=t[c];f.a(!!s);var u=r[c];if(u)if(s.id!==u.id){for(var d=-1,p=c+1;p<r.length;p++)if(r[p].id===s.id){d=p;break}if(-1===d)a.push({type:"ADD",index:c,newElement:s}),r.splice(c,0,s);else{a.push({type:"MOVE",index:d,numSteps:c-d});var m=r[d];r.splice(d,1),r.splice(c,0,m),c-=1}}else if(n){var b=n(u,s);null!==b&&"undefined"!==typeof b&&a.push({type:"UPDATE",index:c,oldElement:u,newElement:s,change:b})}else h()(u,s)||a.push({type:"UPDATE",index:c,oldElement:u,newElement:s});else a.push({type:"ADD",index:c,newElement:s}),r.push(s)}return a}Ye.DEFAULT_EXTERNAL_OBJECT_STORE={};var Ke=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).sliderElement=void 0,a.dragStartX=void 0,a.handleRef=a.handleRef.bind(Object(ie.a)(a)),a.mouseDown=a.mouseDown.bind(Object(ie.a)(a)),a.mouseUp=a.mouseUp.bind(Object(ie.a)(a)),a.sliderMove=a.sliderMove.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"mouseDown",value:function(e){this.dragStartX=e.clientX-this.sliderElement.offsetLeft,window.addEventListener("mousemove",this.sliderMove,!0)}},{key:"mouseUp",value:function(){window.removeEventListener("mousemove",this.sliderMove,!0)}},{key:"sliderMove",value:function(e){var t=(e.clientX-this.dragStartX)/this.sliderElement.parentElement.offsetWidth;this.props.onChange(t)}},{key:"handleRef",value:function(e){e?(e.addEventListener("mousedown",this.mouseDown,!1),window.addEventListener("mouseup",this.mouseUp,!1),this.dragStartX=0):this.sliderElement&&this.sliderElement.removeEventListener("mousedown",this.mouseDown,!1),this.sliderElement=e}},{key:"render",value:function(){var e=100*this.props.splitPos+"%";return a.createElement("div",{style:Object(d.a)(Object(d.a)({},n.DIV_STYLE),{},{left:e}),ref:this.handleRef})}}]),n}(a.PureComponent);Ke.DIV_STYLE={position:"absolute",left:"50%",top:"0px",backgroundColor:"rgba(255, 255, 0, 0.5)",width:"2px",height:"100%",zIndex:5,cursor:"col-resize"};var ze=n(53),qe=new Ue.e(Ue.d.CHARTREUSE.withAlpha(.9)),Je=new Ue.e(Ue.d.YELLOW.withAlpha(.9)),Xe=new Ue.e(Ue.d.AQUA.withAlpha(.7)),Ze=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e,a){var r;Object(re.a)(this,n),(r=t.call(this))._viewer=void 0,r._ellipsoid=void 0,r._toolDataSource=void 0,r._handler=void 0,r._onNewEntity=void 0,r._viewer=e,r._ellipsoid=e.scene.globe.ellipsoid,r._toolDataSource=new Ue.g("Tool Data Source"),e.dataSources.add(r._toolDataSource);var o=new Ue.v(e.scene.canvas);return o.setInputAction((function(e){r.tool.isActive()&&(r.onLeftClick(e),r._viewer.scene.requestRender())}),Ue.w.LEFT_CLICK),o.setInputAction((function(e){r.tool.isActive()&&(r.onLeftDoubleClick(e),r._viewer.scene.requestRender())}),Ue.w.LEFT_DOUBLE_CLICK),o.setInputAction((function(e){r.tool.isActive()&&(r.onMouseMove(e),r._viewer.scene.requestRender())}),Ue.w.MOUSE_MOVE),r._handler=o,r._onNewEntity=a,r}return Object(oe.a)(n,[{key:"newEntity",value:function(e){this._onNewEntity?this._onNewEntity(new Ue.i(e)):this._viewer.entities.add(e)}},{key:"addToolEntity",value:function(e){this._toolDataSource.entities.add(e)}},{key:"removeAllToolEntities",value:function(){this._toolDataSource.entities.removeAll()}},{key:"pickEllipsoid",value:function(e){return this._viewer.camera.pickEllipsoid(e,this._ellipsoid)}},{key:"cartesianWithHeightDelta",value:function(e,t){var n=this._ellipsoid.cartesianToCartographic(e);return n.height+=t,this._ellipsoid.cartographicToCartesian(n)}},{key:"cartesianToCartographic",value:function(e){return this._ellipsoid.cartesianToCartographic(e)}},{key:"cartographicToCartesian",value:function(e){return this._ellipsoid.cartographicToCartesian(e)}},{key:"destroy",value:function(){this._handler.destroy()}}]),n}(function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(){var e;return Object(re.a)(this,n),(e=t.call(this))._tool=void 0,e._tool=$e,e}return Object(oe.a)(n,[{key:"onLeftClick",value:function(e){this._tool.handleLeftClick(e)}},{key:"onLeftDoubleClick",value:function(e){this._tool.handleLeftDoubleClick(e)}},{key:"onMouseMove",value:function(e){this._tool.handleMouseMove(e)}},{key:"tool",set:function(e){e!==this._tool&&(this._tool.deactivate(),this._tool.context=null,this._tool=e,this._tool.context=this,this._tool.activate())},get:function(){return this._tool}}]),n}((function e(){Object(re.a)(this,e)}))),Qe=function(){function e(t){Object(re.a)(this,e),this.type=void 0,this._context=null,this.type=t}return Object(oe.a)(e,[{key:"isActive",value:function(){return null!==this._context}},{key:"activate",value:function(){}},{key:"deactivate",value:function(){}},{key:"handleLeftClick",value:function(e){}},{key:"handleLeftDoubleClick",value:function(e){}},{key:"handleMouseMove",value:function(e){}},{key:"context",set:function(e){this._context=e},get:function(){return this._context}}]),e}(),$e=new(function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(){return Object(re.a)(this,n),t.call(this,"NoTool")}return n}(Qe)),et=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(){return Object(re.a)(this,n),t.call(this,"PointTool")}return Object(oe.a)(n,[{key:"handleLeftClick",value:function(e){var t=this.context.pickEllipsoid(e.position);Object(v.b)(t)&&this.context.newEntity(new Ue.i({position:t,point:{pixelSize:6,outlineWidth:1}}))}}]),n}(Qe),tt=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e,a){var r;return Object(re.a)(this,n),(r=t.call(this,e)).genPolygon=void 0,r.polylinePositions=null,r.polygonPositions=null,r.polylineEntity=null,r.polygonEntity=null,r.hasRubberband=!1,r.genPolygon=a,r}return Object(oe.a)(n,[{key:"deactivate",value:function(){this.reset()}},{key:"handleLeftClick",value:function(e){this.addPoint(e.position)}},{key:"handleMouseMove",value:function(e){this.moveLastPoint(e.endPosition)}},{key:"handleLeftDoubleClick",value:function(e){this.endInteraction()}},{key:"addPoint",value:function(e){var t=this.context.pickEllipsoid(e);Object(v.b)(t)&&(t=this.context.cartesianWithHeightDelta(t,10),this.updatePositions(t)&&this.context.addToolEntity(new Ue.i({position:t,point:{show:!0,outlineColor:Ue.d.BLACK,outlineWidth:1,color:qe,pixelSize:10}})),this.hasRubberband=!1)}},{key:"endInteraction",value:function(){null!==this.polygonEntity?this.context.newEntity(new Ue.i({polygon:{hierarchy:new Ue.t(this.polygonPositions),material:Xe}})):null!==this.polylineEntity&&this.context.newEntity(new Ue.i({polyline:{positions:this.polylinePositions,material:Je}})),this.reset()}},{key:"moveLastPoint",value:function(e){if(this.polylinePositions){var t=this.context.pickEllipsoid(e);Object(v.b)(t)&&(this.updatePositions(t),this.hasRubberband=!0)}}},{key:"updatePositions",value:function(e){var t=this.context.cartesianWithHeightDelta(e,5),n=!0;if(null===this.polylinePositions)this.polylinePositions=[t];else{var a=this.polylinePositions.length;this.hasRubberband?this.polylinePositions[a-1]=t:t.equals(this.polylinePositions[a-1])?n=!1:this.polylinePositions.push(t)}if(this.polylinePositions.length>1){var r=this.polylinePositions.slice();this.polylineEntity?n&&(this.polylineEntity.polyline.positions=new Ue.f(r)):(this.polylineEntity=new Ue.i({polyline:{positions:r,width:2,material:Je}}),this.context.addToolEntity(this.polylineEntity))}if(n&&this.genPolygon){var o=this.context.cartesianWithHeightDelta(e,0);if(this.polygonPositions){var i=this.polygonPositions.length;this.hasRubberband?this.polygonPositions[i-1]=o:this.polygonPositions.push(o)}else this.polygonPositions=[o];if(this.polygonPositions.length>2){var l=this.polygonPositions.slice();this.polygonEntity?this.polygonEntity.polygon.hierarchy=new Ue.f(new Ue.t(l)):(this.polygonEntity=new Ue.i({polygon:{hierarchy:new Ue.t(l),material:Xe}}),this.context.addToolEntity(this.polygonEntity))}}return n}},{key:"reset",value:function(){this.polylinePositions=null,this.polygonPositions=null,this.polylineEntity=null,this.polygonEntity=null,this.hasRubberband=!1,null!==this.context&&this.context.removeAllToolEntities()}}]),n}(Qe),nt=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(){return Object(re.a)(this,n),t.call(this,"PolylineTool",!1)}return n}(tt),at=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(){return Object(re.a)(this,n),t.call(this,"PolygonTool",!0)}return n}(tt),rt=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(){var e;return Object(re.a)(this,n),(e=t.call(this,"BoxTool")).position1=null,e.position2=null,e.polygonEntity=null,e}return Object(oe.a)(n,[{key:"deactivate",value:function(){this.reset()}},{key:"handleLeftClick",value:function(e){this.setPosition(e.position,!0)}},{key:"handleLeftDoubleClick",value:function(e){this.setPosition(e.position,!0)}},{key:"handleMouseMove",value:function(e){this.position1&&this.setPosition(e.endPosition,!1)}},{key:"setPosition",value:function(e,t){var n=this.context.pickEllipsoid(e);if(Object(v.b)(n))if(null===this.position1)this.position1=n;else{this.position2=n;var a=this.getPositions();if(t)return this.context.newEntity(new Ue.i({polygon:{hierarchy:new Ue.t(a),material:Xe}})),void this.reset();null===this.polygonEntity?(this.polygonEntity=new Ue.i({polygon:{hierarchy:new Ue.t(a),material:Xe}}),this.context.addToolEntity(this.polygonEntity)):this.polygonEntity.polygon.hierarchy=new Ue.f(new Ue.t(a))}}},{key:"getPositions",value:function(){var e=this.context.cartesianToCartographic(this.position1),t=this.context.cartesianToCartographic(this.position2),n=e.longitude,a=e.latitude,r=t.longitude,o=t.latitude,i=.5*(e.height+t.height);return[this.context.cartographicToCartesian(new Ue.c(n,a,i)),this.context.cartographicToCartesian(new Ue.c(r,a,i)),this.context.cartographicToCartesian(new Ue.c(r,o,i)),this.context.cartographicToCartesian(new Ue.c(n,o,i))]}},{key:"reset",value:function(){this.position1=null,this.position2=null,this.polygonEntity=null,null!==this.context&&this.context.removeAllToolEntities()}}]),n}(Qe);Ue.o.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhNzYzYzJjYS00YzY5LTQzN2ItOWQzNy03NWZmZTQyMjU1ZDgiLCJpZCI6MjAwNTAsInNjb3BlcyI6WyJhc3IiLCJnYyJdLCJpYXQiOjE1NzY2NjU5ODN9.f-uN5Ocljn77-O2aDNEGPSr8HRHym5RA0aqSWKMgYYk";var ot=Ue.u.fromDegrees(-30,20,40,80),it=[];Ue.a.DEFAULT_VIEW_RECTANGLE=ot,Ue.a.DEFAULT_VIEW_FACTOR=0;var lt=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).cesiumEventHandler=void 0,a.selectedEntityChangeHandler=void 0,a.toolContext=void 0,a.handleRemoteBaseLayerError=a.handleRemoteBaseLayerError.bind(Object(ie.a)(a)),a.state={isContextMenuOpen:!1},a}return Object(oe.a)(n,[{key:"renderChildren",value:function(){return Object(v.d)(this.props.splitLayerPosition)?a.createElement(Ke,{splitPos:this.props.splitLayerPosition,onChange:this.props.onLayerSplitPosChange}):null}},{key:"newContainer",value:function(e){var t=document.createElement("div");return t.setAttribute("id","cesium-container-"+e),t.setAttribute("style","width: 100%; height: 100%; overflow: hidden;"),t}},{key:"newExternalObject",value:function(e,t){var a,r=this;this.props.offlineMode&&(a=n.getStaticNaturalEarthImageryProvider());var o={animation:!1,baseLayerPicker:!1,selectionIndicator:!0,fullscreenButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,sceneModePicker:!0,timeline:!1,navigationHelpButton:!1,navigationInstructionsInitiallyVisible:!1,automaticallyTrackDataSourceClocks:!1,imageryProvider:a,requestRenderMode:!0,maximumRenderTimeChange:1/0},i=new Ue.A(t,o);t.oncontextmenu=function(e){return r.handleContextMenu(i,e)},this.props.debug&&(i.scene.debugShowFramesPerSecond=!0),this.props.offlineMode||Object(ze.j)(i,this.props.baseMapOptions);var l=i.selectionIndicator.viewModel,c=l.update;return l.update=function(){var e=l;c.apply(this);var t="top : ".concat(e._screenPositionY,"; left : ").concat(e._screenPositionX,";");e._selectionIndicatorElement.setAttribute("style",t)},i}},{key:"handleRemoteBaseLayerError",value:function(e){console.error("CesiumGlobe: error: ",e.message,e.timesRetried,e.error);var t=this.getExternalObjectRef();if(t){var a=t.object,r=a.imageryLayers.get(0);a.imageryLayers.remove(r,!0);var o=n.getStaticNaturalEarthImageryProvider();a.imageryLayers.addImageryProvider(o,0)}}},{key:"handleContextMenu",value:function(e,t){var n=this,a=this.props.renderContextMenu;if(a){var r=new Ue.b(t.clientX,t.clientY),o=Object(ze.d)(e,r),i=a(Object(ze.c)(e,o,!0),o,Object(ze.i)(e,o));i&&(t.preventDefault(),ue.ContextMenu.show(i,{left:t.clientX,top:t.clientY},(function(){return n.setState({isContextMenuOpen:!1})})),this.setState({isContextMenuOpen:!0}))}}},{key:"propsToExternalObjectState",value:function(e,t){return{selectedPlacemarkId:e.selectedPlacemarkId,baseMapOptions:e.baseMapOptions,imageLayerDescriptors:e.imageLayerDescriptors||it,vectorLayerDescriptors:e.vectorLayerDescriptors||it,overlayHtml:e.overlayHtml||null,geometryToolType:e.geometryToolType,splitLayerPosition:e.splitLayerPosition,dataSourceMap:t&&t.dataSourceMap||{}}}},{key:"updateExternalObject",value:function(e,t,a){var r=t&&t.baseMapOptions||null,o=t&&t.selectedPlacemarkId||null,i=t&&t.imageLayerDescriptors||it,l=t&&t.vectorLayerDescriptors||it,c=t&&t.overlayHtml||null,s=t&&t.splitLayerPosition,u=t&&t.geometryToolType||"NoTool",d=a.baseMapOptions,p=a.selectedPlacemarkId||null,h=a.imageLayerDescriptors||it,f=a.vectorLayerDescriptors||it,m=a.overlayHtml,b=a.splitLayerPosition,y=a.geometryToolType||"NoTool",g=!1;r===d||this.props.offlineMode||Object(ze.j)(e,d),i!==h&&(this.updateImageLayers(e,i,h),g=!0),l!==f&&(this.updateVectorLayers(e,l,f,a.dataSourceMap,p),g=!0),o!==p&&(this.updatePlacemarkSelection(e,p),g=!0),c!==m&&(n.updateOverlayHtml(e,c,m),g=!0),s!==b&&(Object(v.d)(b)&&(e.scene.imagerySplitPosition=b),g=!0),u!==y&&this.activateGeometryTool(e,y),g&&e.scene.requestRender()}},{key:"externalObjectMounted",value:function(e,t){function n(t,n,a){if(a){var r=Object(ze.c)(e,t,!0);n?a(r,t,Object(ze.i)(e,t)):a(r,t)}}this.cesiumEventHandler=new Ue.v(e.scene.canvas),this.cesiumEventHandler.setInputAction((function(e){return n(e.position,!0,t.onLeftUp)}),Ue.w.LEFT_UP),this.cesiumEventHandler.setInputAction((function(e){return n(e.position,!0,t.onLeftClick)}),Ue.w.LEFT_CLICK),this.cesiumEventHandler.setInputAction((function(e){return n(e.position,!0,t.onRightClick)}),Ue.w.RIGHT_CLICK),this.cesiumEventHandler.setInputAction((function(e){return n(e.endPosition,!1,t.onMouseMove)}),Ue.w.MOUSE_MOVE),this.selectedEntityChangeHandler=function(e){t.onSelectedEntityChanged&&t.onSelectedEntityChanged(e)},e.selectedEntityChanged.addEventListener(this.selectedEntityChangeHandler),this.toolContext=new Ze(e,t.onNewEntityAdded),this.activateGeometryTool(e,t.geometryToolType),e.scene.requestRender(),t.onViewerMounted&&t.onViewerMounted(t.id,e)}},{key:"externalObjectUnmounted",value:function(e,t){this.cesiumEventHandler&&(this.cesiumEventHandler.destroy(),this.cesiumEventHandler=null),this.selectedEntityChangeHandler&&(e.selectedEntityChanged.removeEventListener(this.selectedEntityChangeHandler),this.selectedEntityChangeHandler=null),this.toolContext&&(this.toolContext.destroy(),this.toolContext=null),t.onViewerUnmounted&&t.onViewerUnmounted(t.id,e)}},{key:"updatePlacemarkSelection",value:function(e,t){var n=t&&Object(ze.h)(e,t)||null,a=e.selectedEntity||null;this.props.debug&&console.log("CesiumGlobe: updating selected placemark: ",a,n),a!==n&&(e.selectedEntity=n)}},{key:"updatePlacemarks",value:function(e,t,a,r){this.props.debug&&console.log("CesiumGlobe: updating placemarks");var o,i=He(t&&t.features||it,a&&a.features||it),l=[],c=Object(g.a)(i);try{for(c.s();!(o=c.n()).done;){var s=o.value;this.props.debug&&console.log("CesiumGlobe: next placemark action",s),function(){switch(s.type){case"ADD":var t=s.newElement,a=t.properties.visible,o=Ue.j.load(t,Object(ze.k)(r));l.push(o.then((function(t){return n.moveEntities(t.entities,e,!Object(v.a)(a)||a),t})));break;case"REMOVE":var i=s.oldElement;e.removeById(i.id);break;case"UPDATE":var c=s.oldElement,u=s.newElement,d=u.properties.visible,p=Ue.j.load(u,Object(ze.k)(r));l.push(p.then((function(t){return e.removeById(c.id),n.moveEntities(t.entities,e,!Object(v.a)(d)||d),t})));break;default:console.error('CesiumGlobe: unhandled placemark action type "'.concat(s.type,'"'))}}()}}catch(u){c.e(u)}finally{c.f()}return Promise.all(l)}},{key:"updateImageLayers",value:function(e,t,a){this.props.debug&&console.log("CesiumGlobe: updating image layers");var r,o,i,l,c=He(t,a),s=Object(g.a)(c);try{for(s.s();!(l=s.n()).done;){var u=l.value;this.props.debug&&console.log("CesiumGlobe: next image layer action",u);var d=u.index+1;switch(u.type){case"ADD":if(!(r=this.addLayer(e,u.newElement,d))){console.error("CesiumGlobe: no imageryLayer at index "+d);break}n.setLayerProps(r,u.newElement);break;case"REMOVE":if(!(r=e.imageryLayers.get(d))){console.error("CesiumGlobe: no imageryLayer at index "+d);break}this.removeLayer(e,r,d);break;case"UPDATE":if(!(r=e.imageryLayers.get(d))){console.error("CesiumGlobe: no imageryLayer at index "+d);break}i=u.oldElement,o=u.newElement,i.imageryProviderOptions.url!==o.imageryProviderOptions.url&&(this.removeLayer(e,r,d),(r=this.addLayer(e,o,d)).minificationFilter=Ue.y.NEAREST,r.magnificationFilter=Ue.x.NEAREST),n.setLayerProps(r,o);break;case"MOVE":if(!(r=e.imageryLayers.get(d))){console.error("CesiumGlobe: no imageryLayer at index "+d);break}if(u.numSteps<0)for(var p=0;p<-u.numSteps;p++)e.imageryLayers.lower(r);else for(var h=0;h<u.numSteps;h++)e.imageryLayers.raise(r);break;default:console.error('CesiumGlobe: unhandled layer action type "'.concat(u.type,'"'))}}}catch(f){s.e(f)}finally{s.f()}}},{key:"updateVectorLayers",value:function(e,t,n,a,r){this.props.debug&&console.log("CesiumGlobe: updating vector layers");var o,i=He(t,n),l=Object(g.a)(i);try{for(l.s();!(o=l.n()).done;){var c=o.value;switch(this.props.debug&&console.log("CesiumGlobe: next vector layer action",c),c.type){case"ADD":this.addDataSource(e,c.newElement,a);break;case"REMOVE":this.removeDataSource(e,c.oldElement,a);break;case"UPDATE":this.updateDataSource(e,c.oldElement,c.newElement,a,r);break;case"MOVE":break;default:console.error('CesiumGlobe: unhandled layer action type "'.concat(c.type,'"'))}}}catch(s){l.e(s)}finally{l.f()}}},{key:"addDataSource",value:function(e,t,a){var r=this,o=n.getDataSource(e,t);e.dataSources.add(o).then((function(n){r.props.debug&&console.log("CesiumGlobe: added data source: ".concat(t.name)),a[t.id]=n,r.setDataSourceProps(e,n,t)}))}},{key:"removeDataSource",value:function(e,t,n){var a=n[t.id];a&&(delete n[t.id],e.dataSources.remove(a,!0),this.props.debug&&console.log("CesiumGlobe: removed data source: ".concat(t.name)),e.scene.requestRender())}},{key:"updateDataSource",value:function(e,t,n,a,r){var o=n.id,i=a[o];if(i){var l=t.dataSourceOptions.data,c=n.dataSourceOptions.data;l!==c&&(Object(v.e)(c)?(this.removeDataSource(e,t,a),this.addDataSource(e,n,a)):this.updatePlacemarks(i.entities,l,c,n.style).then((function(){if(r){var t=i.entities.getById(r);t&&t!==e.selectedEntity&&(e.selectedEntity=t)}})));var s=t.style,u=n.style;if(s!==u){var d=Object(Ge.diff)(s,u);if(Object.getOwnPropertyNames(d).length>0){var p=Object(ze.k)(d,u);Object(ze.b)(p,i.entities.values)}}var h=t.entityStyles,f=n.entityStyles;if(h!==f){var m,b=Object(Ge.diff)(h,f),y=Object(g.a)(Object.getOwnPropertyNames(b));try{for(y.s();!(m=y.n()).done;){var E=m.value,O=i.entities.getById(E);if(O){var _=b[E];if(Object.getOwnPropertyNames(_).length>0){var C=Object(ze.k)(_,f[E]);Object(ze.a)(C,O)}}}}catch(k){y.e(k)}finally{y.f()}}this.setDataSourceProps(e,i,n)}else console.warn("CesiumGlobe: dataSource for vector layer not ready yet, layerId =",o)}},{key:"addLayer",value:function(e,t,a){var r=n.getImageryProvider(e,t),o=e.imageryLayers.addImageryProvider(r,a);return this.props.debug&&console.log("CesiumGlobe: added imagery layer #".concat(a,": ").concat(t.name)),o}},{key:"removeLayer",value:function(e,t,n){e.imageryLayers.remove(t,!0),this.props.debug&&console.log("CesiumGlobe: removed imagery layer #".concat(n))}},{key:"setDataSourceProps",value:function(e,t,n){Promise.resolve(t).then((function(t){t.show=n.visible,e.scene.requestRender()}))}},{key:"activateGeometryTool",value:function(e,t){t!==this.toolContext.tool.type&&("NoTool"===t?this.toolContext.tool=$e:"PointTool"===t?this.toolContext.tool=new et:"PolylineTool"===t?this.toolContext.tool=new nt:"PolygonTool"===t?this.toolContext.tool=new at:"BoxTool"===t&&(this.toolContext.tool=new rt))}},{key:"viewer",get:function(){var e=this.getExternalObjectRef();return e?e.object:null}}],[{key:"getStaticNaturalEarthImageryProvider",value:function(){var e={url:Ue.C("")+"Assets/Textures/NaturalEarthII/{z}/{x}/{reverseY}.jpg",tilingScheme:new Ue.k,minimumLevel:0,maximumLevel:2,credit:"Natural Earth II: Tileset Copyright \xa9 2012-2014 Analytical Graphics, Inc. (AGI). Original data courtesy Natural Earth and in the public domain."};return new Ue.z(e)}},{key:"updateOverlayHtml",value:function(e,t,n){if(n)if(t){if(!e.container.contains(t))return void console.warn("CesiumGlobe: previous HTML element is not a child",t);e.container.replaceChild(n,t)}else e.container.appendChild(n);else if(t){if(!e.container.contains(t))return void console.warn("CesiumGlobe: previous HTML element is not a child",t);e.container.removeChild(t)}}},{key:"getImageryProvider",value:function(e,t){return t.imageryProvider?"function"===typeof t.imageryProvider?t.imageryProvider(e,t.imageryProviderOptions):t.imageryProvider:null}},{key:"getDataSource",value:function(e,t){return"function"===typeof t.dataSource?t.dataSource(e,t.dataSourceOptions):t.dataSource}},{key:"setLayerProps",value:function(e,t){e.show=t.visible,e.alpha=t.opacity,e.brightness=t.brightness,e.contrast=t.contrast,e.hue=t.hue,e.saturation=t.saturation,e.gamma=t.gamma,e.minificationFilter=Ue.y.NEAREST,e.magnificationFilter=Ue.x.NEAREST,"left"===t.splitMode?e.splitDirection=Ue.n.LEFT:"right"===t.splitMode?e.splitDirection=Ue.n.RIGHT:e.splitDirection=Ue.n.NONE}},{key:"moveEntities",value:function(e,t,n){var a,r=Object(g.a)(e.values.slice());try{for(r.s();!(a=r.n()).done;){var o=a.value;o.show=n,t.add(o),e.remove(o)}}catch(i){r.e(i)}finally{r.f()}}}]),n}(Ye),ct=n(211),st=n(45),ut=new Set(["POINT","LINESTRING","POLYGON","MULTIPOINT","MULTILINESTRING","MULTIPOLYGON","GEOMETRYCOLLECTION"]),dt=new Array(ut.values()).map((function(e){return'"'.concat(e,'"')})).join(", ");function pt(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"}function ht(e,t){var n=parseFloat(e);if(isNaN(n)&&"nan"!==e.toLowerCase())throw new Error(t||"Value must be a number.");return n}function ft(e,t){if(e&&""!==(e=e.trim())){var n=!1;if(pt(e)){n=!0;for(var a=1;a<e.length&&pt(e[a]);a++);var r=e.substr(0,a).toUpperCase();e=e.substr(a),function(e,t){var n=t.toUpperCase();if("Geometry"===t){if(!ut.has(e))throw new Error("".concat(t," WKT must start with one of ").concat(dt,"."))}else if(!e.startsWith(n))throw new Error("".concat(t,' WKT must start with "').concat(n,'".'))}(r,t),function(e,t){var n,a,r;"POINT"===t?(n=0,a=1,r=1):"LINESTRING"===t?(n=1,a=1,r=1):"POLYGON"===t?(n=3,a=2,r=2):"MULTIPOINT"===t?(n=1,a=1,r=2):"MULTILINESTRING"===t?(n=1,a=2,r=2):"MULTIPOLYGON"===t?(n=3,a=3,r=3):"GEOMETRYCOLLECTION"===t&&(n=0,a=1,r=3);for(var o=0,i=0,l=0,c=0;c<e.length;c++){var s=e[c];if("("===s){if(++i>r)throw new Error('Invalid WKT, too many "(".');l=Math.max(l,i)}else if(")"===s){if(--i<0)throw new Error('Invalid WKT, too many ")".');if(0===i){if(o<n)throw new Error("Invalid WKT, too few coordinates.");o=0}}else","===s&&o++}if(0!==i)throw new Error('Invalid WKT, too many "(".');if(l<a)throw new Error('Invalid WKT, too few "(".')}(e,r)}var o,i,l=e.split(/[\s,()]+/);if(l.length&&""===l[0]&&(o=1),l.length&&""===l[l.length-1]&&(i=l.length-1),o>0&&i>0?l=l.slice(o,i):o>0?l=l.slice(o):i>0&&(l=l.slice(0,i)),l.length%2!==0)throw new Error("Illegal number of coordinates.");if(!n)if("Point"===t){if(2!==l.length)throw new Error('Point must have "<Longitude>, <Latitude>" syntax.')}else{if("Polygon"!==t)throw new Error("Invalid WKT.");if(4!==l.length)throw new Error('Bounding box must have "<E>, <S>, <W>, <N>" syntax.')}for(var c=0;c<l.length;c+=2){mt(ht(l[c],"Longitude value must be a number."),ht(l[c+1],"Latitude value must be a number."))}}}function mt(e,t){if(e<-180||e>180)throw new Error("Longitude must be in the range -180 to +180 degrees.");if(t<-90||t>90)throw new Error("Latitude must be in the range -90 to +90 degrees.")}function bt(e){if("Polygon"===e.type&&1===e.coordinates.length){var t=e.coordinates[0];if(5===t.length){var n=t[0][0],a=t[0][1],r=t[1][0],o=t[1][1],i=t[2][0],l=t[2][1],c=t[3][0],s=t[3][1],u=t[4][0],d=t[4][1];return 0===r-n&&0===l-o&&0===c-i&&0===d-s||0===o-a&&0===i-r&&0===s-l&&0===u-c}}return!1}function vt(e){if("Point"===e.type){var t=e.coordinates;return"POINT (".concat(t[0]," ").concat(t[1],")")}if("LineString"===e.type){var n,a=e.coordinates,r=[],o=Object(g.a)(a);try{for(o.s();!(n=o.n()).done;){var i=n.value;r.push("".concat(i[0]," ").concat(i[1]))}}catch(b){o.e(b)}finally{o.f()}return"LINESTRING (".concat(r.join(", "),")")}if("Polygon"===e.type){var l,c=e.coordinates,s=[],u=Object(g.a)(c);try{for(u.s();!(l=u.n()).done;){var d,p=l.value,h=[],f=Object(g.a)(p);try{for(f.s();!(d=f.n()).done;){var m=d.value;h.push("".concat(m[0]," ").concat(m[1]))}}catch(b){f.e(b)}finally{f.f()}s.push("(".concat(h.join(", "),")"))}}catch(b){u.e(b)}finally{u.f()}return"POLYGON (".concat(s.join(", "),")")}return""}var yt=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).intervalHandle=void 0,a.lastPosition=void 0,a.positionChanged=void 0,a.intervalHandle=null,a.lastPosition=null,a.positionChanged=!1,a.handleMouseMove=a.handleMouseMove.bind(Object(ie.a)(a)),a.handleSelectedEntityChanged=a.handleSelectedEntityChanged.bind(Object(ie.a)(a)),a.handleNewEntityAdded=a.handleNewEntityAdded.bind(Object(ie.a)(a)),a.handleSplitLayerPosChange=a.handleSplitLayerPosChange.bind(Object(ie.a)(a)),a.handlePosDataUpdate=a.handlePosDataUpdate.bind(Object(ie.a)(a)),a.renderContextMenu=a.renderContextMenu.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"componentDidMount",value:function(){this.intervalHandle=window.setInterval(this.handlePosDataUpdate,n.POS_UPDATE_PERIOD)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.intervalHandle)}},{key:"handlePosDataUpdate",value:function(){this.positionChanged&&(this.props.dispatch(c.xc(this.lastPosition)),this.positionChanged=!1)}},{key:"handleMouseMove",value:function(e){var t=this.lastPosition;e!==t&&(e&&t&&e.longitude===t.longitude&&e.latitude===t.latitude||(this.props.dispatch(c.wc(e)),this.lastPosition=e,this.positionChanged=!0))}},{key:"handleSelectedEntityChanged",value:function(e){this.props.dispatch(c.dc(this.props.view.id,this.props.selectedLayer,e))}},{key:"handleNewEntityAdded",value:function(e){var t=this.newPlacemarkProperties(),n=Object(ze.e)(e,"".concat(B.i).concat(e.id),t);this.props.dispatch(c.wb(n))}},{key:"handleSplitLayerPosChange",value:function(e){this.props.dispatch(c.zc(this.props.view.id,e))}},{key:"renderContextMenu",value:function(e,t,n){var r=this;if(!e&&!n)return null;var o,i,l=n&&n.id;l&&l.startsWith(B.i)&&this.props.placemarks&&(o=this.props.placemarks.features.find((function(e){return e.id===l}))),o?i=vt(o.geometry):n?i=Object(ze.f)(n):e&&(i="POINT (".concat(e.longitude," ").concat(e.latitude,")"));var u=0,d=[];if(e){var p=this.newPlacemarkProperties(),h=c.xb(e.longitude,e.latitude,p);d.push(a.createElement(ue.MenuItem,{key:u,icon:"map-marker",text:"Place point marker here",onClick:function(){return r.props.dispatch(h)}})),u++}i&&(d.push(a.createElement(ue.MenuItem,{key:u,icon:"clipboard",text:"Copy geometry WKT",onClick:function(){return c.Hb(i)}})),u++);var f,m=this.props.operations;if(n&&m&&(i.startsWith("POINT ")?f=st.p:i.startsWith("POLYGON ")&&(f=st.q),f)){var b,v=!1,y=Object(g.a)(m);try{for(y.s();!(b=y.n()).done;){var E,O=b.value,_=void 0,C=Object(g.a)(O.inputs);try{for(C.s();!(E=C.n()).done;){var k=E.value,w=k.dataType;if(w===f||w===st.l){_=k;break}}}catch(S){C.e(S)}finally{C.f()}_&&function(){v||(d.push(a.createElement(ue.MenuDivider,{key:u})),v=!0,u++);var e=Object(s.a)({},_.name,{isValueUsed:!0,constantValue:i,resourceName:null}),t=c.Tb(O,e),n="".concat(O.name,"()");d.push(a.createElement(ue.MenuItem,{key:u,icon:"function",text:n,onClick:function(){return r.props.dispatch(t)}})),u++}()}}catch(S){y.e(S)}finally{y.f()}}return a.createElement(ue.Menu,null,d)}},{key:"newPlacemarkProperties",value:function(){return Object(d.a)({visible:!0},Object(m.b)(this.props.defaultPlacemarkStyle))}},{key:"render",value:function(){if(!this.props.hasWebGL)return Ae;var e,t=this.props.view,r=this.props.view.id,o=t.data.layers,i=this.props.placemarks,l=this.props.showLayerTextOverlay,c=this.props.workspace,s=c&&c.resources||Oe.a,u=null;if(c){var d=this.props.baseUrl,p=c.id;e=Object(ct.a)(o,s,i,d,p),u=this.props.selectedPlacemarkId}else e=Oe.b;var h,f=e.imageLayerDescriptors||Oe.a,m=e.vectorLayerDescriptors||Oe.a;(function(e){var t,n=Object(g.a)(e);try{for(n.s();!(t=n.n()).done;){if((t.value.splitMode||V.b)!==V.b)return!0}}catch(a){n.e(a)}finally{n.f()}return!1})(f)&&(h=t.data.layerSplitPosition);var b=function(e,t,n,a){var r=null;if(!t)return r;for(var o=0;o<e.length;o++){var i=e[o];if("VariableImage"===i.type&&i.visible){var l=Object(B.v)(a,i);r||((r=document.createElement("div")).id="CesiumGlobeOverlay-"+n,r.style.position="absolute",r.style["z-index"]=10,r.style["pointer-events"]="none",r.style.padding="1em",r.style["background-color"]="rgba(0, 0, 0, 0.25)");var c=void 0;c=l&&l.length?i.name+" at "+l.map((function(e){return e.join(" = ")})).join(", "):i.name;var s=document.createElement("div");s.style["font-size"]="1.4em",s.innerText=c,r.appendChild(s),r.style.top="0",r.style.width="100%"}}return r}(o,l,r,s);return a.createElement(lt,{id:"CesiumGlobe-"+t.id,debug:this.props.debugWorldView,externalObjectStore:this.props.externalObjectStore,selectedPlacemarkId:u,baseMapOptions:this.props.baseMapOptions,imageLayerDescriptors:f,vectorLayerDescriptors:m,splitLayerPosition:h,overlayHtml:b,onLayerSplitPosChange:this.handleSplitLayerPosChange,offlineMode:this.props.offlineMode,style:n.CESIUM_GLOBE_STYLE,onMouseMove:this.props.isDialogOpen?null:this.handleMouseMove,onSelectedEntityChanged:this.handleSelectedEntityChanged,onNewEntityAdded:this.handleNewEntityAdded,geometryToolType:this.props.newPlacemarkToolType,renderContextMenu:this.renderContextMenu})}}]),n}(a.Component);yt.CESIUM_GLOBE_STYLE={position:"relative",width:"100%",height:"100%",overflow:"hidden"},yt.POS_UPDATE_PERIOD=500;var gt=Object(o.b)((function(e,t){return{view:t.view,baseUrl:Oe.fc(e),operations:Oe.T(e),workspace:Oe.oc(e),offlineMode:Oe.P(e),placemarks:Oe.W(e),selectedLayer:Oe.rb(e),selectedLayerId:Oe.pb(e),selectedPlacemarkId:Oe.xb(e),baseMapOptions:Oe.k(e),isDialogOpen:Oe.H(e),showLayerTextOverlay:e.session.showLayerTextOverlay,debugWorldView:e.session.debugWorldView,hasWebGL:e.data.hasWebGL,externalObjectStore:Oe.y(e),newPlacemarkToolType:Oe.O(e),defaultPlacemarkStyle:Oe.w(e)}}))(yt);var Et=function(){function e(){Object(re.a)(this,e),this.listenersMap=void 0,this.listenersMap={},this.dispatchCommand=this.dispatchCommand.bind(this)}return Object(oe.a)(e,[{key:"addCommandListener",value:function(e,t){var n=this.listenersMap[e];n||(n=new Set,this.listenersMap[e]=n),n.add(t)}},{key:"removeCommandListener",value:function(e,t){var n=this.listenersMap[e];n&&(n.delete(t),0===n.size&&delete this.listenersMap[e])}},{key:"removeCommandListeners",value:function(e){delete this.listenersMap[e]}},{key:"dispatchCommand",value:function(e,t){var n=this.listenersMap[e];n&&n.forEach((function(n){n(e,t)}))}}]),e}(),Ot=function(){function e(t,n,a,r,o){var i=this;Object(re.a)(this,e),this.id=void 0,this.webSocket=void 0,this.commandSource=void 0,this.onMessage=void 0,this.parentElement=void 0,this.figureImageCanvas=void 0,this.rubberBandCanvas=void 0,this.imageObj=void 0,this.imageMode=void 0,this.waiting=void 0,this.lastKey=void 0,this.resizeTimer=void 0,this.lastSize=void 0,this.id=t,this.parentElement=a,this.commandSource=r,this.onMessage=o,this.imageMode="full",this.imageObj=new Image,this.lastSize={width:0,height:0},this.handleCommand=this.handleCommand.bind(this),this.processMessage=this.processMessage.bind(this),this.initCanvas(),this.waiting=!1,this.imageObj.onload=function(){var e=i.figureImageCanvas.getContext("2d");"full"===i.imageMode&&e.clearRect(0,0,i.figureImageCanvas.width,i.figureImageCanvas.height),e.drawImage(i.imageObj,0,0)},this.imageObj.onunload=function(){this.webSocket.removeEventListener("message",this.processMessage)},this.webSocket=new WebSocket(n),this.webSocket.onopen=function(){i.commandSource&&i.commandSource.addCommandListener(i.id,i.handleCommand),i.webSocket.addEventListener("message",i.processMessage);var e=!!i.webSocket.binaryType;e||console.warn("This browser does not support binary websocket messages. Figure update performance may be slow."),i.sendMessage("supports_binary",{value:e}),i.sendMessage("send_image_mode"),i.sendRefresh(),i.sendResize(),i.resizeTimer=window.setInterval((function(){var e=i.parentElement.clientWidth,t=i.parentElement.clientHeight,n=e>0&&t>0,a=i.lastSize.width!==e||i.lastSize.height!==t;n&&a&&(i.lastSize={width:e,height:t},i.sendResize(e,t))}),500)},this.webSocket.onclose=function(){i.commandSource&&i.commandSource.removeCommandListener(i.id,i.handleCommand),i.resizeTimer&&window.clearInterval(i.resizeTimer)}}return Object(oe.a)(e,[{key:"handleCommand",value:function(e,t){e===this.id?this.sendMessage("toolbar_button",t):console.warn("received invalid figure ID: expected #".concat(this.id,", got #").concat(e," for data ").concat(t))}},{key:"initCanvas",value:function(){var e=this,t=this.handleKeyboardEvent.bind(this);this.parentElement.onkeydown=_t("key_press",t),this.parentElement.onkeyup=_t("key_release",t),this.parentElement.onwheel=function(t){var n=t.deltaY<0?1:-1;e.handleMouseEvent(t,{name:"scroll",step:n})};var n=document.createElement("canvas");n.id="mpl-figure-image-"+this.id,n.setAttribute("style","left: 0; top: 0; z-index: 0; outline: 0"),this.figureImageCanvas=n;var a=document.createElement("canvas");a.id="mpl-rubber-band-"+this.id,a.setAttribute("style","position: absolute; left: 0; top: 0; z-index: 1;");var r=this.handleMouseEvent.bind(this);a.onmousedown=_t("button_press",r),a.onmouseup=_t("button_release",r),a.onmousemove=_t("motion_notify",r),a.onmouseenter=_t("figure_enter",r),a.onmouseleave=_t("figure_leave",r),a.getContext("2d").strokeStyle="#000000",this.rubberBandCanvas=a,this.parentElement.appendChild(n),this.parentElement.appendChild(a)}},{key:"resizeCanvas",value:function(e,t){this.figureImageCanvas.setAttribute("width",e),this.figureImageCanvas.setAttribute("height",t),this.rubberBandCanvas.setAttribute("width",e),this.rubberBandCanvas.setAttribute("height",t)}},{key:"sendResize",value:function(e,t){e=e||this.parentElement.clientWidth,t=t||this.parentElement.clientHeight,this.sendMessage("resize",{width:e,height:t})}},{key:"sendDrawMessage",value:function(){this.waiting||(this.waiting=!0,this.sendMessage("draw"))}},{key:"sendRefresh",value:function(){this.sendMessage("refresh")}},{key:"sendCanvasUpdated",value:function(){this.sendMessage("ack")}},{key:"sendMessage",value:function(e,t){var n=JSON.stringify(Object(d.a)(Object(d.a)({},t),{},{type:e,figure_id:this.id}));this.webSocket.send(n)}},{key:"processMessage",value:function(e){if(e.data instanceof Blob){var t=e.data;return this.imageObj.src&&(window.URL||window.webkitURL).revokeObjectURL(this.imageObj.src),this.imageObj.src=(window.URL||window.webkitURL).createObjectURL(t),this.sendCanvasUpdated(),void(this.waiting=!1)}if("string"===typeof e.data&&"data:image/png;base64"===e.data.slice(0,21))return this.imageObj.src=e.data,this.sendCanvasUpdated(),void(this.waiting=!1);var n=e.data,a=JSON.parse(n),r=a.type;try{var o=this["handle_"+r];if(o)try{o.bind(this)(a)}catch(i){console.error("Exception inside the 'handler_"+r+"' callback:",i,i.stack,a)}}catch(i){console.error("No handler for the '"+r+"' message type: ",a)}}},{key:"handle_resize",value:function(e){var t=e.size;t[0]===this.figureImageCanvas.width&&t[1]===this.figureImageCanvas.height||(this.resizeCanvas(t[0],t[1]),this.sendRefresh())}},{key:"handle_rubberband",value:function(e){var t=e.x0,n=this.figureImageCanvas.height-e.y0,a=e.x1,r=this.figureImageCanvas.height-e.y1;t=Math.floor(t)+.5,n=Math.floor(n)+.5,a=Math.floor(a)+.5,r=Math.floor(r)+.5;var o=Math.min(t,a),i=Math.min(n,r),l=Math.abs(a-t),c=Math.abs(r-n),s=this.rubberBandCanvas.getContext("2d");s.clearRect(0,0,this.figureImageCanvas.width,this.figureImageCanvas.height),s.strokeRect(o,i,l,c)}},{key:"handle_figure_label",value:function(e){}},{key:"handle_message",value:function(e){this.onMessage&&this.onMessage(e.message)}},{key:"handle_cursor",value:function(e){var t=e.cursor;this.rubberBandCanvas.style.cursor={0:"pointer",1:"default",2:"crosshair",3:"move"}[t]}},{key:"handle_draw",value:function(){this.sendDrawMessage()}},{key:"handle_image_mode",value:function(e){this.imageMode=e.mode}},{key:"handleMouseEvent",value:function(e,t){var n=t.name,a=t.step,r=function(e){var t;e.target?t=e.target:e.srcElement&&(t=e.srcElement);3===t.nodeType&&(t=t.parentNode);var n=document.body.getBoundingClientRect(),a=t.getBoundingClientRect(),r=a.left-n.left,o=a.top-n.top,i=e.pageX-r,l=e.pageY-o;return{x:i,y:l}}(e);"button_press"===n&&(this.figureImageCanvas.focus(),this.parentElement.focus());var o=r.x,i=r.y;return this.sendMessage(n,{x:o,y:i,button:e.button,step:a,guiEvent:Ct(e)}),e.preventDefault(),!1}},{key:"handleKeyboardEvent",value:function(e,t){var n=t.name;if("key_press"===n){if(e.which===this.lastKey)return;this.lastKey=e.which}"key_release"===n&&(this.lastKey=null);var a="";e.ctrlKey&&17!==e.which&&(a+="ctrl+"),e.altKey&&18!==e.which&&(a+="alt+"),e.shiftKey&&16!==e.which&&(a+="shift+"),a+="k",a+=e.which.toString(),this.sendMessage(n,{key:a,guiEvent:Ct(e)})}}]),e}();function _t(e,t){return function(n){t(n,{name:e})}}function Ct(e){return Object.keys(e).reduce((function(t,n){return"object"!==typeof e[n]&&(t[n]=e[n]),t}),{})}var kt=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(){return Object(re.a)(this,n),t.apply(this,arguments)}return Object(oe.a)(n,[{key:"propsToExternalObjectState",value:function(e,t){return{figureUpdateCount:e.figureUpdateCount}}},{key:"newContainer",value:function(e){var t=document.createElement("div");return t.setAttribute("id","mpl-figure-container-"+e),t.setAttribute("style","width: 100%; position: relative;"),this.props.figureHeight&&(t.style.height=this.props.figureHeight),this.props.debug&&console.log("MplFigureContainer.newContainer:",t),t}},{key:"newExternalObject",value:function(e,t){return new Ot(this.props.figureId,this.props.webSocketUrl,t,this.props.commandSource,this.props.onMessage)}},{key:"updateExternalObject",value:function(e,t,n,a,r){this.props.debug&&console.log("MplFigureContainer.updateExternalObject: ",e,t,n),t&&t.figureUpdateCount!==n.figureUpdateCount&&(e.sendRefresh(),e.sendResize())}}]),n}(Ye);function wt(e){var t;e.large||(t="bp3-small"),e.className&&""!==e.className&&(t="".concat(t," ").concat(e.className));var n=a.createElement(ue.AnchorButton,{className:t,onClick:e.onClick,disabled:e.disabled,icon:e.icon,intent:e.intent,style:e.style,text:e.text,active:e.active});return e.tooltipContent?a.createElement(ue.Tooltip,{content:e.tooltipContent,position:e.tooltipPosition||ue.PopoverPosition.AUTO},n):n}var St=new Et,jt=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).state={},a.handleFigureMessage=a.handleFigureMessage.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"handleFigureMessage",value:function(e){this.setState({message:e})}},{key:"render",value:function(){return a.createElement("div",{style:n.DIV_STYLE},a.createElement(kt,{figureId:this.props.figureId,figureUpdateCount:this.props.figureUpdateCount,figureHeight:this.props.figureHeight||"30em",id:this.props.id,debug:!1,webSocketUrl:this.props.webSocketUrl,style:n.CONTAINER_DIV_STYLE,commandSource:St,onMessage:this.handleFigureMessage}),a.createElement(It,{figureId:this.props.figureId,message:this.state.message,onCommand:St.dispatchCommand,onDownload:this.props.onDownload}))}}],[{key:"handleClose",value:function(e){St.removeCommandListeners(e)}}]),n}(a.Component);jt.DIV_STYLE={width:"100%",overflow:"auto"},jt.CONTAINER_DIV_STYLE={width:"100%",overflow:"hidden",padding:"0.2em 0.2em 0 0.2em"};var It=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;Object(re.a)(this,n),(a=t.call(this,e)).commands=void 0,a.commands=[{label:"Home",tooltip:"Reset original view",icon:"home",name:"home"},{label:"Back",tooltip:"Back to  previous view",icon:"chevron-left",name:"back"},{label:"Forward",tooltip:"Forward to next view",icon:"chevron-right",name:"forward"},{label:"Pan",tooltip:"Pan axes with left mouse, zoom with right",icon:"move",name:"pan"},{label:"Zoom",tooltip:"Zoom to rectangle",icon:"zoom-in",name:"zoom"},{label:"Save As",tooltip:"Save as image",icon:"download",name:"download"}];var r,o=Object(g.a)(a.commands);try{var i=function(){var e=r.value,t=e.name,n=void 0;n="download"===t?function(){a.props.onDownload(a.props.figureId,{name:t})}:function(){a.props.onCommand(a.props.figureId,{name:t})},e.callback=n};for(o.s();!(r=o.n()).done;)i()}catch(l){o.e(l)}finally{o.f()}return a}return Object(oe.a)(n,[{key:"render",value:function(){var e,t=[];for(var r in this.commands){var o=this.commands[r];if(o.name){var i=o.tooltip,l=o.icon,c=o.callback;t.push(a.createElement(wt,{key:r,tooltipContent:i,icon:l,onClick:c}))}}return this.props.message&&(e=a.createElement(ue.Tag,{className:"bp3-minimal"},this.props.message)),a.createElement("div",{style:n.DIV_STYLE},e,a.createElement("span",{style:{flex:"auto"}}),a.createElement(ue.ButtonGroup,null,t))}}]),n}(a.PureComponent);It.DIV_STYLE={display:"flex",alignItems:"center",padding:"0.2em"};var Pt=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onDownload=a.onDownload.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"onDownload",value:function(e){var t=Object(B.I)(this.props.baseUrl,this.props.workspaceId,e);this.props.dispatch(c.oc(t,e))}},{key:"render",value:function(){var e=this.props.view,t=this.props.workspaceId,n=this.getFigureResource();if(null===t||!n)return a.createElement(ue.Card,null,"Figure not found.");var r="MplFigurePanel-".concat(n.id,"-").concat(e.id);return a.createElement(jt,{key:r,id:r,figureId:n.id,figureUpdateCount:n.updateCount,figureName:n.name,webSocketUrl:Object(B.J)(this.props.mplWebSocketUrl,t,n.id),onDownload:this.onDownload})}},{key:"getFigureResource",value:function(){var e=this.props.view.data;return this.props.figureResources.find((function(t){return t.id===e.resourceId}))}}]),n}(a.Component);Pt.DIV_STYLE={width:"100%",height:"100%",overflowX:"hidden",overflowY:"auto"};var Dt=Object(o.b)((function(e,t){return{view:t.view,baseUrl:Oe.fc(e),workspaceId:Oe.mc(e),figureResources:Oe.z(e),mplWebSocketUrl:Oe.N(e)}}))(Pt),Lt=n(41),Tt=n(209);var At=Object(o.b)((function(e){return{webAPIServiceInfo:Oe.gc(e),webAPIServiceURL:Oe.hc(e)}}))((function(e){var t=e.webAPIServiceInfo,n=e.webAPIServiceURL;if(!t)return null;var r=t.autoStopInfo;if(!r)return null;var o=r.availableTime,i=r.remainingTime,l=r.inactivityTime;if(!o||!i||!l)return null;var c=Math.max(900,.75*o);if(!(i>1&&i<c))return null;var s=function(){try{(new Tt.a).getServiceInfo(n)}catch(e){console.error(e)}};return a.createElement(Lt.a,{isOpen:!0,title:"Service Shutdown Ahead",icon:"offline",noCancelButton:!0,confirmTitle:"Keep Alive",confirmIconName:"link",confirmTooltip:"Requests keeping the service available.",onCancel:s,onConfirm:s,canConfirm:function(){return!0},renderBody:function(){return a.createElement("div",null,a.createElement("p",null,"The Cate service will shut down soon due to inactivity since ",Rt(l),". After the shutdown you will need to reconnect/login first. Unsaved changes will be lost."),a.createElement("p",null,"The remaining time is ",a.createElement("strong",null,Rt(i)),"."),a.createElement("p",null,'Press "Keep Alive" to prevent the shutdown.'))}})}));function Rt(e){var t=Math.floor(e/3600),n=e-3600*t,a=Math.floor(n/60),r=Math.round(n-60*a),o=[];return t>0&&o.push("".concat(t," hour").concat(1!==t?"s":"")),a>0&&o.push("".concat(a," minute").concat(1!==a?"s":"")),o.push("".concat(r," second").concat(1!==r?"s":"")),o.join(", ")}var Nt=n(159),xt=n(403),Mt=n(782);var Vt=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(){return Object(re.a)(this,n),t.apply(this,arguments)}return Object(oe.a)(n,[{key:"componentWillMount",value:function(){var e=this.props.viewData;e.dataRows||e.isLoading||e.error||this.props.dispatch(c.Wb(this.props.viewId,e.resName,e.varName))}},{key:"render",value:function(){return a.createElement("div",{style:n.TABLE_CONTAINER_STYLE},this.renderDataTable())}},{key:"renderDataTable",value:function(){var e,t=this.props.viewData;if(f.a(t),t.isLoading)return a.createElement("div",{style:n.LOADING_CONTAINER_STYLE},a.createElement(ue.Spinner,{className:"bp3-large"}),a.createElement("p",null,"Loading table data..."));if(t.error)return e=t.error,a.createElement(ue.NonIdealState,{title:"Loading table data failed",description:a.createElement("span",null,"".concat(e)),icon:"circle"});var r=t.dataRows;if(!r||!r.length)return Fe;var o=r[0],i=Object.getOwnPropertyNames(o).filter((function(e){return""!==e})),l=function(e,t){return r[e][i[t]]},c=[];for(var s in i){c.push(a.createElement(xt.a,{key:s,name:i[s],cellRenderer:function(e,t){return a.createElement(Nt.a,null,l(e,t))}}))}return a.createElement(Mt.a,{numRows:r.length,enableRowHeader:!0,getCellClipboardData:l,children:c})}}]),n}(a.PureComponent);Vt.TABLE_CONTAINER_STYLE={width:"100%",height:"100%",overflow:"hidden",display:"flex",flexDirection:"column"},Vt.LOADING_CONTAINER_STYLE={width:"100%",height:"100%",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"};var Bt=Object(o.b)((function(e,t){return{viewId:t.view.id,viewData:t.view.data,resources:Oe.bb(e),resNames:Oe.ab(e)}}))(Vt),Wt=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;if(Object(re.a)(this,n),(a=t.call(this,e)).lastPosition=null,a.bodyEventListeners=void 0,!e.onChange)throw Error("onChange property must be provided");return a.bodyEventListeners=[["mousemove",a.onBodyMouseMove.bind(Object(ie.a)(a))],["mouseup",a.onBodyMouseUp.bind(Object(ie.a)(a))],["onmouseenter",a.onBodyMouseEnter.bind(Object(ie.a)(a))],["onmouseleave",a.onBodyMouseLeave.bind(Object(ie.a)(a))]],a}return Object(oe.a)(n,[{key:"onMouseDown",value:function(e){this.isButton1Pressed(e)?(this.lastPosition=this.getCurrentPosition(e),this.removeBodyMouseListeners(),this.addBodyMouseListeners()):this.lastPosition=null}},{key:"onBodyMouseMove",value:function(e){if(null!==this.lastPosition&&this.isButton1Pressed(e)){var t=this.getCurrentPosition(e),n=t-this.lastPosition;this.lastPosition=t,0!==n&&this.props.onChange(n)}}},{key:"onBodyMouseUp",value:function(e){this.endDragging()}},{key:"onBodyMouseEnter",value:function(e){this.endDragging()}},{key:"onBodyMouseLeave",value:function(e){this.endDragging()}},{key:"isButton1Pressed",value:function(e){return 0===e.button&&1===e.buttons}},{key:"getCurrentPosition",value:function(e){return"hor"===this.props.dir?e.screenX:e.screenY}},{key:"endDragging",value:function(){this.removeBodyMouseListeners(),this.lastPosition=null}},{key:"addBodyMouseListeners",value:function(){this.bodyEventListeners.forEach((function(e){return document.body.addEventListener(e[0],e[1])}))}},{key:"removeBodyMouseListeners",value:function(){this.bodyEventListeners.forEach((function(e){return document.body.removeEventListener(e[0],e[1])}))}},{key:"componentWillUnmount",value:function(){this.removeBodyMouseListeners()}},{key:"render",value:function(){var e="hor"===this.props.dir?"cate-splitter-hor":"cate-splitter-ver";return a.createElement("div",{className:e,onMouseDown:this.onMouseDown.bind(this)})}}]),n}(a.PureComponent),Ft=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).handleSplitDelta=a.handleSplitDelta.bind(Object(ie.a)(a)),a.state={size:e.initialSize},a}return Object(oe.a)(n,[{key:"handleSplitDelta",value:function(e){var t=this;this.setState((function(n){var a=n.size,r=a+e;return t.props.onChange&&t.props.onChange(r,a),{size:r}}))}},{key:"render",value:function(){var e,t,n;if("hor"===this.props.dir){var r=this.state.size;e="cate-split-pane-hor",t={flex:"none",width:r,height:"100%"},n={flex:"auto",width:"calc(100% - ".concat(r+4,"px)"),height:"100%"}}else{var o=this.state.size;e="cate-split-pane-ver",t={flex:"none",width:"100%",height:o},n={flex:"auto",width:"100%",height:"calc(100% - ".concat(o+4,"px)")}}return a.createElement("div",{className:e},a.createElement("div",{style:t},this.props.children[0]),a.createElement(Wt,{dir:this.props.dir,onChange:this.handleSplitDelta}),a.createElement("div",{style:n},this.props.children[1]))}}]),n}(a.PureComponent),Ut=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).handleSwitchChange=a.handleSwitchChange.bind(Object(ie.a)(a)),a.handleContentHeightChange=a.handleContentHeightChange.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"handleSwitchChange",value:function(e){this.props.onShowDetailsChange(e.target.checked)}},{key:"handleContentHeightChange",value:function(e,t){this.props.onContentHeightChange&&this.props.onContentHeightChange(e)}},{key:"render",value:function(){var e,t=this.props.children[0],n=this.props.children[1],r=a.createElement(ue.Switch,{checked:this.props.showDetails,style:{alignSelf:"flex-end",marginBottom:0},label:"Details",disabled:!n,onChange:this.handleSwitchChange}),o=this.props.showDetails?n:null;e=this.props.actionComponent?a.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},r,a.createElement("span",{style:{flex:"auto"}}),this.props.actionComponent):r;var i=a.createElement("div",null,e,o);return this.props.isSplitPanel?a.createElement(Ft,{dir:"ver",initialSize:this.props.contentHeight||300,onChange:this.handleContentHeightChange},t,i):a.createElement("div",null,t,i)}}]),n}(a.PureComponent),Gt=n(157),Yt=function(e){var t=e.dataSource,n=e.style,r=Object(B.y)(t),o=r.catalogUrl,i=r.infoUrl;return o||i?a.createElement("div",{style:Object(d.a)({display:"flex",justifyContent:"flex-end"},n)},o&&a.createElement(ue.AnchorButton,{href:o,target:"_blank",style:{float:"right",margin:4}},"Catalogue"),i&&a.createElement(ue.AnchorButton,{href:i,target:"_blank",style:{float:"right",margin:4}},"More Info")):null},Ht=n(93),Kt=n(404),zt=n.n(Kt),qt=n(405),Jt=n.n(qt),Xt={fontFamily:"Source Code Pro, Consolas, monospace",color:ue.Colors.LIGHT_GRAY1},Zt={em:function(e){e.node;var t=Object(Ht.a)(e,["node"]);return a.createElement("em",Object.assign({className:"user-selectable"},t))},li:function(e){e.node;var t=Object(Ht.a)(e,["node"]);return a.createElement("li",Object.assign({className:"user-selectable"},t))},p:function(e){e.node;var t=Object(Ht.a)(e,["node"]);return a.createElement("p",Object.assign({className:"user-selectable"},t))},span:function(e){e.node;var t=Object(Ht.a)(e,["node"]);return a.createElement("span",Object.assign({className:"user-selectable"},t))},div:function(e){e.node;var t=Object(Ht.a)(e,["node"]);return a.createElement("div",Object.assign({className:"user-selectable"},t))},code:function(e){e.node;var t=Object(Ht.a)(e,["node"]);return a.createElement("code",Object.assign({className:"user-selectable",style:Xt},t))},pre:function(e){e.node;var t=Object(Ht.a)(e,["node"]);return a.createElement("pre",Object.assign({className:"user-selectable",style:Xt},t))}},Qt=function(e){var t=e.source;return a.createElement(zt.a,{remarkPlugins:[Jt.a],components:Zt,linkTarget:"_blank"},t)},$t={width:"100%",height:"100%",overflow:"auto"};function en(e){return a.createElement("div",{style:$t},e.children)}var tn={display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-around"},nn=function(e){var t,n,r=e.dataSource;if(!r)return null;var o=r.metaInfo;o&&(t=Object.keys(o).filter((function(e){return"data_vars"!==e&&"coords"!==e})),o.data_vars&&(n=o.data_vars));var i=[an(r),rn(n),on(o,t),ln(o)];return a.createElement(ue.Tabs,{id:"dsDetails",renderActiveTabPanelOnly:!0},i.map((function(e){return a.createElement(ue.Tab,{key:e.id,id:e.id,title:e.title,panel:e.element})})))};function an(e){var t,n,r,o=e.metaInfo;if(o){if(Array.isArray(o.bbox)){var i=Object(te.a)(o.bbox,4),l=i[0],c=i[1],s=i[2],u=i[3];t=a.createElement("div",null,a.createElement("h5",null,"Spatial coverage"),a.createElement("table",null,a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null),a.createElement("td",{className:"user-selectable"},u,"\xb0"),a.createElement("td",null)),a.createElement("tr",null,a.createElement("td",{className:"user-selectable"},l,"\xb0"),a.createElement("td",null),a.createElement("td",{className:"user-selectable"},s,"\xb0")),a.createElement("tr",null,a.createElement("td",null),a.createElement("td",{className:"user-selectable"},c,"\xb0"),a.createElement("td",null)))),a.createElement("br",null))}if(e.metaInfo&&e.metaInfo.time_range){var d=Object(te.a)(e.metaInfo.time_range,2),p=d[0],h=d[1];p||h?p?h||(h="today"):p="unknown":p=h="unknown",n=a.createElement("div",null,a.createElement("h5",null,"Temporal coverage"),a.createElement("table",null,a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"Start"),a.createElement("td",{className:"user-selectable"},p)),a.createElement("tr",null,a.createElement("td",null,"End"),a.createElement("td",{className:"user-selectable"},h)))),a.createElement("br",null))}o.abstract&&(r=a.createElement("div",null,a.createElement("h5",null,"Summary"),a.createElement(Qt,{source:o.abstract})))}return{title:"Abstract",id:"abstract",element:t||n||r?a.createElement(en,null,a.createElement(ue.Card,null,a.createElement(Yt,{dataSource:e}),a.createElement("div",{style:tn},t,n),r)):a.createElement(ue.Card,null,a.createElement(Yt,{dataSource:e}),a.createElement("p",null,"No abstract available."))}}function rn(e){var t;if(e&&e.length>0){t=a.createElement(Mt.a,{numRows:e.length,enableRowHeader:!1,getCellClipboardData:function(e,t){console.error("not implemented: getCellClipboardData: ",e,t)}},a.createElement(xt.a,{name:"Name",cellRenderer:function(t){var n=e[t];return a.createElement(Nt.a,{tooltip:n.long_name},a.createElement(Gt.a,{className:"user-selectable"},n.name))}}),a.createElement(xt.a,{name:"Units",cellRenderer:function(t){var n=e[t];return a.createElement(Nt.a,null,a.createElement(Gt.a,{className:"user-selectable"},n.units||"-"))}}))}else t=a.createElement(ue.Card,null,"No information about variables available.");return{title:"Variables",id:"var",element:t}}function on(e,t){var n;if(e&&t){n=a.createElement(Mt.a,{numRows:t.length,enableRowHeader:!1,getCellClipboardData:function(e,t){console.error("not implemented: getCellClipboardData: ",e,t)}},a.createElement(xt.a,{name:"Key",cellRenderer:function(e){var n=t[e];return a.createElement(Nt.a,null,a.createElement(Gt.a,null,n))}}),a.createElement(xt.a,{name:"Value",cellRenderer:function(n){var r=t[n];return a.createElement(Nt.a,null,a.createElement(Gt.a,null,e[r]))}}))}else n=a.createElement(ue.Card,null,"No global meta-information available.");return{title:"Meta-Info",id:"meta",element:n}}function ln(e){return{title:"Licences",id:"licences",element:e&&e.licences?a.createElement("div",null,a.createElement(Qt,{source:e.licences})):a.createElement(ue.Card,null,"No license information available.")}}var cn=n(406),sn={display:"flex",alignItems:"flex-start"},un={color:ue.Colors.BLUE5,fontSize:"0.8em"},dn={marginRight:4},pn={color:ue.Colors.GREEN4,fontSize:"0.8em",marginLeft:4},hn={width:32,height:32,flex:"none",marginRight:6,borderRadius:16,textAlign:"center",color:"white",display:"flex",justifyContent:"center",alignItems:"center"},fn=function(e){var t,n,r=e.dataSource,o=e.showDataSourceIDs,i=r.metaInfo,l=function(e){var t,n,a=e.id.toLowerCase();if(a.startsWith("esacci.")){var r=a.split(".",2);r.length>1&&(t=r[1])}if(!t&&a.startsWith("esacci-")){var o=a.split("-",2);o.length>1&&(t=o[1])}t||(t=a);var i=cn.mappings[t];i&&(t=i);var l,c=t&&cn.ecvs[t];c&&(l=cn.colors[c.color]||c.color,n=c.label||n);l||(l=cn.colors.default||"#0BB7A0");n||(n=t&&t.substr(0,3).toUpperCase()||"?");return{backgroundColor:l,label:n}}(r),c=l.backgroundColor,s=l.label,u=a.createElement("div",{style:Object(d.a)(Object(d.a)({},hn),{},{backgroundColor:c})},s),p=r.title||i&&i.title;return p&&p!==r.id||(p=function(e){var t=e.id.replace(/\./g," ").replace(/-/g," ").replace(/_/g,"-");if(t.startsWith("esacci "))return t.substr("esacci ".length);if(t.startsWith("ESACCI "))return t.substr("ESACCI ".length);return t}(r)),!Object(B.o)(r)&&(t=a.createElement(ue.Icon,{icon:"warning-sign",intent:ue.Intent.WARNING,iconSize:16,style:dn})),r.dataType&&(n=a.createElement("span",{style:pn},r.dataType)),a.createElement("div",{style:sn},u,o?a.createElement("div",null,a.createElement("div",{className:"user-selectable"},t,p,n),a.createElement("div",{className:"user-selectable",style:un},r.id)):a.createElement("span",{className:"user-selectable"},t,p,n))};var mn=n(46),bn=function(e){var t=e.dataSources,n=e.selectedDataSourceId,r=e.setSelectedDataSourceId,o=e.showDataSourceIDs,i=e.doubleClickAction;return a.createElement(en,null,a.createElement(mn.a,{key:"DataSourcesList-"+o,items:t,getItemKey:function(e){return e.id},renderItem:function(e){return a.createElement(fn,{dataSource:e,showDataSourceIDs:o})},selectionMode:mn.b.SINGLE,selection:n,onItemDoubleClick:i,onSelection:function(e){e.length>0?r(e[0]):r(null)}}))},vn=function(e){var t,n=e.dataSource;return t=e.isSandboxedMode?a.createElement("p",null,"This data source cannot be opened directly from its data store. You may",a.createElement("ol",null,a.createElement("li",null,"Download it manually to your computer;"),a.createElement("li",null,"Upload it using ",a.createElement("strong",null,"Files / Upload Files"),";"),a.createElement("li",null,"Use one of the available ",a.createElement("code",null,"read_xxx()"),' operations to open the uploaded data. "xxx" is determined by the type and format of the data.'))):a.createElement("p",null,"This data source cannot be opened directly from its data store. You may",a.createElement("ol",null,a.createElement("li",null,"Download it manually to your computer;"),a.createElement("li",null,"Use one of the available ",a.createElement("code",null,"read_xxx()"),' operations to open the downloaded data. "xxx" is determined by the type and format of the data.'))),a.createElement("div",null,a.createElement(ue.H5,null,"Manual intervention required"),t,a.createElement(Yt,{dataSource:n,style:{marginTop:8}}))},yn=n(61);var gn=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).state={dataSourceName:"",filePathPattern:""},a.onCancel=a.onCancel.bind(Object(ie.a)(a)),a.onConfirm=a.onConfirm.bind(Object(ie.a)(a)),a.canConfirm=a.canConfirm.bind(Object(ie.a)(a)),a.renderBody=a.renderBody.bind(Object(ie.a)(a)),a.onDataSourceNameChange=a.onDataSourceNameChange.bind(Object(ie.a)(a)),a.onFilePathPatternChange=a.onFilePathPatternChange.bind(Object(ie.a)(a)),a.showSelectDirectoryDialog=a.showSelectDirectoryDialog.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.setState({dataSourceName:"",filePathPattern:""})}},{key:"onCancel",value:function(){this.props.dispatch(c.Pb(n.DIALOG_ID))}},{key:"canConfirm",value:function(){return!!this.state.dataSourceName&&!!this.state.filePathPattern}},{key:"onConfirm",value:function(){this.props.dispatch(c.Pb(n.DIALOG_ID,this.state)),this.props.dispatch(c.vb(this.state.dataSourceName,this.state.filePathPattern))}},{key:"onDataSourceNameChange",value:function(e){this.setState({dataSourceName:e.target.value})}},{key:"onFilePathPatternChange",value:function(e){this.setState({filePathPattern:e.target.value})}},{key:"showSelectDirectoryDialog",value:function(){var e=this,t={title:"Select Directory",buttonLabel:"Select",defaultPath:""!==this.state.filePathPattern?Object(yn.c)(this.state.filePathPattern):void 0};this.props.dispatch(c.Xc(t,(function(t){t&&e.setState({filePathPattern:t+"/*.nc"})})))}},{key:"render",value:function(){var e=this.props.isOpen;return e?a.createElement(Lt.a,{isOpen:e,title:"Add file data source",icon:"add",confirmTitle:"Add",confirmIconName:"add",confirmTooltip:"Add file data source.",onCancel:this.onCancel,canConfirm:this.canConfirm,onConfirm:this.onConfirm,renderBody:this.renderBody}):null}},{key:"renderBody",value:function(){return this.props.isOpen?a.createElement("div",null,a.createElement("p",null,"Define a new file data source using a file path pattern."),a.createElement("p",{style:{marginTop:"1em"}},"Name:"),a.createElement(ue.InputGroup,{type:"text",style:{width:"100%"},value:this.state.dataSourceName,onChange:this.onDataSourceNameChange}),a.createElement("p",{style:{marginTop:"1em"}},"Path pattern",a.createElement("span",{className:"bp3-text-muted"},' (can contain wildcards like "*" or "?")'),":"),a.createElement(ue.ControlGroup,{style:{flexGrow:1,width:"100%"}},a.createElement(ue.InputGroup,{type:"text",fill:!0,value:this.state.filePathPattern,onChange:this.onFilePathPatternChange}),a.createElement(ue.AnchorButton,{intent:ue.Intent.PRIMARY,style:{flex:"none"},onClick:this.showSelectDirectoryDialog},"..."))):null}}]),n}(a.Component);gn.DIALOG_ID="addDatasetDialog";var En=Object(o.b)((function(e){return{isOpen:Oe.x(gn.DIALOG_ID)(e).isOpen}}))(gn),On=n(92);function _n(e){return new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().slice(0,10)}function Cn(e,t){if(e&&!t){var n=e.lastIndexOf(":");n>=1&&(e=e.substr(0,n));var a=e.lastIndexOf(".");a>=0&&(e=e.substr(a+1))}return e}var kn=n(89),wn=n(66),Sn=n(52),jn=[new Date("1980-01-01"),new Date(Date.now())],In=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(){return Object(re.a)(this,n),t.apply(this,arguments)}return Object(oe.a)(n,[{key:"parseValue",value:function(e){return Pn(e,this.props.nullable)}},{key:"formatValue",value:function(e){return Dn(e)}},{key:"validateValue",value:function(e){Object(kn.a)(Object(wn.a)(n.prototype),"validateValue",this).call(this,e),Ln(e,this.props.nullable,this.props.min,this.props.max)}}]),n}(Sn.a);function Pn(e,t,n){if(!e||""===e.trim()){if(t)return null;throw new Error("Date must be given.")}var a;if(!/^\d\d\d\d-\d\d-\d\d$/.test(e.trim()))throw new Error("Date not valid: >"+e+"<");try{a=Date.parse(e.trim())}catch(r){throw new Error("Invalid ".concat(n||"date","."))}return new Date(a)}function Dn(e){return Object(v.g)(e)?"":_n(e)}function Ln(e,t,n,a,r){if(e){if(n&&e.valueOf()<n.valueOf())throw new Error("".concat(r||"Date"," must not be before ").concat(Dn(n),"."));if(a&&e.valueOf()>a.valueOf())throw new Error("".concat(r||"Date"," must not be after ").concat(Dn(a),"."))}else if(!t)throw Error("Date value expected.")}In.defaultProps={uncontrolled:!0,placeholder:"YYYY-MM-DD"};var Tn=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(){return Object(re.a)(this,n),t.apply(this,arguments)}return Object(oe.a)(n,[{key:"parseValue",value:function(e){return function(e,t){if(!e||""===e.trim()){if(t)return null;throw new Error("Date range must be given.")}var n=e.split(",");if(2!==n.length||""===n[0].trim()||""===n[1].trim())throw new Error("Invalid date range.");var a=Pn(n[0],!0,"first date"),r=Pn(n[1],!0,"second date");if(!a&&!r)return null;return[a,r]}(e,this.props.nullable)}},{key:"formatValue",value:function(e){return function(e){if(Object(v.g)(e))return"";var t=e[0],n=e[1];if(!t&&!n)return"";return Dn(t)+","+Dn(n)}(e)}},{key:"validateValue",value:function(e){Object(kn.a)(Object(wn.a)(n.prototype),"validateValue",this).call(this,e),An(e,this.props.nullable,this.props.min,this.props.max)}}]),n}(Sn.a);function An(e,t,n,a){if(e){var r=e[0],o=e[1];if(Ln(r,t,n,a,"First date"),Ln(o,t,n,a,"Second date"),r&&o&&r.valueOf()>o.valueOf())throw new Error("First date must not be after second date.")}else if(!t)throw Error("Date range value expected.")}Tn.defaultProps={uncontrolled:!0,placeholder:"YYYY-MM-DD, YYYY-MM-DD",size:24};var Rn={wordWrap:"break-word"},Nn=function(e){var t=e.label,n=e.longId;return a.createElement(a.Fragment,null,a.createElement("p",null,t),a.createElement("div",{style:Rn},a.createElement("strong",null,n)))},xn=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).handleNumericInputChange=a.handleNumericInputChange.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"parseValue",value:function(e){if(!e||""===e.trim())return null;var t=parseFloat(e);if(isNaN(t)&&"nan"!==e.toLowerCase())throw new Error("Please enter a valid number.");return t}},{key:"formatValue",value:function(e){return Object(v.g)(e)?"":e.toString()}},{key:"validateValue",value:function(e){Object(kn.a)(Object(wn.a)(n.prototype),"validateValue",this).call(this,e),Mn(e,this.props.nullable,this.props.min,this.props.max,this.props.isInt)}},{key:"handleNumericInputChange",value:function(e,t){this.setValueAndTextValue(e,t)}},{key:"render",value:function(){return a.createElement(ue.NumericInput,{value:this.getTextValue(),onValueChange:this.handleNumericInputChange,onBlur:this.handleBlur,onKeyPress:this.handleKeyPress,style:this.props.style,intent:this.getError()?ue.Intent.DANGER:ue.Intent.NONE,min:this.props.min,max:this.props.max,size:this.props.size,minorStepSize:this.props.isInt?1:.1,selectAllOnFocus:!0})}}]),n}(Sn.a);function Mn(e,t,n,a,r){if(Object(v.g)(e)){if(!t)throw Error("Numeric value expected")}else{if(!Object(v.d)(e))throw new Error("Value must be a number.");if(r&&e!==Math.floor(e))throw new Error("Value must be an integer.");if(Object(v.d)(n)&&e<n)throw new Error("Value must be >= ".concat(this.props.min,"."));if(Object(v.d)(a)&&e>a)throw new Error("Value must be <= ".concat(this.props.max,"."))}}var Vn={west:{value:-180},south:{value:-90},east:{value:180},north:{value:90}},Bn=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onEastChange=a.onEastChange.bind(Object(ie.a)(a)),a.onSouthChange=a.onSouthChange.bind(Object(ie.a)(a)),a.onWestChange=a.onWestChange.bind(Object(ie.a)(a)),a.onNorthChange=a.onNorthChange.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"onWestChange",value:function(e){this.props.onChange(Object(d.a)(Object(d.a)({},this.props.value),{},{west:e}))}},{key:"onEastChange",value:function(e){this.props.onChange(Object(d.a)(Object(d.a)({},this.props.value),{},{east:e}))}},{key:"onNorthChange",value:function(e){this.props.onChange(Object(d.a)(Object(d.a)({},this.props.value),{},{north:e}))}},{key:"onSouthChange",value:function(e){this.props.onChange(Object(d.a)(Object(d.a)({},this.props.value),{},{south:e}))}},{key:"render",value:function(){var e=this.props.value;return a.createElement("div",null,a.createElement("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"flex-start",padding:2}},a.createElement("div",{style:{flexGrow:0,width:"14em"}},"Lon. from"),a.createElement("div",{style:{flexGrow:1,width:"100%"}},this.renderField(e&&e.west||null,-180,180,this.onWestChange)),a.createElement("div",{style:{flexGrow:0,width:"4em"}}," to"),a.createElement("div",{style:{flexGrow:1,width:"100%"}},this.renderField(e&&e.east||null,-180,180,this.onEastChange))),a.createElement("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"flex-start",padding:2}},a.createElement("div",{style:{flexGrow:0,width:"14em"}},"Lat. from"),a.createElement("div",{style:{flexGrow:1,width:"100%"}},this.renderField(e&&e.south||null,-90,90,this.onSouthChange)),a.createElement("div",{style:{flexGrow:0,width:"4em"}},"to"),a.createElement("div",{style:{flexGrow:1,width:"100%"}},this.renderField(e&&e.north||null,-90,90,this.onNorthChange))))}},{key:"renderField",value:function(e,t,r,o){return a.createElement(xn,{value:e,style:n.NUMBER_FIELD_STYLE,min:t,max:r,size:10,onChange:o,disabled:this.props.disabled,nullable:!0,uncontrolled:this.props.uncontrolled})}}]),n}(a.PureComponent);Bn.NUMBER_FIELD_STYLE={textAlign:"right"};var Wn=n(49),Fn={color:"rgba(0,255,0,0.8)",fontSize:"0.8em"},Un={width:"15em"},Gn=function(e){var t=e.label,n=e.units,r=e.dataType,o=e.fullyQualified,i=e.tooltipText,l=e.em,c=e.style,s=t,u=Cn(r,o),d=n&&""!==n?" (".concat(n,")"):"",p=a.createElement("span",null,l?a.createElement("em",null,s):s," ",d," ",a.createElement("span",{style:Fn},u," "));return i&&""!==i&&(p=a.createElement(ue.Tooltip,{content:a.createElement("div",{style:Un},i),position:"top"},p)),a.createElement("span",{style:c},p)},Yn=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onSelection=a.onSelection.bind(Object(ie.a)(a)),a.onConfirm=a.onConfirm.bind(Object(ie.a)(a)),a.renderBody=a.renderBody.bind(Object(ie.a)(a)),a.state={value:a.props.value},a}return Object(oe.a)(n,[{key:"onSelection",value:function(e){this.setState({value:e})}},{key:"onConfirm",value:function(){this.props.onConfirm(this.state.value)}},{key:"render",value:function(){return a.createElement(Lt.a,{isOpen:this.props.isOpen,title:this.props.multiSelect?"Select Variables":"Select Variable",icon:"variable",onConfirm:this.onConfirm,onCancel:this.props.onCancel,renderBody:this.renderBody})}},{key:"renderBody",value:function(){if(!this.props.isOpen)return null;var e=this.props.resource.variables;return e?a.createElement(en,null,a.createElement("p",null,this.props.multiSelect?"Select one or more the variables:":"Select variable:"),a.createElement(mn.a,{items:e,getItemKey:n.getVariableItemKey,renderItem:n.renderVariableItem,selectionMode:this.props.multiSelect?mn.b.MULTIPLE:mn.b.SINGLE,selection:this.state.value,style:{height:"20em"},onSelection:this.onSelection,onItemDoubleClick:this.state.value?this.onConfirm:null})):a.createElement("p",null,'Resource "'.concat(this.props.resource.name,'" does not seem to have any variables.'))}}],[{key:"getVariableItemKey",value:function(e){return e.name}},{key:"renderVariableItem",value:function(e){var t=e.dimNames?"".concat(e.dataType,"[").concat(e.dimNames,"]"):"".concat(e.dataType);return a.createElement("div",null,a.createElement(Gn,{label:e.name,dataType:t,units:e.units,tooltipText:e.attributes&&e.attributes.long_name}))}}]),n}(a.Component),Hn=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onChange=a.onChange.bind(Object(ie.a)(a)),a.validate=a.validate.bind(Object(ie.a)(a)),a.state={isDetailsEditorOpen:!1},a}return Object(oe.a)(n,[{key:"onChange",value:function(e){this.props.onChange(this.props.input,e)}},{key:"validate",value:function(e){!function(e,t,n,a){if(!e||""===e.trim()){if(!t)throw new Error(n?"One or more variable names expected.":"Variable name expected.");return}var r=e.split(",");if(n){var o,i=Object(g.a)(r);try{for(i.s();!(o=i.n()).done;){if(""===o.value.trim())throw new Error("Value must be a comma-separated list of variable names.")}}catch(d){i.e(d)}finally{i.f()}}else{if(1!==r.length)throw new Error("Value must be a single variable name.");if(""===r[0].trim())throw new Error("Value must be a variable name.")}if(a&&a.variables){var l,c=new Set(a.variables.map((function(e){return e.name}))),s=Object(g.a)(r);try{for(s.s();!(l=s.n()).done;){var u=l.value;if(!c.has(u))throw new Error('"'.concat(u,'" is not a name of any variable in resource ').concat(a.name,"."))}}catch(d){s.e(d)}finally{s.f()}}}(e,this.props.input.nullable,this.props.multi,this.props.resource)}},{key:"render",value:function(){var e=this,t=Object(Sn.c)(this.props.value),r=""!==t?t.split(",").map((function(e){return e.trim()})):[],o=this.props.resource&&this.props.resource.variables&&this.props.resource.variables.length;return a.createElement(ue.ControlGroup,{fill:!0,style:n.DIV_STYLE},a.createElement(Wn.a,{value:this.props.value,validator:this.validate,placeholder:this.props.multi?"Enter variable names, separated by comma":"Enter variable name",onChange:this.onChange,nullable:this.props.input.nullable,style:n.TEXT_FIELD_STYLE}),a.createElement(ue.AnchorButton,{intent:ue.Intent.PRIMARY,onClick:function(){return e.setState({isDetailsEditorOpen:!0})},disabled:!o,style:n.BUTTON_STYLE},"..."),a.createElement(Yn,{isOpen:this.state.isDetailsEditorOpen,resource:this.props.resource,multiSelect:this.props.multi,value:r,onConfirm:function(t){var n=t?t.join(", "):null;e.setState({isDetailsEditorOpen:!1}),e.onChange({textValue:n,value:n})},onCancel:function(){e.setState({isDetailsEditorOpen:!1})}}))}}]),n}(a.Component);Hn.DIV_STYLE={display:"flex",justifySelf:"stretch"},Hn.TEXT_FIELD_STYLE={flexGrow:1},Hn.BUTTON_STYLE={flexGrow:0};var Kn={marginTop:8,marginBottom:8},zn=a.createElement(ue.Icon,{icon:On.a.WARNING_SIGN,intent:ue.Intent.WARNING}),qn=a.createElement(ue.Icon,{icon:On.a.ERROR,intent:ue.Intent.DANGER}),Jn=a.createElement(ue.Icon,{icon:On.a.ISSUE,intent:ue.Intent.PRIMARY}),Xn={marginTop:4,marginBottom:4},Zn=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onHasTimeConstraintChange=a.onHasTimeConstraintChange.bind(Object(ie.a)(a)),a.onDateRangeChange=a.onDateRangeChange.bind(Object(ie.a)(a)),a.onHasRegionConstraintChange=a.onHasRegionConstraintChange.bind(Object(ie.a)(a)),a.onRegionChange=a.onRegionChange.bind(Object(ie.a)(a)),a.onHasVariablesConstraintChange=a.onHasVariablesConstraintChange.bind(Object(ie.a)(a)),a.onVariableNamesChange=a.onVariableNamesChange.bind(Object(ie.a)(a)),a.onMakeLocalSelectedChange=a.onMakeLocalSelectedChange.bind(Object(ie.a)(a)),a.onMakeLocalDataSourceIdChange=a.onMakeLocalDataSourceIdChange.bind(Object(ie.a)(a)),a.onOpenDatasetResourceNameChange=a.onOpenDatasetResourceNameChange.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"onDateRangeChange",value:function(e){this.props.onChange(Object(d.a)(Object(d.a)({},this.props.options),{},{dateRange:e}))}},{key:"onRegionChange",value:function(e){this.props.onChange(Object(d.a)(Object(d.a)({},this.props.options),{},{region:e}))}},{key:"onHasTimeConstraintChange",value:function(e){this.props.onChange(Object(d.a)(Object(d.a)({},this.props.options),{},{hasTimeConstraint:e.target.checked}))}},{key:"onHasRegionConstraintChange",value:function(e){this.props.onChange(Object(d.a)(Object(d.a)({},this.props.options),{},{hasRegionConstraint:e.target.checked}))}},{key:"onHasVariablesConstraintChange",value:function(e){this.props.onChange(Object(d.a)(Object(d.a)({},this.props.options),{},{hasVariablesConstraint:e.target.checked}))}},{key:"onVariableNamesChange",value:function(e,t){this.props.onChange(Object(d.a)(Object(d.a)({},this.props.options),{},{variableNames:t}))}},{key:"onMakeLocalSelectedChange",value:function(e){this.props.onChange(Object(d.a)(Object(d.a)({},this.props.options),{},{isCacheDataSourceSelected:e.target.checked}))}},{key:"onMakeLocalDataSourceIdChange",value:function(e){this.props.onChange(Object(d.a)(Object(d.a)({},this.props.options),{},{cachedDataSourceId:e.target.value}))}},{key:"onOpenDatasetResourceNameChange",value:function(e){this.props.onChange(Object(d.a)(Object(d.a)({},this.props.options),{},{openDatasetResourceName:e.target.value}))}},{key:"render",value:function(){if(!this.props.dataSource)return null;var e=this.props.options,t=new Date("1970-01-01"),r=new Date(Date.now()),o=this.props.temporalCoverage;o&&(o[0]&&(t=new Date(o[0])),o[1]&&(r=new Date(o[1])));var i,l=o&&a.createElement("div",{style:Xn},"Available time range: ".concat(o.join(", "))),c=e.hasTimeConstraint,s=c?e.dateRange:null,u=a.createElement("div",{style:n.SUB_PANEL_STYLE},a.createElement(ue.Checkbox,{disabled:!o||!this.props.canConstrainTime,checked:c,label:"Time constraint",onChange:this.onHasTimeConstraintChange}),a.createElement(ue.Collapse,{isOpen:c},a.createElement("div",{style:n.OPTION_DIV_STYLE},a.createElement(Tn,{nullable:!0,min:t,max:r,value:s,onChange:this.onDateRangeChange}),l))),d=e.hasRegionConstraint,p=d?e.region||Vn:e.region,h=a.createElement("div",{style:n.SUB_PANEL_STYLE},a.createElement(ue.Checkbox,{disabled:!this.props.canConstrainRegion,checked:d,label:"Region constraint",onChange:this.onHasRegionConstraintChange}),a.createElement(ue.Collapse,{isOpen:this.props.canConstrainRegion&&d},a.createElement("div",{style:n.OPTION_DIV_STYLE},a.createElement(Bn,{value:p,disabled:!d,onChange:this.onRegionChange})))),f=e.hasVariablesConstraint,m=n.dataSourceToResource(this.props.dataSource),b=a.createElement("div",{style:n.SUB_PANEL_STYLE},a.createElement(ue.Checkbox,{disabled:!this.props.canConstrainVariables,checked:f,label:"Variables constraint",onChange:this.onHasVariablesConstraintChange}),a.createElement(ue.Collapse,{isOpen:f},a.createElement("div",{style:n.OPTION_DIV_STYLE},a.createElement(Hn,{input:n.VAR_NAMES_INPUT,value:e.variableNames,onChange:this.onVariableNamesChange,resource:m,multi:!0}))));if(this.props.canCache&&!this.props.isLocalDataSource){var v=e.isCacheDataSourceSelected;i=a.createElement("div",{style:n.SUB_PANEL_STYLE},a.createElement(ue.Tooltip,{content:"If unchecked, remote data will be accessed using an available protocol, e.g. OPeNDAP."},a.createElement(ue.Checkbox,{checked:v,label:"Cache data source (allocates space on disk)",onChange:this.onMakeLocalSelectedChange})),a.createElement(ue.Collapse,{isOpen:v},a.createElement("div",{style:n.OPTION_DIV_STYLE},a.createElement(ue.Label,null,"Unique identifier for the new local data source",a.createElement("span",{className:"bp3-text-muted"}," (optional)"),a.createElement(ue.InputGroup,{style:{width:"100%"},type:"text",value:e.cachedDataSourceId,onChange:this.onMakeLocalDataSourceIdChange})))))}var y,g=[];return"ok"===this.props.dataSource.metaInfoStatus?(this.props.canConstrainTime||g.push([zn,"This dataset has no (recognised) temporal coverage."]),this.props.canConstrainRegion||g.push([zn,a.createElement("span",null,"This dataset has no (recognised) spatial coverage and hence it will not show up in the ",a.createElement("strong",null,"World View"),".")]),this.props.canConstrainVariables||g.push([zn,"This datasets has no (recognised) variables."])):"loading"===this.props.dataSource.metaInfoStatus?g.push([Jn,"Please wait while dataset metadata is loaded..."]):"error"===this.props.dataSource.metaInfoStatus&&g.push([qn,"Failed to load dataset metadata."]),g.length>0&&(y=a.createElement(ue.Card,{style:Kn},g.map((function(e){var t=Object(te.a)(e,2),n=t[0],r=t[1];return a.createElement("div",null,n,"\xa0\xa0",r)})))),a.createElement("div",null,a.createElement(Nn,{label:this.props.isLocalDataSource?"Data source (local):":"Data source:",longId:this.props.dataSource.title}),u,h,b,i,y)}}],[{key:"dataSourceVarToVariable",value:function(e){return{name:e.name,units:e.units||"-",dataType:st.d}}},{key:"dataSourceToResource",value:function(e){if(e){var t=e.metaInfo;if(t&&t.data_vars&&t.data_vars.length)return{name:e.id,dataType:st.c,variables:t.data_vars.map((function(e){return n.dataSourceVarToVariable(e)}))}}return null}},{key:"validateOptions",value:function(e,t){if(!t)return!1;var n=!0;t.hasTimeConstraint&&t.dateRange&&(n=!t.dateRange.error);var a=!0;if(t.hasRegionConstraint&&t.region){var r=t.region.west.value,o=t.region.east.value,i=t.region.south.value,l=t.region.north.value,c=l>=-90&&l<=90,s=i>=-90&&i<=90;a=r>=-180&&r<=180&&(o>=-180&&o<=180)&&Math.abs(r-o)>=.009&&(s&&c&&l-i>=.009)}var u=!0;t.hasVariablesConstraint&&t.variableNames&&(u=!t.variableNames.error);var d=!0;if(!e&&t.isCacheDataSourceSelected){var p=t.cachedDataSourceId;p&&!/[^\\/:*?"<>|\r\n]+$/im.test(p)&&(d=!1)}return n&&a&&u&&d}},{key:"optionsToErrors",value:function(e){var t={};return e.hasTimeConstraint&&e.dateRange&&e.dateRange.error&&(t["Time constraint"]=e.dateRange.error),e.hasVariablesConstraint&&e.variableNames&&e.variableNames.error&&(t["Variables constraint"]=e.variableNames.error),t}},{key:"optionsToOperationArguments",value:function(e){var t={};if(e.hasTimeConstraint&&e.dateRange&&e.dateRange.value){var n=_n(e.dateRange.value[0]),a=_n(e.dateRange.value[1]);t={time_range:"".concat(n,",").concat(a)}}if(e.hasRegionConstraint&&e.region){var r=e.region;t=Object(d.a)(Object(d.a)({},t),{},{region:"".concat(r.west.value,",").concat(r.south.value,",").concat(r.east.value,",").concat(r.north.value)})}if(e.hasVariablesConstraint&&e.variableNames){var o=e.variableNames.value;t=Object(d.a)(Object(d.a)({},t),{},{var_names:o})}return e.isCacheDataSourceSelected&&(t=Object(d.a)(Object(d.a)({},t),{},{force_local:!0}),e.cachedDataSourceId&&(t=Object(d.a)(Object(d.a)({},t),{},{local_ds_id:e.cachedDataSourceId}))),t}},{key:"defaultOptions",value:function(e,t){var n=null,a=null;if(t&&t[0])try{n=new Date(t[0])}catch(r){}if(t&&t[1])try{a=new Date(t[1])}catch(r){}return{hasTimeConstraint:!1,dateRange:{value:[n,a]},hasRegionConstraint:!1,region:null,hasVariablesConstraint:!1,variableNames:null,isCacheDataSourceSelected:!e,cachedDataSourceId:"",openDatasetResourceName:""}}},{key:"ensureDateRangeIsValidated",value:function(e,t){if(e.hasTimeConstraint&&e.dateRange&&t)try{var n=t[0]?new Date(t[0]):new Date("1980-01-01"),a=t[1]?new Date(t[1]):new Date(Date.now());return An(e.dateRange.value,!0,n,a),Object(d.a)(Object(d.a)({},e),{},{dateRange:Object(d.a)(Object(d.a)({},e.dateRange),{},{error:null})})}catch(r){return Object(d.a)(Object(d.a)({},e),{},{dateRange:Object(d.a)(Object(d.a)({},e.dateRange),{},{error:r})})}return e}}]),n}(a.Component);Zn.VAR_NAMES_INPUT={name:"varNames",dataType:"string",description:null,nullable:!0},Zn.SUB_PANEL_STYLE={marginTop:"1em"},Zn.OPTION_CHECK_STYLE={marginTop:"1em"},Zn.OPTION_DIV_STYLE={marginLeft:"2em"};var Qn=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(){return Object(re.a)(this,n),t.apply(this,arguments)}return Object(oe.a)(n,[{key:"render",value:function(){var e;e=this.isValueEditorShown()?this.props.valueEditor:this.renderResourceNameEditor();var t=this.renderEditorSwitch();return a.createElement(a.Fragment,{key:this.props.name},a.createElement(Gn,{style:n.LABEL_STYLE,label:this.props.name,units:this.props.units,dataType:this.props.dataType,tooltipText:this.props.tooltipText}),e,t)}},{key:"handleChange",value:function(e,t){this.props.onChange&&this.props.onChange(e,t)}},{key:"renderResourceNameEditor",value:function(){var e=this,t=a.createElement("option",{key:"__first__",value:"__null__"},"Select resource"),r=(this.props.resources||[]).filter((function(t){return e.isDataTypeCompatible(t)})).map((function(e){return a.createElement("option",{key:e.name,value:e.name},e.name)})),o=[t].concat(r),i=a.createElement("div",{className:"bp3-intent-primary",style:n.RESOURCE_NAME_STYLE},a.createElement(ue.HTMLSelect,{fill:!0,style:n.RESOURCE_NAME_STYLE,value:this.props.resourceName||"__null__",disabled:0===r.length,onChange:function(t){return e.handleChange("__null__"===t.target.value?null:t.target.value,!1)}},o));return 0===r.length&&(i=a.createElement(ue.Popover,{interactionKind:ue.PopoverInteractionKind.HOVER,hoverOpenDelay:0,hoverCloseDelay:0,position:ue.PopoverPosition.TOP,fill:!0},i,a.createElement("div",{style:{padding:8}},"This parameter requires a resource of type ",a.createElement("span",{style:{color:"rgba(0,255,0,0.8)"}},Cn(this.props.dataType,!1)),".",a.createElement("br",null),"Currently, no resources of this type are available.",a.createElement("br",null),function(e){switch(e){case st.c:return a.createElement("span",null,"Datasets can be opened from the ",a.createElement("b",null,"DATA SOURCES")," panel.",a.createElement("br",null),"You can also use operations like ",a.createElement("code",null,"open_dataset")," or ",a.createElement("br",null),a.createElement("code",null,"read_netcdf")," to produce resources of this type.");case st.b:return a.createElement("span",null,"Datasets can be opened from the ",a.createElement("b",null,"DATA SOURCES")," panel.",a.createElement("br",null),"You can also use operations like ",a.createElement("code",null,"open_dataset"),", ",a.createElement("br",null),"or ",a.createElement("code",null,"read_netcdf")," to produce resources of this type.");case st.f:return a.createElement("span",null,"You can use operations like ",a.createElement("code",null,"read_csv"),", ",a.createElement("code",null,"read_geo_data"),a.createElement("br",null),"to produce resources of this type.");case st.e:return a.createElement("span",null,"You can use operations like ",a.createElement("code",null,"read_csv"),", ",a.createElement("code",null,"read_geo_data"),",",a.createElement("br",null),"or ",a.createElement("code",null,"open_dataset")," to produce resources of this type.");case st.o:case st.r:return""}return""}(this.props.dataType)))),i}},{key:"renderEditorSwitch",value:function(){var e=this,t=this.isValueEditorShown(),r=this.isValueEditorDisabled(),o=!this.hasCompatibleResources(),i=r||o;return a.createElement("span",null,a.createElement(ue.Tooltip,{content:(t?"Switch to resource selection":"Switch to value entry")+(i?" (disabled)":"")},a.createElement(ue.Switch,{checked:t,disabled:i,alignIndicator:ue.Alignment.LEFT,style:n.EDITOR_SWITCH_STYLE,onChange:function(t){return e.handleChange(e.props.resourceName,t.target.checked)}})))}},{key:"isDataTypeCompatible",value:function(e){return Object(st.x)(this.props.dataType,e.dataType)}},{key:"hasCompatibleResources",value:function(){var e=this;return(this.props.resources||[]).some((function(t){return e.isDataTypeCompatible(t)}))}},{key:"isValueEditorDisabled",value:function(){return!this.props.valueEditor}},{key:"isValueEditorShown",value:function(){return!(!this.props.isValueEditorShown||!this.props.valueEditor)}}]),n}(a.PureComponent);function $n(e){return a.createElement(ue.Checkbox,{className:"bp3-large",checked:e.value||!1,indeterminate:null===e.value,style:{marginTop:"0",marginBottom:"0"},onChange:function(t){return e.onChange(e.input,t.target.checked)}})}Qn.LABEL_STYLE={justifySelf:"end",justifyContent:"end"},Qn.EDITOR_SWITCH_STYLE={margin:0},Qn.RESOURCE_NAME_STYLE={justifySelf:"stretch"};var ea=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(){return Object(re.a)(this,n),t.apply(this,arguments)}return Object(oe.a)(n,[{key:"onChange",value:function(e){this.props.onChange(this.props.input,e===n.NULL_VALUE?null:e)}},{key:"render",value:function(){var e=this,t=this.props.input.valueSet;if(!(t&&t.length))return null;var r,o=t.map((function(e,t){return a.createElement("option",{key:t,value:e},e)}));this.props.input.nullable&&(o=(r=[a.createElement("option",{key:-1,value:n.NULL_VALUE})]).concat.apply(r,Object(u.a)(o)));var i=this.props.value||n.NULL_VALUE;return a.createElement("div",{className:"bp3-select"},a.createElement(ue.HTMLSelect,{fill:!0,style:n.VALUE_SELECTOR_STYLE,value:i,onChange:function(t){return e.onChange(t.target.value)}},o))}}],[{key:"isValueSetGiven",value:function(e){return e.valueSet&&e.valueSet.length}}]),n}(a.PureComponent);function ta(e){return ea.isValueSetGiven(e.input)?a.createElement(ea,{input:e.input,value:e.value,onChange:e.onChange}):a.createElement(xn,{isInt:!0,size:10,value:e.value,nullable:e.input.nullable,onChange:function(t){return e.onChange(e.input,t)}})}function na(e){return ea.isValueSetGiven(e.input)?a.createElement(ea,{input:e.input,value:e.value,onChange:e.onChange}):a.createElement(xn,{isInt:!1,size:10,value:e.value,nullable:e.input.nullable,onChange:function(t){return e.onChange(e.input,t)}})}function aa(e){if(ea.isValueSetGiven(e.input))return a.createElement(ea,{input:e.input,value:e.value,onChange:e.onChange});var t=e.input.password?"password":"text";return a.createElement(Wn.a,{size:24,value:e.value,nullable:e.input.nullable,onChange:function(t){return e.onChange(e.input,t)},type:t})}ea.NULL_VALUE="__null__",ea.VALUE_SELECTOR_STYLE={justifySelf:"stretch"};var ra={display:"flex",justifySelf:"stretch"},oa={flexGrow:1},ia={flexGrow:0};var la=Object(o.b)((function(e,t){return Object(d.a)(Object(d.a)({},t),{},{hostOS:e.communication.webAPIServiceInfo.hostOS,workspaceDir:e.data.workspace?e.data.workspace.baseDir:null})}))((function(e){var t=e.input,n=e.value,r=e.onChange,o=e.hostOS,i=e.workspaceDir,l=e.dispatch;n=n||"";var s,u=function(e){return null!==i?Object(yn.g)(e,i,o):e},d=function(e){return null!==i?Object(yn.f)(i,e,o):e};return s="w"===t.fileOpenMode?function(e,t,n){var a={defaultPath:d(Object(Sn.c)(t,void 0)),filters:e.fileFilters};l(c.ad(a,(function(t){var a=t.filePath;!t.canceled&&a&&(a=u(a),n(e,a))})))}:function(e,t,n){var a=e.fileProps,r=new Set(a);r.has("openFile")||r.has("openDirectory")||(r.add("openFile"),a=Array.from(r));var o={defaultPath:d(Object(Sn.c)(t,void 0)),filters:e.fileFilters,properties:a};l(c.Zc(o,(function(t){var r=t.filePaths;!t.canceled&&r.length>0&&(r=r.map(u),a&&a.find((function(e){return"multiSelection"===e}))&&console.error("multi-file selection is not yet implemented, returning first entry only"),n(e,r[0]))})))},a.createElement(ue.ControlGroup,{fill:!0,style:ra},a.createElement(Wn.a,{style:oa,value:n,placeholder:"Enter file path",onChange:function(e){return r(t,e)},nullable:t.nullable}),a.createElement(ue.Button,{intent:ue.Intent.PRIMARY,style:ia,onClick:function(){return s(t,n,r)}},"..."))})),ca=a.createElement("a",{href:"https://en.wikipedia.org/wiki/Well-known_text",target:"_blank",rel:"noopener noreferrer"},"Well-Known Text (WKT)"),sa=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).renderBody=a.renderBody.bind(Object(ie.a)(a)),a.onConfirm=a.onConfirm.bind(Object(ie.a)(a)),a.canConfirm=a.canConfirm.bind(Object(ie.a)(a)),a.onChange=a.onChange.bind(Object(ie.a)(a)),a.state=a.toState(a.props.value),a}return Object(oe.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.setState(this.toState(e.value))}},{key:"onConfirm",value:function(){this.props.onConfirm(this.state.value)}},{key:"onChange",value:function(e){this.setState(this.toState(e.target.value))}},{key:"canConfirm",value:function(){return!this.state.error}},{key:"toState",value:function(e){var t;try{ft(e,this.props.geometryType)}catch(n){t=n}return{value:e,error:t}}},{key:"render",value:function(){return a.createElement(Lt.a,{isOpen:this.props.isOpen,title:"Geometry Editor",onCancel:this.props.onCancel,onConfirm:this.onConfirm,canConfirm:this.canConfirm,renderBody:this.renderBody})}},{key:"renderBody",value:function(){if(!this.props.isOpen)return null;var e=this.state.value,t=!!this.state.error;return a.createElement(ue.FormGroup,null,a.createElement(ue.Label,{htmlFor:"wkt"},"Enter Geometry of type ".concat(this.props.geometryType),a.createElement("span",{className:"bp3-text-muted"}," (WGS84 coordinates in degree)")),a.createElement("div",{className:"bp3-form-content",style:{width:"100%"}},a.createElement("textarea",{id:"wkt",className:t?n.ERROR_CLASS:n.NOMINAL_CLASS,rows:10,dir:"auto",value:e,onChange:this.onChange}),this.getHelpText()))}},{key:"getHelpText",value:function(){var e,t;return this.state.error&&(e=a.createElement("p",null,"Error: ".concat(this.state.error.message))),t="Point"===this.props.geometryType?a.createElement("p",null,"Use ",a.createElement("code",null,"lon, lat")," or use ",this.props.geometryType," ",ca," syntax."):"Polygon"===this.props.geometryType?a.createElement("p",null,"Use ",a.createElement("code",null,"west, south, east, north")," or use ",this.props.geometryType," ",ca," syntax."):a.createElement("p",null,"Use ",this.props.geometryType," ",ca," syntax."),a.createElement("div",{className:"bp3-form-helper-text"},e,t)}}]),n}(a.Component);sa.NOMINAL_CLASS="bp3-input bp3-fill",sa.ERROR_CLASS="bp3-input bp3-fill bp3-intent-danger";var ua=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).validateGeometryText=a.validateGeometryText.bind(Object(ie.a)(a)),a.state={isEditorOpen:!1},a.setGeometryWKT=a.setGeometryWKT.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"validateGeometryText",value:function(e){ft(e,this.props.geometryType)}},{key:"setGeometryWKT",value:function(){var e;try{e=this.props.geometryWKTGetter&&this.props.geometryWKTGetter()}catch(t){console.error(t),e="Error: "+t}this.props.onChange({textValue:e,value:e})}},{key:"render",value:function(){var e=this,t=this.props.placeholder;return t||(t="Point"===this.props.geometryType?"<lon>,<lat> or Point WKT":"Polygon"===this.props.geometryType?"<lon1>,<lat1>,<lon2>,<lat2> or Polygon WKT":"Enter ".concat(this.props.geometryType," WKT")),a.createElement(ue.ControlGroup,{style:n.DIV_STYLE,fill:!0},a.createElement(Wn.a,{value:this.props.value,onChange:this.props.onChange,placeholder:t,validator:this.validateGeometryText,nullable:this.props.nullable,style:n.TEXT_FIELD_STYLE}),a.createElement(ue.AnchorButton,{icon:"selection",style:n.BUTTON_STYLE,disabled:!this.props.geometryWKTGetter,onClick:this.setGeometryWKT}),a.createElement(ue.AnchorButton,{intent:ue.Intent.PRIMARY,style:n.BUTTON_STYLE,onClick:function(){return e.setState({isEditorOpen:!0})}},"..."),a.createElement(sa,{isOpen:this.state.isEditorOpen,value:Object(Sn.c)(this.props.value),onConfirm:function(t){e.setState({isEditorOpen:!1}),e.props.onChange({textValue:t,value:t})},onCancel:function(){e.setState({isEditorOpen:!1})},geometryType:this.props.geometryType}))}}]),n}(a.Component);ua.DIV_STYLE={display:"flex",justifySelf:"stretch"},ua.TEXT_FIELD_STYLE={flexGrow:1},ua.BUTTON_STYLE={flexGrow:0};var da=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onChange=a.onChange.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"onChange",value:function(e){this.props.onChange(this.props.input,e)}},{key:"render",value:function(){return a.createElement(ua,{value:this.props.value,onChange:this.onChange,placeholder:this.props.placeholder,size:this.props.size,geometryType:this.props.geometryType,nullable:this.props.input.nullable,geometryWKTGetter:this.props.geometryWKTGetter})}}]),n}(a.Component),pa=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onChange=a.onChange.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"onChange",value:function(e){var t=e.textValue,n=e.error;this.props.onChange(this.props.input,{textValue:t,value:t,error:n})}},{key:"render",value:function(){var e=this.getValueMinMax();return a.createElement(Tn,{nullable:this.props.input.nullable,min:e[0],max:e[1],value:this.props.value,onChange:this.onChange})}},{key:"getValueMinMax",value:function(){var e,t,n=this.props.input.valueRange;if(n)try{e=Pn(n[0],!0),t=Pn(n[1],!0)}catch(a){}return[e,t]}}]),n}(a.PureComponent),ha=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onSelection=a.onSelection.bind(Object(ie.a)(a)),a.onConfirm=a.onConfirm.bind(Object(ie.a)(a)),a.renderBody=a.renderBody.bind(Object(ie.a)(a)),a.state={value:a.props.value},a}return Object(oe.a)(n,[{key:"onSelection",value:function(e){this.setState({value:e})}},{key:"onConfirm",value:function(){this.props.onConfirm(this.state.value)}},{key:"render",value:function(){return a.createElement(Lt.a,{isOpen:this.props.isOpen,title:this.props.multiSelect?"Select Dimensions":"Select Dimension",icon:"variable",onConfirm:this.onConfirm,onCancel:this.props.onCancel,renderBody:this.renderBody})}},{key:"renderBody",value:function(){if(!this.props.isOpen)return null;var e=this.props.dimNames;return e?a.createElement(en,null,a.createElement("p",null,this.props.multiSelect?"Select one or more dimensions:":"Select dimension:"),a.createElement(mn.a,{items:e,getItemKey:n.getDimItemKey,renderItem:n.renderDimItem,selectionMode:this.props.multiSelect?mn.b.MULTIPLE:mn.b.SINGLE,selection:this.state.value,style:{height:"20em"},onSelection:this.onSelection,onItemDoubleClick:this.state.value?this.onConfirm:null})):a.createElement("p",null,"No dimensions names found for the given source.")}}],[{key:"getDimItemKey",value:function(e){return e}},{key:"renderDimItem",value:function(e){return a.createElement("div",null,e)}}]),n}(a.Component),fa=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onChange=a.onChange.bind(Object(ie.a)(a)),a.validate=a.validate.bind(Object(ie.a)(a)),a.state={isDetailsEditorOpen:!1},a}return Object(oe.a)(n,[{key:"onChange",value:function(e){this.props.onChange(this.props.input,e)}},{key:"validate",value:function(e){!function(e,t,n,a){if(!e||""===e.trim()){if(!t)throw new Error(n?"One or more dimension names expected.":"Dimension name expected.");return}var r=e.split(",");if(n){var o,i=Object(g.a)(r);try{for(i.s();!(o=i.n()).done;){if(""===o.value.trim())throw new Error("Value must be a comma-separated list of dimension names.")}}catch(u){i.e(u)}finally{i.f()}}else{if(1!==r.length)throw new Error("Value must be a single dimension name.");if(""===r[0].trim())throw new Error("Value must be a dimension name.")}if(a){var l,c=Object(g.a)(r);try{for(c.s();!(l=c.n()).done;){var s=l.value;if(!new Set(a).has(s))throw new Error('"'.concat(s,'" is not a valid dimension. Valid dimensions are: "').concat(a,'"'))}}catch(u){c.e(u)}finally{c.f()}}}(e,this.props.input.nullable,this.props.multi,this.props.dimNames)}},{key:"render",value:function(){var e=this,t=Object(Sn.c)(this.props.value),r=""!==t?t.split(",").map((function(e){return e.trim()})):[],o=this.props.dimNames&&this.props.dimNames.length;return a.createElement(ue.ControlGroup,{style:n.DIV_STYLE},a.createElement(Wn.a,{value:this.props.value,validator:this.validate,size:this.props.multi?36:24,placeholder:this.props.multi?"Enter dimension names, separated by comma":"Enter dimension name",onChange:this.onChange,nullable:this.props.input.nullable,style:n.TEXT_FIELD_STYLE}),a.createElement(ue.AnchorButton,{intent:ue.Intent.PRIMARY,onClick:function(){return e.setState({isDetailsEditorOpen:!0})},disabled:!o,style:n.BUTTON_STYLE},"..."),a.createElement(ha,{isOpen:this.state.isDetailsEditorOpen,dimNames:this.props.dimNames,multiSelect:this.props.multi,value:r,onConfirm:function(t){var n=t?t.join(", "):null;e.setState({isDetailsEditorOpen:!1}),e.onChange({textValue:n,value:n})},onCancel:function(){e.setState({isDetailsEditorOpen:!1})}}))}}]),n}(a.Component);fa.DIV_STYLE={width:"24em",display:"flex",flexGrow:1},fa.TEXT_FIELD_STYLE={flexGrow:1},fa.BUTTON_STYLE={flex:"none"};var ma=n(407),ba=n(408),va=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onChange=a.onChange.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"onChange",value:function(e){var t=e.textValue,n=e.error;this.props.onChange(this.props.input,{textValue:t,value:t,error:n})}},{key:"render",value:function(){var e=this.getValueMinMax();return a.createElement(In,{nullable:this.props.input.nullable,min:e[0],max:e[1],value:this.props.value,onChange:this.onChange})}},{key:"getValueMinMax",value:function(){var e,t,n=this.props.input.valueRange;if(n)try{e=Pn(n[0],!0),t=Pn(n[1],!0)}catch(a){e=jn[0],t=jn[1]}return[e,t]}}]),n}(a.PureComponent),ya=n(409),ga=n.n(ya),Ea=(n(633),n(634),[{href:"http://xarray.pydata.org/en/stable/api.html#top-level-functions",module:"xr",name:"xarray"},{href:"http://xarray.pydata.org/en/stable/api.html#universal-functions",module:"xu",name:"xarray u-funcs"},{href:"http://pandas.pydata.org/pandas-docs/stable/basics.html",module:"pd",name:"Pandas"},{href:"http://pandas.pydata.org/pandas-docs/stable/basics.html",module:"np",name:"numpy"}]),Oa=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).renderBody=a.renderBody.bind(Object(ie.a)(a)),a.onConfirm=a.onConfirm.bind(Object(ie.a)(a)),a.canConfirm=a.canConfirm.bind(Object(ie.a)(a)),a.onChange=a.onChange.bind(Object(ie.a)(a)),a.state=a.toState(a.props.value),a}return Object(oe.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.setState(this.toState(e.value))}},{key:"onConfirm",value:function(){this.props.onConfirm(this.state.value)}},{key:"onChange",value:function(e){this.setState(this.toState(e))}},{key:"canConfirm",value:function(){return!this.state.error}},{key:"toState",value:function(e){var t;return{value:e,error:t}}},{key:"render",value:function(){return a.createElement(Lt.a,{isOpen:this.props.isOpen,title:"Script Editor",onCancel:this.props.onCancel,onConfirm:this.onConfirm,canConfirm:this.canConfirm,renderBody:this.renderBody,style:n.DIALOG_STYLE})}},{key:"renderBody",value:function(){if(!this.props.isOpen)return null;var e=this.state.value;return a.createElement(a.Fragment,null,a.createElement(ga.a,{mode:this.props.scriptLang,theme:"monokai",width:"100%",fontSize:14,showGutter:!0,highlightActiveLine:!0,value:e,onChange:this.onChange}),this.getHelpText())}},{key:"getHelpText",value:function(){var e=Ea.map((function(e,t){return a.createElement("span",null,a.createElement("code",null,e.module),"\xa0(",a.createElement("a",{href:e.href,rel:"noopener noreferrer",target:"_blank"},e.name),")",t<Ea.length-1?", ":"")}));return a.createElement("div",{className:"bp3-form-helper-text",style:{marginTop:"0.5em"}},"Please use Python 3.6+ syntax. The following modules are imported by default: ",e,". Other modules can be imported: ",a.createElement("code",null,"dask"),", ",a.createElement("code",null,"gdal"),", ",a.createElement("code",null,"geos")," ",a.createElement("code",null,"pyshp"),",",a.createElement("code",null,"scipy"),", ",a.createElement("code",null,"shapely"),".")}}]),n}(a.Component);Oa.DIALOG_STYLE={width:"54em"};var _a=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).validateScript=a.validateScript.bind(Object(ie.a)(a)),a.state={isEditorOpen:!1},a}return Object(oe.a)(n,[{key:"validateScript",value:function(e){}},{key:"render",value:function(){var e=this,t=this.props.placeholder;return a.createElement(ue.ControlGroup,{style:n.DIV_STYLE,fill:!0},a.createElement(Wn.a,{value:this.props.value,onChange:this.props.onChange,size:this.props.size,placeholder:t,validator:this.validateScript,nullable:this.props.nullable,style:n.TEXT_FIELD_STYLE}),a.createElement(ue.AnchorButton,{intent:ue.Intent.PRIMARY,style:n.BUTTON_STYLE,onClick:function(){return e.setState({isEditorOpen:!0})}},"..."),a.createElement(Oa,{isOpen:this.state.isEditorOpen,value:Object(Sn.c)(this.props.value),onConfirm:function(t){e.setState({isEditorOpen:!1}),e.props.onChange({textValue:t,value:t})},onCancel:function(){e.setState({isEditorOpen:!1})},scriptLang:this.props.scriptLang}))}}]),n}(a.Component);_a.DIV_STYLE={display:"flex"},_a.TEXT_FIELD_STYLE={flexGrow:1},_a.BUTTON_STYLE={flexGrow:0};var Ca,ka=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onChange=a.onChange.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"onChange",value:function(e){this.props.onChange(this.props.input,e)}},{key:"render",value:function(){return a.createElement(_a,{value:this.props.value,onChange:this.onChange,placeholder:this.props.placeholder,size:this.props.size,scriptLang:this.props.input.scriptLang,nullable:this.props.input.nullable})}}]),n}(a.Component);function wa(e){var t=Sa(e.input.dataType);return t?t(e):null}function Sa(e){return e?Ia[e]:null}function ja(e){return a.createElement(la,{input:e.input,value:e.value,onChange:e.onChange})}var Ia=(Ca={},Object(s.a)(Ca,st.a,(function(e){return a.createElement($n,{input:e.input,value:e.value,onChange:e.onChange})})),Object(s.a)(Ca,st.m,(function(e){return a.createElement(ta,{input:e.input,value:e.value,onChange:e.onChange})})),Object(s.a)(Ca,st.k,(function(e){return a.createElement(na,{input:e.input,value:e.value,onChange:e.onChange})})),Object(s.a)(Ca,st.s,(function(e){return e.input.fileOpenMode?ja(e):e.input.scriptLang?function(e){return a.createElement(ka,{input:e.input,value:e.value,onChange:e.onChange})}(e):function(e){return a.createElement(aa,{input:e.input,value:e.value,onChange:e.onChange})}(e)})),Object(s.a)(Ca,st.p,(function(e){return a.createElement(da,{input:e.input,value:e.value,onChange:e.onChange,geometryType:"Point",size:16,geometryWKTGetter:e.geometryWKTGetter})})),Object(s.a)(Ca,st.q,(function(e){return a.createElement(da,{input:e.input,value:e.value,onChange:e.onChange,geometryType:"Polygon",size:32,geometryWKTGetter:e.geometryWKTGetter})})),Object(s.a)(Ca,st.l,(function(e){return a.createElement(da,{input:e.input,value:e.value,onChange:e.onChange,geometryType:"Geometry",size:32,geometryWKTGetter:e.geometryWKTGetter})})),Object(s.a)(Ca,st.t,(function(e){return a.createElement(va,{input:e.input,value:e.value,onChange:e.onChange})})),Object(s.a)(Ca,st.u,(function(e){return a.createElement(pa,{input:e.input,value:e.value,onChange:e.onChange})})),Object(s.a)(Ca,st.w,(function(e){return a.createElement(Hn,{input:e.input,value:e.value,onChange:e.onChange,resource:Pa(e),multi:!1})})),Object(s.a)(Ca,st.v,(function(e){return a.createElement(Hn,{input:e.input,value:e.value,onChange:e.onChange,resource:Pa(e),multi:!0})})),Object(s.a)(Ca,st.i,(function(e){return a.createElement(fa,{input:e.input,value:e.value,onChange:e.onChange,dimNames:Da(e),multi:!1})})),Object(s.a)(Ca,st.h,(function(e){return a.createElement(fa,{input:e.input,value:e.value,onChange:e.onChange,dimNames:Da(e),multi:!0})})),Object(s.a)(Ca,st.g,(function(e){return a.createElement(ma.a,{input:e.input,value:e.value,onChange:e.onChange})})),Object(s.a)(Ca,st.j,ja),Object(s.a)(Ca,st.n,(function(e){return a.createElement(ba.a,{input:e.input,value:e.value,onChange:e.onChange})})),Ca);function Pa(e){var t,n=e.input.valueSetSource,a=e.resources,r=e.inputAssignments;if(n&&a&&r){var o=r[n],i=o.resourceName;o&&i&&!o.isValueUsed&&(t=a.find((function(e){return e.name===i})))}return t}function Da(e){var t,n,a,r=e.input.valueSetSource.split("."),o=e.resources,i=e.inputAssignments;if(r[0]&&o&&i){var l=i[r[0]],c=l.resourceName;l&&c&&!l.isValueUsed&&(t=o.find((function(e){return e.name===c})))}if(t){var s=t.variables;if(r[1]&&s&&i){var u=i[r[1]];if(u&&u.constantValue){var d=u.constantValue.textValue;n=s.find((function(e){return e.name===d}))}}}return r[0]&&r[1]&&n?a=n.dimNames:r[0]&&!r[1]&&t&&(a=t.coordVariables.map((function(e){return e.name}))),a}var La=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onConstantValueChange=a.onConstantValueChange.bind(Object(ie.a)(a)),a.onResourceNameChange=a.onResourceNameChange.bind(Object(ie.a)(a)),a.onCancel=a.onCancel.bind(Object(ie.a)(a)),a.onValidate=a.onValidate.bind(Object(ie.a)(a)),a.onDefaults=a.onDefaults.bind(Object(ie.a)(a)),a.onConfirm=a.onConfirm.bind(Object(ie.a)(a)),a.canConfirm=a.canConfirm.bind(Object(ie.a)(a)),a.hideValidationDialog=a.hideValidationDialog.bind(Object(ie.a)(a)),a.renderBody=a.renderBody.bind(Object(ie.a)(a)),a.renderExtraActions=a.renderExtraActions.bind(Object(ie.a)(a)),a.state=n.mapPropsToState(e),a}return Object(oe.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.setState(n.mapPropsToState(e))}},{key:"onConfirm",value:function(){var e,t="editOperationStepDialog"===this.props.id,n=!t,a=this.props.operation;n&&(e=Object(s.a)({},a.qualifiedName,this.state.inputAssignments)),this.props.dispatch(c.Qb(this.props.id,e)),this.props.dispatch(c.Uc(a.qualifiedName,this.getInputArguments(),this.props.resName,t,'Executing operation "'.concat(a.name,'"')))}},{key:"canConfirm",value:function(){return!this.getInputErrors()}},{key:"onCancel",value:function(){this.props.dispatch(c.Qb(this.props.id))}},{key:"onValidate",value:function(){var e=this.getInputErrors();this.setState({isValidationDialogOpen:!0,inputErrors:e})}},{key:"hideValidationDialog",value:function(){this.setState({isValidationDialogOpen:!1})}},{key:"getInputArguments",value:function(){return function(e,t){var n={};return e.forEach((function(e){var a=t[e.name];if(a){var r;if(a.isValueUsed){var o=a.constantValue;r={value:Object(Sn.b)(o)?o.value:o}}else r={source:a.resourceName};n[e.name]=r}})),n}(this.props.operation.inputs,this.state.inputAssignments)}},{key:"getInputErrors",value:function(){return function(e,t){var n={},a=!1;return e.forEach((function(e){var r=t[e.name];if(r)if(r.isValueUsed){var o=r.constantValue,i=Object(Sn.b)(o)&&o.error;i?(n[e.name]=i,a=!0):Object(v.g)(o)&&!e.nullable&&(n[e.name]=new Error("Value must be given."),a=!0)}else{var l=r.resourceName;Object(v.g)(l)&&!e.nullable&&(n[e.name]=new Error("Resource must be specified."),a=!0)}else n[e.name]=new Error("Value must be specified."),a=!0})),a?n:null}(this.props.operation.inputs,this.state.inputAssignments)}},{key:"onDefaults",value:function(){var e=Aa(this.props.operation.inputs,this.state.inputAssignments,!0);this.setState({inputAssignments:e})}},{key:"setInputAssignment",value:function(e,t){var n=Object(b.b)(this.state.inputAssignments,e.name,t);this.setState({inputAssignments:n})}},{key:"onResourceNameChange",value:function(e,t,n){""===t&&e.nullable&&(t=null),this.setInputAssignment(e,{resourceName:t,isValueUsed:n})}},{key:"onConstantValueChange",value:function(e,t){this.setInputAssignment(e,{constantValue:t,isValueUsed:!0})}},{key:"render",value:function(){if(!this.props.isOpen)return null;var e,t,r,o=this.props.operation;return"editOperationStepDialog"===this.props.id?(e="Edit Step",t="Edit Operation Step - ".concat(o.name),r="Edit operation step inputs and recompute output."):(e="Add Step",t="Add Operation Step - ".concat(o.name),r="Add a new operation step to the workspace\u2019s workflow."),a.createElement(Lt.a,{isOpen:!0,icon:"function",title:t,confirmTooltip:r,confirmTitle:e,confirmIconName:"play",onConfirm:this.onConfirm,onCancel:this.onCancel,canConfirm:this.canConfirm,renderBody:this.renderBody,renderExtraActions:this.renderExtraActions,style:n.DIALOG_STYLE})}},{key:"renderBody",value:function(){if(!this.props.isOpen)return null;var e=this.props.operation,t=a.createElement("p",{key:"header",style:{marginBottom:"1em"}},"Adjustable parameter(s) for operation ",a.createElement("code",null,e.name),":"),n=a.createElement("p",{key:"footer",style:{marginTop:"1em"}},"Pressing ",a.createElement(ue.Icon,{icon:"play"})," will add operation ",a.createElement("code",null,e.name)," as a new workflow step to the current workspace. The result of the step is a new ",a.createElement("em",null,"resource")," which can be used as input for other operations. You can remove the step or change its parameters later."),r=this.renderParameterPanel();return a.createElement(ue.FormGroup,null,t,a.createElement("div",null,r,a.createElement("div",{className:"bp3-form-helper-text"},n)),a.createElement(Ra,{isOpen:this.state.isValidationDialogOpen,inputErrors:this.state.inputErrors,onConfirm:this.hideValidationDialog}))}},{key:"renderExtraActions",value:function(){return this.props.isOpen?[a.createElement(ue.Tooltip,{key:"validate",content:"Validate current input values"},a.createElement(ue.AnchorButton,{onClick:this.onValidate},"Validate")),a.createElement(ue.Tooltip,{key:"defaults",content:"Set all inputs back to default values"},a.createElement(ue.AnchorButton,{onClick:this.onDefaults},"Defaults"))]:null}},{key:"renderParameterPanel",value:function(){var e=this.props.operation;if(!e.inputs||!e.inputs.length)return null;var t,r,o,i,l,c,s=(t=e.inputs,r=this.state.inputAssignments,o=this.props.workspace.resources,i=this.props.geometryWKTGetter,l=this.onConstantValueChange,c=this.onResourceNameChange,t.filter((function(e){return!e.noUI})).map((function(e){var t=r[e.name],n=t.constantValue,s=wa({input:e,inputAssignments:r,resources:o,geometryWKTGetter:i,value:n,onChange:l});return a.createElement(Qn,{key:e.name,resources:o,name:e.name,dataType:e.dataType,units:e.units,tooltipText:e.description,onChange:function(t,n){return c(e,t,n)},isValueEditorShown:t.isValueUsed,resourceName:t.resourceName,valueEditor:s})})));return a.createElement("div",{key:"parameterPanel",style:n.PARAMETER_PANEL_STYLE},s)}}],[{key:"mapPropsToState",value:function(e){return e.isOpen?{inputAssignments:Aa(e.operation.inputs,e.inputAssignments,!1)}:n.NO_STATE}}]),n}(a.Component);La.DIALOG_STYLE={width:"42em"},La.NO_STATE={inputAssignments:{}},La.PARAMETER_PANEL_STYLE={display:"grid",gridTemplateColumns:"auto auto 28px",alignItems:"center",justifyItems:"stretch",rowGap:"1ex",columnGap:"0.5em"};var Ta=Object(o.b)((function(e,t){var n=t.id,a=Oe.x(n)(e),r=a.isOpen;if(!r)return{id:n,isOpen:!1};var o,i,l=null;if("newOperationStepDialog"===n){if(!(o=Oe.wb(e)))return console.error("OperationStepDialog: operation is undefined: dialog id =",n),{id:n,isOpen:!1};var c=a.inputAssignments;i=c&&c[o.qualifiedName]}else if("newCtxOperationStepDialog"===n){if(!(o=Oe.fb(e)))return console.error("OperationStepDialog: operation is undefined: dialog id =",n),{id:n,isOpen:!1};i=a.inputAssignments}else{if("editOperationStepDialog"!==n)return console.error("OperationStepDialog: unknown dialog id =",n),{id:n,isOpen:!1};var s=t.operationStep;if(!(o=(Oe.T(e)||[]).find((function(e){return e.name===s.op||e.qualifiedName===s.op}))))return console.error("OperationStepDialog: operation is undefined: dialog id =",n),{id:n,isOpen:!1};i=function(e,t){var n,a={},r=Object(g.a)(e.inputs);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=t.inputs[o.name];if(i){var l=Object(v.e)(i)?i:i.source;if(l)a[o.name]={resourceName:l,isValueUsed:!1};else if(!Object(v.f)(i.value)){var c=i.value;a[o.name]={constantValue:c,isValueUsed:!0}}}}}catch(s){r.e(s)}finally{r.f()}return a}(o,s),l=s.id}return{id:n,isOpen:r,workspace:Oe.oc(e),geometryWKTGetter:Oe.nb(e),resName:l,operation:o,inputAssignments:i}}))(La);function Aa(e,t,n){var a={};return e.forEach((function(e){var r,o=!!Sa(e.dataType),i={constantValue:Object(v.b)(e.defaultValue)?e.defaultValue:null,isValueUsed:o,resourceName:null},l=t&&t[e.name];r=!l||n?i:l||i,a[e.name]=r})),a}var Ra=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onConfirm=a.onConfirm.bind(Object(ie.a)(a)),a.renderBody=a.renderBody.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"onConfirm",value:function(){this.props.onConfirm()}},{key:"countResourceProblems",value:function(){var e=this.props.inputErrors,t=0;return Object.getOwnPropertyNames(e).forEach((function(n){var a=e[n];a.message&&(a.message.includes("resource")||a.message.includes("Resource"))&&t++})),t}},{key:"render",value:function(){return a.createElement(Lt.a,{isOpen:this.props.isOpen,title:"Input Validation",onConfirm:this.onConfirm,noCancelButton:!0,onCancel:this.onConfirm,renderBody:this.renderBody})}},{key:"renderBody",value:function(){if(!this.props.isOpen)return null;var e=this.props.inputErrors;if(!e)return a.createElement("p",null,"No problems encountered.");var t=Na(e,this.countResourceProblems());return t||a.createElement("p",null,"No problems encountered.")}}]),n}(a.Component);function Na(e,t){var n,r=[];if(Object.getOwnPropertyNames(e).forEach((function(t){var n=e[t];r.push(a.createElement("li",{key:t},t,": ",n.message))})),0===r.length)return null;n=1===r.length?"The following problem has been encountered:":"The following ".concat(r.length," problems have been encountered:");var o=t&&t>0?a.createElement("p",null,"This operation has parameter(s) which require specifying a ",a.createElement("em",null,"resource"),". When there are no compatible resources yet, you may consider opening a data source or use one of the ",a.createElement("code",null,"read_...")," operations first."):null;return a.createElement(ue.FormGroup,null,n,a.createElement("div",{className:"bp3-form-content"},r,a.createElement("div",{className:"bp3-form-helper-text"},o)))}var xa=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onCancel=a.onCancel.bind(Object(ie.a)(a)),a.onConfirm=a.onConfirm.bind(Object(ie.a)(a)),a.canConfirm=a.canConfirm.bind(Object(ie.a)(a)),a.renderBody=a.renderBody.bind(Object(ie.a)(a)),a.onOptionsChange=a.onOptionsChange.bind(Object(ie.a)(a)),a.state=n.mapPropsToState(e),a}return Object(oe.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.setState(n.mapPropsToState(e))}},{key:"onCancel",value:function(){this.props.dispatch(c.Pb(n.DIALOG_ID))}},{key:"canConfirm",value:function(){return Zn.validateOptions(this.isLocalDataStore,this.state.options)}},{key:"onConfirm",value:function(){var e=this.props.canCache&&this.state.options.isCacheDataSourceSelected,t=Object(d.a)(Object(d.a)({},this.state.options),{},{isCacheDataSourceSelected:e}),a=this.isRemoteDataStore?"":void 0,r={options:Object(d.a)(Object(d.a)({},t),{},{makeLocalDataSourceId:a,makeLocalDataSourceTitle:a,hasVariablesConstraint:!1,variableNames:null})};this.props.dispatch(c.Pb(n.DIALOG_ID,r)),this.props.dispatch(c.fc(this.props.dataStore.id,this.props.dataSource.id,Zn.optionsToOperationArguments(this.state.options),this.isRemoteDataStore&&e)),this.setState(r)}},{key:"onOptionsChange",value:function(e){this.setState({options:e})}},{key:"render",value:function(){var e=this.props.isOpen;if(!e)return null;var t=this.isRemoteDataStore&&this.state.options.isCacheDataSourceSelected,n=Na(Zn.optionsToErrors(this.state.options));return a.createElement(Lt.a,{isOpen:e,title:"Open Dataset",icon:"database",confirmTitle:t?"Cache and Open":"Open",confirmIconName:"folder-shared-open",confirmTooltip:n,onCancel:this.onCancel,onConfirm:this.onConfirm,canConfirm:this.canConfirm,renderBody:this.renderBody})}},{key:"renderBody",value:function(){return this.props.isOpen?a.createElement(Zn,{options:this.state.options,onChange:this.onOptionsChange,dataSource:this.props.dataSource,isLocalDataSource:this.isLocalDataStore,temporalCoverage:this.props.temporalCoverage,canConstrainTime:this.props.canConstrainTime,canConstrainRegion:this.props.canConstrainRegion,canConstrainVariables:this.props.canConstrainVariables,canCache:this.props.canCache}):null}},{key:"isRemoteDataStore",get:function(){return Object(B.X)(this.props.dataStore)}},{key:"isLocalDataStore",get:function(){return Object(B.W)(this.props.dataStore)}}],[{key:"mapPropsToState",value:function(e){var t=e.options||Zn.defaultOptions(Object(B.W)(e.dataStore),e.temporalCoverage),n=e.canCache&&t.isCacheDataSourceSelected;return t=Zn.ensureDateRangeIsValidated(t,e.temporalCoverage),{options:t=Object(d.a)(Object(d.a)({},t),{},{isCacheDataSourceSelected:n})}}}]),n}(a.Component);xa.DIALOG_ID="openDatasetDialog";var Ma=Object(o.b)((function(e){var t=Oe.x(xa.DIALOG_ID)(e);return{isOpen:t.isOpen,dataStore:Oe.lb(e),dataSource:Oe.hb(e),temporalCoverage:Oe.ib(e),canConstrainTime:Oe.o(e),canConstrainRegion:Oe.n(e),canConstrainVariables:Oe.p(e),canCache:Oe.m(e),options:t.options}}))(xa);var Va=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).state={removeFiles:!1},a.onCancel=a.onCancel.bind(Object(ie.a)(a)),a.onConfirm=a.onConfirm.bind(Object(ie.a)(a)),a.renderBody=a.renderBody.bind(Object(ie.a)(a)),a.onRemoveFilesChange=a.onRemoveFilesChange.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.setState({removeFiles:!1})}},{key:"onCancel",value:function(){this.props.dispatch(c.Pb(n.DIALOG_ID))}},{key:"onConfirm",value:function(){this.props.dispatch(c.Pb(n.DIALOG_ID,this.state)),this.props.dispatch(c.kc(this.props.dataSource.id,this.state.removeFiles))}},{key:"onRemoveFilesChange",value:function(e){this.setState({removeFiles:e.target.checked})}},{key:"render",value:function(){var e=this.props.isOpen;return e&&this.props.dataSource?a.createElement(Lt.a,{isOpen:e,title:"Remove Data Source",icon:"trash",confirmTitle:"Remove",confirmIconName:"delete",confirmTooltip:"Remove the file data source.",onCancel:this.onCancel,onConfirm:this.onConfirm,renderBody:this.renderBody}):null}},{key:"renderBody",value:function(){return this.props.isOpen?a.createElement("div",null,a.createElement(Nn,{label:"You are about to remove the definition for the file data source",longId:this.props.dataSource.id}),a.createElement(ue.Checkbox,{style:{marginTop:"1em"},checked:this.state.removeFiles,label:"Remove data files from disk too",onChange:this.onRemoveFilesChange})):null}}]),n}(a.Component);Va.DIALOG_ID="removeDatasetDialog";var Ba=Object(o.b)((function(e){return{isOpen:Oe.x(Va.DIALOG_ID)(e).isOpen,dataSource:Oe.hb(e)}}))(Va),Wa={default:ue.Intent.NONE,primary:ue.Intent.PRIMARY,success:ue.Intent.SUCCESS,warning:ue.Intent.WARNING,danger:ue.Intent.DANGER};var Fa={setSelectedDataStoreId:c.Fc,setSelectedDataSourceId:c.Ec,setDataSourceFilterExpr:c.vc,setSessionState:c.Qc,setControlState:c.uc,updateSessionState:c.rd,refreshLocalDataStore:c.ic,showDialog:c.Wc,hideDialog:c.Pb},Ua=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).handleAddDatasetDialog=a.handleAddDatasetDialog.bind(Object(ie.a)(a)),a.handleRemoveDatasetDialog=a.handleRemoveDatasetDialog.bind(Object(ie.a)(a)),a.handleShowOpenDatasetDialog=a.handleShowOpenDatasetDialog.bind(Object(ie.a)(a)),a.handleRefreshLocalDataStore=a.handleRefreshLocalDataStore.bind(Object(ie.a)(a)),a.handleListHeightChanged=a.handleListHeightChanged.bind(Object(ie.a)(a)),a.handleShowDetailsChanged=a.handleShowDetailsChanged.bind(Object(ie.a)(a)),a.handleDataStoreSelected=a.handleDataStoreSelected.bind(Object(ie.a)(a)),a.handleShowDataStoreDescriptionChanged=a.handleShowDataStoreDescriptionChanged.bind(Object(ie.a)(a)),a.handleShowDataStoreNoticesChanged=a.handleShowDataStoreNoticesChanged.bind(Object(ie.a)(a)),a.handleShowAllDataSourcesChanged=a.handleShowAllDataSourcesChanged.bind(Object(ie.a)(a)),a.handleShowDataSourceIDsChanged=a.handleShowDataSourceIDsChanged.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"render",value:function(){if(!(this.props.dataStores&&this.props.dataStores.length))return this.renderNoDataStoreMessage();var e=this.props.selectedDataSources&&this.props.selectedDataSources.length,t=this.props.selectedDataSource,r=Object(B.W)(this.props.selectedDataStore),o=!!t&&!Object(B.o)(t),i=t&&this.props.hasWorkspace&&!o,l=a.createElement(ue.ButtonGroup,null,r&&a.createElement(wt,{tooltipContent:"Refresh local data store",onClick:this.handleRefreshLocalDataStore,icon:"refresh",tooltipPosition:"top"}),o&&a.createElement(ue.Popover,{popoverClassName:ue.Classes.POPOVER_CONTENT_SIZING,enforceFocus:!1,interactionKind:ue.PopoverInteractionKind.HOVER,position:ue.Position.TOP},a.createElement(wt,{icon:"warning-sign",intent:ue.Intent.WARNING}),a.createElement(vn,{isSandboxedMode:this.props.isSandboxedMode,dataSource:t})),a.createElement(wt,{tooltipContent:"Open data source",intent:ue.Intent.PRIMARY,onClick:this.handleShowOpenDatasetDialog,disabled:!i,icon:"folder-shared-open",tooltipPosition:"top"}),a.createElement(En,null),a.createElement(Ba,null),a.createElement(Ma,null));return a.createElement("div",null,this.renderDataStoreSelector(),a.createElement("div",{style:n.FLEX_ROW_STYLE},a.createElement("span",{style:n.SPACER_STYLE}),a.createElement(ue.Tooltip,{content:a.createElement("div",null,"List also datasets that cannot be opened directly.",a.createElement("br",null),"Usually they can be downloaded manually, then",a.createElement("br",null),"opened by one of the ",a.createElement("code",null,"read_xxx()")," operations.")},a.createElement(ue.Checkbox,{label:"All data sources",checked:this.props.showAllDataSources,onChange:this.handleShowAllDataSourcesChanged,style:{marginBottom:2,marginTop:6,marginRight:6}})),a.createElement(ue.Checkbox,{label:"Show identifiers",checked:this.props.showDataSourceIDs,onChange:this.handleShowDataSourceIDsChanged,style:{marginBottom:2,marginTop:6}})),this.renderDataSourceFilterExprInput(),a.createElement(Ut,{showDetails:this.props.showDataSourceDetails,onShowDetailsChange:this.handleShowDetailsChanged,isSplitPanel:!0,contentHeight:this.props.dataSourceListHeight,onContentHeightChange:this.handleListHeightChanged,actionComponent:l},e?a.createElement(bn,{dataSources:this.props.filteredDataSources,selectedDataSourceId:this.props.selectedDataSource?this.props.selectedDataSource.id:null,setSelectedDataSourceId:this.props.setSelectedDataSourceId,showDataSourceIDs:this.props.showDataSourceIDs,doubleClickAction:i?this.handleShowOpenDatasetDialog:void 0}):this.renderNoDataSourcesMessage(),a.createElement(nn,{dataSource:this.props.selectedDataSource})))}},{key:"handleAddDatasetDialog",value:function(){this.props.showDialog("addDatasetDialog")}},{key:"handleRemoveDatasetDialog",value:function(){this.props.showDialog("removeDatasetDialog")}},{key:"handleRefreshLocalDataStore",value:function(){this.props.refreshLocalDataStore()}},{key:"handleShowOpenDatasetDialog",value:function(){this.props.showDialog("openDatasetDialog")}},{key:"handleDataStoreSelected",value:function(e){var t=e.target.value;this.props.setSelectedDataStoreId(t)}},{key:"handleListHeightChanged",value:function(e){this.props.setSessionState("dataSourceListHeight",e)}},{key:"handleShowDetailsChanged",value:function(e){this.props.setSessionState("showDataSourceDetails",e)}},{key:"handleShowDataStoreDescriptionChanged",value:function(){this.props.updateSessionState({showDataStoreDescription:!this.props.showDataStoreDescription})}},{key:"handleShowDataStoreNoticesChanged",value:function(){this.props.updateSessionState({showDataStoreNotices:!this.props.showDataStoreNotices})}},{key:"handleShowAllDataSourcesChanged",value:function(e){this.props.updateSessionState({showAllDataSources:e.target.checked})}},{key:"handleShowDataSourceIDsChanged",value:function(e){this.props.updateSessionState({showDataSourceIDs:e.target.checked})}},{key:"renderDataSourceFilterExprInput",value:function(){var e=this,t=a.createElement(ue.Tag,{className:ue.Classes.MINIMAL,onRemove:function(){return e.props.setDataSourceFilterExpr("")}},this.props.filteredDataSources&&this.props.filteredDataSources.length);return a.createElement("div",{style:{paddingBottom:2}},a.createElement(ue.InputGroup,{disabled:!1,leftIcon:"filter",onChange:function(t){return e.props.setDataSourceFilterExpr(t.target.value)},placeholder:"Find data source",rightElement:t,value:this.props.dataSourceFilterExpr}))}},{key:"renderDataStoreSelector",value:function(){if(!this.props.dataStores||!this.props.dataStores.length)return null;var e,t=[],r=Object(g.a)(this.props.dataStores);try{for(r.s();!(e=r.n()).done;){var o=e.value;t.push(a.createElement("option",{key:o.id,value:o.id},o.title||o.id))}}catch(h){r.e(h)}finally{r.f()}var i,l=this.props,c=l.selectedDataStore,s=l.showDataStoreDescription,u=c&&c.description,d=c&&c.notices&&c.notices.length;if(u&&(i=a.createElement(ue.Collapse,{isOpen:s},a.createElement(ue.Card,null,a.createElement(Qt,{source:c.description})))),d){var p=[];c.notices.forEach((function(e){p.push(a.createElement("div",{key:e.id,style:{margin:"0 4px 4px 4px"}},a.createElement(ue.Callout,{title:e.title,icon:e.icon,intent:e.intent in Wa?Wa[e.intent]:ue.Intent.NONE},a.createElement(Qt,{source:e.content}))))}))}return a.createElement(a.Fragment,null,a.createElement("div",{style:n.FLEX_ROW_STYLE},a.createElement(ue.Label,{className:"bp3-inline",style:n.LABEL_STYLE},a.createElement("span",{style:n.LABEL_TEXT_STYLE},"Data store:"),a.createElement(ue.HTMLSelect,{fill:!0,style:n.SELECT_STYLE,value:c?c.id:"",onChange:this.handleDataStoreSelected},t)),a.createElement(ue.ButtonGroup,null,a.createElement(wt,{tooltipContent:"Show/hide data store description",onClick:this.handleShowDataStoreDescriptionChanged,disabled:!u,active:s,icon:"help",tooltipPosition:"top"}))),i)}},{key:"renderNoDataStoreMessage",value:function(){return Se}},{key:"renderNoDataSourcesMessage",value:function(){var e=this.props.selectedDataStore;return Object(B.W)(e)?je:null===this.props.selectedDataSources?Ie:Pe}}]),n}(a.Component);Ua.FLEX_ROW_STYLE={display:"flex",alignItems:"center",marginBottom:1},Ua.SPACER_STYLE={flex:1},Ua.LABEL_STYLE={margin:"0 0.5em 0 0",display:"flex",flexGrow:1},Ua.LABEL_TEXT_STYLE={minWidth:"5em",overflow:"hidden",whiteSpace:"nowrap"},Ua.SELECT_STYLE={flexGrow:1};var Ga=Object(o.b)((function(e){return{hasWorkspace:!!Oe.oc(e),dataStores:Oe.u(e),dataSourceFilterExpr:Oe.s(e),selectedDataStore:Oe.lb(e),selectedDataSource:Oe.hb(e),selectedDataSources:Oe.jb(e),filteredDataSources:Oe.C(e),dataSourceListHeight:Oe.t(e),showDataSourceDetails:Oe.Sb(e),showAllDataSources:Oe.Rb(e),showDataSourceIDs:Oe.Tb(e),showDataStoreDescription:Oe.Ub(e),showDataStoreNotices:Oe.Vb(e),offlineMode:Oe.P(e),isSandboxedMode:!Oe.I(e)}}),Fa)(Ua);var Ya={margin:6,padding:10},Ha=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).handleOperationSelection=a.handleOperationSelection.bind(Object(ie.a)(a)),a.handleOperationFilterExprCleared=a.handleOperationFilterExprCleared.bind(Object(ie.a)(a)),a.handleOperationFilterExprChange=a.handleOperationFilterExprChange.bind(Object(ie.a)(a)),a.handleListHeightChanged=a.handleListHeightChanged.bind(Object(ie.a)(a)),a.handleShowDetailsChanged=a.handleShowDetailsChanged.bind(Object(ie.a)(a)),a.handleAddOperationStepButtonClicked=a.handleAddOperationStepButtonClicked.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"render",value:function(){var e,t=this.props.operations;if(t&&t.length){var n=this.props.operationFilterExpr,r=this.renderOperationTagFilterPanel(),o=this.renderOperationsList(),i=this.renderOperationDetailsCard(),l=a.createElement(ue.Tag,{className:ue.Classes.MINIMAL,onRemove:this.handleOperationFilterExprCleared},this.props.filteredOperations.length),c=a.createElement(ue.InputGroup,{disabled:!1,leftIcon:"filter",onChange:this.handleOperationFilterExprChange,placeholder:"Find operation",rightElement:l,value:n}),s=this.props.selectedOperation&&this.props.workspace,u=a.createElement(ue.ButtonGroup,null,a.createElement(wt,{tooltipContent:a.createElement("span",null,"Add a new operation step to",a.createElement("br",null),"the workspace's workflow"),intent:ue.Intent.PRIMARY,onClick:this.handleAddOperationStepButtonClicked,disabled:!s,text:"Add Step...",icon:"play",tooltipPosition:"top"}),s?a.createElement(Ta,{id:"newOperationStepDialog"}):null);e=a.createElement("div",null,c,r,a.createElement(Ut,{showDetails:this.props.showOperationDetails,onShowDetailsChange:this.handleShowDetailsChanged,isSplitPanel:!0,contentHeight:this.props.operationListHeight,onContentHeightChange:this.handleListHeightChanged,actionComponent:u},o,i))}else e=this.renderNoOperationsMessage();return e}},{key:"handleListHeightChanged",value:function(e){this.props.dispatch(c.Qc("operationListHeight",e))}},{key:"handleShowDetailsChanged",value:function(e){this.props.dispatch(c.Qc("showOperationDetails",e))}},{key:"handleOperationSelection",value:function(e){e.length>0?this.props.dispatch(c.Jc(e[0])):this.props.dispatch(c.Jc(null))}},{key:"handleOperationFilterExprCleared",value:function(){this.props.dispatch(c.Bc(""))}},{key:"handleOperationFilterExprChange",value:function(e){this.props.dispatch(c.Bc(e.target.value))}},{key:"handleAddOperationStepButtonClicked",value:function(){this.props.dispatch(c.ed("newOperationStepDialog"))}},{key:"renderOperationsList",value:function(){return a.createElement(en,null,a.createElement(mn.a,{items:this.props.filteredOperations,getItemKey:n.getItemKey,renderItem:n.renderItem,selectionMode:mn.b.SINGLE,selection:this.props.selectedOperationName,onSelection:this.handleOperationSelection,onItemDoubleClick:this.handleAddOperationStepButtonClicked}))}},{key:"renderOperationTagFilterPanel",value:function(){var e=this,t=new Set(this.props.operationFilterTags),n=this.props.operationsTagCounts,r={marginRight:"0.2em",marginTop:"0",marginBottom:"0",paddingTop:"0",paddingBottom:"0",height:"4ex"},o=[];t.forEach((function(t){o.push(a.createElement(ue.Tag,{intent:ue.Intent.PRIMARY,minimal:!0,style:r,onRemove:function(){return e.removeTagName(t)}},"".concat(t)))}));var i=[];n.forEach((function(n,r){t.has(r)||i.push(a.createElement(ue.MenuItem,{key:r,text:"".concat(r," (").concat(n,")"),onClick:function(){return e.addTagName(r)}}))}));var l=null;if(i.length){var c=a.createElement(ue.Menu,null,i);l=a.createElement(ue.Popover,{content:c,interactionKind:ue.PopoverInteractionKind.CLICK},a.createElement(ue.Tag,{intent:ue.Intent.SUCCESS,minimal:!0,icon:"small-plus",style:r}))}return a.createElement("div",{style:{padding:"0.2em",display:"flex",alignItems:"center"}},l,o)}},{key:"addTagName",value:function(e){var t=new Set(this.props.operationFilterTags);t.add(e),this.props.dispatch(c.Cc(Array.from(t)))}},{key:"removeTagName",value:function(e){var t=new Set(this.props.operationFilterTags);t.delete(e),this.props.dispatch(c.Cc(Array.from(t)))}},{key:"renderOperationDetailsCard",value:function(){var e=this.props.selectedOperation,t="No selection",r=null,o=null,i=null,l=null;if(e){if(t=e.name,e.description&&(r=a.createElement("p",{className:"user-selectable"},a.createElement(Qt,{source:e.description}))),e.tags&&(o=a.createElement("p",null,a.createElement("strong",null,"Tags:")," ",e.tags.join(", "))),e.outputs&&e.outputs.length){var c=e.outputs.map((function(e){return a.createElement("li",{key:e.name},a.createElement(Gn,{label:e.name,em:!0,dataType:e.dataType,units:e.units}),a.createElement(Qt,{source:n.getOutputDescriptionText(e)}))}));l=a.createElement("div",null,a.createElement("p",null,a.createElement("strong",null,n.getMultiplicityText(e.outputs.length,"Output")+":")),a.createElement("ul",null,c))}if(e.inputs&&e.inputs.length){var s=e.inputs.map((function(e){return a.createElement("li",{key:e.name},a.createElement(Gn,{label:e.name,em:!0,dataType:e.dataType,units:e.units}),a.createElement(Qt,{source:n.getInputDescriptionText(e)}))}));i=a.createElement("div",null,a.createElement("p",null,a.createElement("strong",null,n.getMultiplicityText(e.outputs.length,"Input")+":")),a.createElement("ul",null,s))}}return a.createElement(en,null,a.createElement(ue.Card,{elevation:2,style:Ya},a.createElement("h3",{className:"user-selectable"},t),r,o,l,i))}},{key:"renderNoOperationsMessage",value:function(){return De}}],[{key:"getItemKey",value:function(e){return e.name}},{key:"renderItem",value:function(e){var t,n=e.name;return t=e.outputs.length?1===e.outputs.length?e.outputs[0].dataType:"".concat(e.outputs.length," types"):"",a.createElement(Gn,{label:n,dataType:t})}},{key:"formatPortDescriptionText",value:function(e){return e&&""!==e?((e=e.trim()).endsWith(".")||(e+=".")," - "+e):e}},{key:"getInputDescriptionText",value:function(e){var t=n.formatPortDescriptionText(e.description);return"undefined"===typeof e.defaultValue?t+=" Mandatory value.":t+=' Default value is "'.concat(e.defaultValue,'".'),t}},{key:"getOutputDescriptionText",value:function(e){return n.formatPortDescriptionText(e.description)}},{key:"getMultiplicityText",value:function(e,t,n){return 1===e?t:n||t+"s"}}]),n}(a.Component),Ka=Object(o.b)((function(e){return{workspace:e.data.workspace,operations:Oe.T(e),selectedOperation:Oe.wb(e),filteredOperations:Oe.D(e),selectedOperationName:Oe.vb(e),operationFilterTags:Oe.S(e)||Oe.a,operationFilterExpr:Oe.R(e),operationsTagCounts:Oe.U(e),operationListHeight:e.session.operationListHeight,showOperationDetails:e.session.showOperationDetails}}))(Ha);var za=Object(o.b)((function(e){return{webAPIStatus:e.communication.webAPIStatus,webAPIServiceInfo:e.communication.webAPIServiceInfo}}))((function(e){var t=e.webAPIStatus,n=e.webAPIServiceInfo,r=function(){window.location.reload()};switch(t){case"open":return null;case"login":return a.createElement(Xa,{message:"Logging in...",icon:"log-in",isWaiting:!0});case"launching":return a.createElement(Xa,{message:"Launching Cate service...",icon:"log-in",isWaiting:!0});case"connecting":return a.createElement(Xa,{message:"Connecting to Cate service...",icon:"log-in",isWaiting:!0});case"shuttingDown":return a.createElement(Xa,{message:"Shutting down Cate service...",icon:"log-out",isWaiting:!0});case"loggingOut":return a.createElement(Xa,{message:"Logging out...",icon:"log-out",isWaiting:!0});case"closed":var o,i=n.autoStopInfo;return i&&i.inactivityTime>=i.availableTime-5?(o='Cate service has been shut down due to inactivity. Press "Retry" to try reconnecting.',a.createElement(Xa,{message:o,icon:"offline",isWaiting:!1,onRetry:r})):(o="The connection to the Cate service has been closed unexpectedly.",a.createElement(Za,{message:o,icon:"offline",onRetry:r}));case"error":return a.createElement(Za,{message:"Oops! An error occurred while launching or connecting the Cate service.",icon:"offline",onRetry:r});default:return a.createElement(Za,{message:"Oops! No service available.",icon:"offline"})}})),qa={marginTop:12},Ja={marginTop:6,textAlign:"center",width:"100%"},Xa=function(e){var t,n,r=e.message,o=e.icon,i=e.isWaiting,l=e.onRetry,c=e.onCancel;if(i&&(t=a.createElement("div",{style:qa},a.createElement(ue.ProgressBar,{intent:ue.Intent.SUCCESS}))),l||c){var s=c?a.createElement(ue.Button,{onClick:c,intent:ue.Intent.PRIMARY},"Cancel"):null,u=l?a.createElement(ue.Button,{onClick:l},"Retry"):null;n=a.createElement("div",{className:ue.Classes.DIALOG_FOOTER},a.createElement("div",{className:ue.Classes.DIALOG_FOOTER_ACTIONS},s,u))}return a.createElement(ue.Dialog,{isOpen:!0,canEscapeKeyClose:!1,canOutsideClickClose:!1},a.createElement("div",{className:ue.Classes.DIALOG_BODY},a.createElement("div",{style:Ja},a.createElement(ue.Icon,{icon:o,iconSize:32})),a.createElement("div",{style:qa},r),t),n)},Za=function(e){var t=e.message,n=e.icon,r=e.isWaiting,o=e.onRetry,i=e.onCancel;return a.createElement(Xa,{message:t,icon:n,isWaiting:r,onRetry:o,onCancel:i})},Qa="workflowStepPropertiesDialog";var $a=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onCancel=a.onCancel.bind(Object(ie.a)(a)),a.onConfirm=a.onConfirm.bind(Object(ie.a)(a)),a.canConfirm=a.canConfirm.bind(Object(ie.a)(a)),a.renderBody=a.renderBody.bind(Object(ie.a)(a)),a.state=n.mapPropsToState(e),a}return Object(oe.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.setState(n.mapPropsToState(e))}},{key:"onConfirm",value:function(){this.props.dispatch(c.Pb(Qa));var e=this.props.selectedWorkflowStep.id||"",t=this.state.stepId?this.state.stepId.trim():"",n=this.props.selectedWorkflowStep.persistent||!1,a=this.state.stepPersistent||!1;n!==a&&this.props.dispatch(c.Vc(e,a)),e!==t&&this.props.dispatch(c.nc(e,t))}},{key:"onCancel",value:function(){this.props.dispatch(c.Pb(Qa))}},{key:"canConfirm",value:function(){var e=this.props.selectedWorkflowStep.id||"",t=this.state.stepId?this.state.stepId.trim():"",n=this.props.selectedWorkflowStep.persistent||!1,a=this.state.stepPersistent||!1,r=/^[a-zA-z_][a-zA-z0-9_]*$/.test(t);return""!==t&&(t!==e||a!==n)&&r}},{key:"render",value:function(){return this.props.isOpen?a.createElement(Lt.a,{isOpen:this.props.isOpen,title:"Workflow Step & Resource Properties",icon:"edit",onCancel:this.onCancel,onConfirm:this.onConfirm,canConfirm:this.canConfirm,renderBody:this.renderBody}):null}},{key:"renderBody",value:function(){var e=this;return this.props.isOpen?a.createElement("div",{style:{width:"100%",padding:6}},a.createElement(ue.Label,null,"Resource name",a.createElement("span",{className:"bp3-text-muted"}," (must be unique within the workspace)"),a.createElement(ue.InputGroup,{style:{width:"100%"},type:"text",value:this.state.stepId,onChange:function(t){return e.setState({stepId:t.target.value})}}),a.createElement("span",{className:"bp3-text-muted"},"The Resource name must only contain the uppercase and lowercase letters A through Z, the underscore _ and, except for the first character, the digits 0 through 9.")),a.createElement("div",{style:{paddingTop:10}},a.createElement(ue.Checkbox,{checked:this.state.stepPersistent,onChange:function(t){return e.setState({stepPersistent:t.target.checked})},label:"Persist resulting resource"}),a.createElement("span",{className:"bp3-text-muted"},"If checked, the resource will be read from a file in the workspac next time the workspace is opened. This usually speeds up the loading of workspace, but requires extra disk space."))):null}}],[{key:"mapPropsToState",value:function(e){var t=e.selectedWorkflowStep;return f.a(t),{stepId:t.id||"",stepPersistent:t.persistent||!1}}}]),n}(a.Component),er=Object(o.b)((function(e,t){return{selectedWorkflowStep:t.selectedWorkflowStep,isOpen:Oe.x(Qa)(e).isOpen,resources:Oe.bb(e)}}))($a);var tr=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).handleResourceListHeightChanged=a.handleResourceListHeightChanged.bind(Object(ie.a)(a)),a.handleShowResourceDetailsChanged=a.handleShowResourceDetailsChanged.bind(Object(ie.a)(a)),a.handleResourceNameSelected=a.handleResourceNameSelected.bind(Object(ie.a)(a)),a.handleStepListHeightChanged=a.handleStepListHeightChanged.bind(Object(ie.a)(a)),a.handleShowWorkflowStepDetailsChanged=a.handleShowWorkflowStepDetailsChanged.bind(Object(ie.a)(a)),a.handleWorkflowStepIdSelected=a.handleWorkflowStepIdSelected.bind(Object(ie.a)(a)),a.handleShowFigureButtonClicked=a.handleShowFigureButtonClicked.bind(Object(ie.a)(a)),a.handleWorkflowStepPropertiesButtonClicked=a.handleWorkflowStepPropertiesButtonClicked.bind(Object(ie.a)(a)),a.handleOpenWorkspaceDirectoryClicked=a.handleOpenWorkspaceDirectoryClicked.bind(Object(ie.a)(a)),a.handleEditOperationStepButtonClicked=a.handleEditOperationStepButtonClicked.bind(Object(ie.a)(a)),a.renderStepItem=a.renderStepItem.bind(Object(ie.a)(a)),a.renderResourceAttrName=a.renderResourceAttrName.bind(Object(ie.a)(a)),a.renderResourceAttrValue=a.renderResourceAttrValue.bind(Object(ie.a)(a)),a.renderOperationStepInputName=a.renderOperationStepInputName.bind(Object(ie.a)(a)),a.renderOperationStepInputValue=a.renderOperationStepInputValue.bind(Object(ie.a)(a)),a.renderOperationStepOutputName=a.renderOperationStepOutputName.bind(Object(ie.a)(a)),a.renderOperationStepOutputValue=a.renderOperationStepOutputValue.bind(Object(ie.a)(a)),a.handleWorkspacePanelModeChanged=a.handleWorkspacePanelModeChanged.bind(Object(ie.a)(a)),a.handleRemoveOperationStepButtonClicked=a.handleRemoveOperationStepButtonClicked.bind(Object(ie.a)(a)),a.handleCleanWorkflowButtonClicked=a.handleCleanWorkflowButtonClicked.bind(Object(ie.a)(a)),a.handleShowResourceTableView=a.handleShowResourceTableView.bind(Object(ie.a)(a)),a.handleCopyWorkflowAsPythonScript=a.handleCopyWorkflowAsPythonScript.bind(Object(ie.a)(a)),a.handleCopyWorkflowAsShellScript=a.handleCopyWorkflowAsShellScript.bind(Object(ie.a)(a)),a.handleCopyWorkflowAsJSON=a.handleCopyWorkflowAsJSON.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"handleResourceNameSelected",value:function(e){e&&e.length?this.props.dispatch(c.Pc(e[0])):this.props.dispatch(c.Pc(null))}},{key:"handleWorkflowStepIdSelected",value:function(e){e&&e.length?this.props.dispatch(c.Oc(e[0])):this.props.dispatch(c.Oc(null))}},{key:"handleResourceListHeightChanged",value:function(e){this.props.dispatch(c.Qc("resourceListHeight",e))}},{key:"handleShowResourceDetailsChanged",value:function(e){this.props.dispatch(c.Qc("showResourceDetails",e))}},{key:"handleStepListHeightChanged",value:function(e){this.props.dispatch(c.Qc("workflowStepListHeight",e))}},{key:"handleShowWorkflowStepDetailsChanged",value:function(e){this.props.dispatch(c.Qc("showWorkflowStepDetails",e))}},{key:"handleShowFigureButtonClicked",value:function(){this.props.dispatch(c.Yc(this.getEffectiveResource(),this.props.activeViewId))}},{key:"handleShowResourceTableView",value:function(){this.props.dispatch(c.gd(this.getEffectiveResource().name,null,this.props.activeViewId))}},{key:"handleWorkflowStepPropertiesButtonClicked",value:function(){this.props.dispatch(c.Wc("workflowStepPropertiesDialog"))}},{key:"handleOpenWorkspaceDirectoryClicked",value:function(){this.props.dispatch(c.bd(this.props.workspace.baseDir))}},{key:"handleCopyWorkflowAsPythonScript",value:function(){var e=ar(this.props.operations,this.props.workspace.workflow.steps,"python");c.Hb(e)}},{key:"handleCopyWorkflowAsShellScript",value:function(){var e=ar(this.props.operations,this.props.workspace.workflow.steps,"shell");c.Hb(e)}},{key:"handleCopyWorkflowAsJSON",value:function(){c.Hb(JSON.stringify(this.props.workspace.workflow,null,4))}},{key:"handleEditOperationStepButtonClicked",value:function(){this.props.dispatch(c.ed("editOperationStepDialog"))}},{key:"handleRemoveOperationStepButtonClicked",value:function(){var e=this.getEffectiveResourceName();e&&this.props.dispatch(c.Ib(e))}},{key:"handleCleanWorkflowButtonClicked",value:function(){this.props.dispatch(c.Cb())}},{key:"handleWorkspacePanelModeChanged",value:function(e){this.props.dispatch(c.rd({workspacePanelMode:e}))}},{key:"getEffectiveWorkflowStep",value:function(){return"steps"===this.props.workspacePanelMode?this.props.selectedWorkflowStep:this.props.selectedResourceWorkflowStep}},{key:"getEffectiveResource",value:function(){return"resources"===this.props.workspacePanelMode?this.props.selectedResource:this.props.selectedWorkflowStepResource}},{key:"getEffectiveResourceName",value:function(){var e=this.getEffectiveResource(),t=this.getEffectiveWorkflowStep();return e?e.name:t?t.id:null}},{key:"renderStepItem",value:function(e){return a.createElement("span",null,this.getWorkflowStepLabel(e))}},{key:"render",value:function(){var e=this.props.workspace;if(!e)return Ce;f.a(e.workflow);var t=e.workflow.steps;f.a(t);var r=e.resources;f.a(r);var o=e.isScratch||!e.baseDir?"<unnamed>":e.baseDir.split(/[\\/]/).pop(),i=a.createElement(ue.Tooltip,{content:e.baseDir,position:ue.PopoverPosition.AUTO_START},a.createElement("strong",null,o)),l=null;e.isModified?l=a.createElement("span",{key:0,style:n.STATE_TAG_STYLE,className:"bp3-tag bp3-intent-warning bp3-minimal"},"Modified"):e.isSaved||(l=a.createElement("span",{key:1,style:n.STATE_TAG_STYLE,className:"bp3-tag bp3-intent-success bp3-minimal"},"Not saved"));var c=a.createElement(wt,{tooltipContent:"Show workspace directory in file system",onClick:this.handleOpenWorkspaceDirectoryClicked,icon:"folder-open",tooltipPosition:"top"}),s=a.createElement(ue.Popover,{position:ue.PopoverPosition.LEFT},a.createElement(wt,{tooltipContent:"Copy workflow",disabled:!t.length,icon:"clipboard",tooltipPosition:"top"}),a.createElement(ue.Menu,null,a.createElement(ue.MenuItem,{onClick:this.handleCopyWorkflowAsPythonScript,text:"Copy workflow as Python Script"}),a.createElement(ue.MenuItem,{onClick:this.handleCopyWorkflowAsShellScript,text:"Copy workflow as Shell Script"}),a.createElement(ue.MenuItem,{onClick:this.handleCopyWorkflowAsJSON,text:"Copy workflow as JSON"})));return a.createElement(en,null,a.createElement("div",{style:n.FLEX_ROW_STYLE},i,a.createElement("span",{style:n.SPACER_STYLE}),l,a.createElement(ue.ButtonGroup,null,c,s)),a.createElement(ue.Tabs,{id:"workflow",renderActiveTabPanelOnly:!0,selectedTabId:this.props.workspacePanelMode,onChange:this.handleWorkspacePanelModeChanged},a.createElement(ue.Tab,{id:"steps",title:"Workflow (".concat(t.length,")"),panel:this.renderWorkflowStepsPanel()}),a.createElement(ue.Tab,{id:"resources",title:"Resources (".concat(r.length,")"),panel:this.renderResourcesPanel()})))}},{key:"renderWorkspaceActions",value:function(){var e=this.getEffectiveResource(),t=this.getEffectiveWorkflowStep(),n=Object(B.U)(e),r=t&&t.op,o=this.props.workspace&&this.props.workspace.workflow.steps.length,i=Object(B.T)(e);return a.createElement(ue.ButtonGroup,null,a.createElement(wt,{tooltipContent:"Show figure",disabled:!n,icon:"eye-open",tooltipPosition:"top",onClick:this.handleShowFigureButtonClicked}),a.createElement(wt,{tooltipContent:"Show data in table",disabled:!i,icon:"th",tooltipPosition:"top",onClick:this.handleShowResourceTableView}),a.createElement(wt,{tooltipContent:"Resource/step properties",disabled:!e,icon:"label",tooltipPosition:"top",onClick:this.handleWorkflowStepPropertiesButtonClicked}),a.createElement(wt,{tooltipContent:"Edit workflow step",intent:ue.Intent.PRIMARY,disabled:!t,icon:"edit",tooltipPosition:"top",onClick:this.handleEditOperationStepButtonClicked}),a.createElement(wt,{tooltipContent:"Remove workflow step and its resource",disabled:!t,icon:"remove",tooltipPosition:"top",onClick:this.handleRemoveOperationStepButtonClicked}),a.createElement(wt,{tooltipContent:"Clean workspace, remove all steps and resources",disabled:!o,icon:"delete",tooltipPosition:"top",onClick:this.handleCleanWorkflowButtonClicked}),t?a.createElement(er,{selectedWorkflowStep:t}):null,r?a.createElement(Ta,{id:"editOperationStepDialog",operationStep:t}):null)}},{key:"renderResourcesPanel",value:function(){var e=this.props.workspace.resources;return e&&e.length?a.createElement(Ut,{showDetails:this.props.showResourceDetails,onShowDetailsChange:this.handleShowResourceDetailsChanged,isSplitPanel:!0,contentHeight:this.props.resourceListHeight,onContentHeightChange:this.handleResourceListHeightChanged,actionComponent:this.renderWorkspaceActions()},this.renderResourcesList(),this.renderResourceDetails()):ke}},{key:"renderResourcesList",value:function(){var e=this.props.workspace.resources;return a.createElement(en,null,a.createElement(mn.a,{items:e,getItemKey:n.getResourceItemKey,renderItem:n.renderResourceItem,selection:this.props.selectedResourceName,onSelection:this.handleResourceNameSelected,onItemDoubleClick:this.handleEditOperationStepButtonClicked}))}},{key:"renderResourceDetails",value:function(){var e=this.props.selectedResourceAttributes;return e&&e.length?a.createElement(en,null,a.createElement("span",null,"Attributes:"),a.createElement(Mt.a,{numRows:e.length,enableRowHeader:!1},a.createElement(xt.a,{name:"Name",cellRenderer:this.renderResourceAttrName}),a.createElement(xt.a,{name:"Value",cellRenderer:this.renderResourceAttrValue}))):null}},{key:"renderWorkflowStepsPanel",value:function(){var e=this.props.workspace.workflow.steps;return e&&e.length?a.createElement(Ut,{showDetails:this.props.showWorkflowStepDetails,onShowDetailsChange:this.handleShowWorkflowStepDetailsChanged,isSplitPanel:!0,contentHeight:this.props.workflowStepListHeight,onContentHeightChange:this.handleStepListHeightChanged,actionComponent:this.renderWorkspaceActions()},this.renderWorkflowStepsList(),this.renderWorkflowStepDetails()):we}},{key:"renderWorkflowStepsList",value:function(){var e=this.props.workspace.workflow.steps;return a.createElement(en,null,a.createElement(mn.a,{items:e,getItemKey:n.getStepItemKey,renderItem:this.renderStepItem,selection:this.props.selectedWorkflowStepId,onSelection:this.handleWorkflowStepIdSelected,onItemDoubleClick:this.handleEditOperationStepButtonClicked}))}},{key:"renderWorkflowStepDetails",value:function(){var e=this.props.selectedWorkflowStepOp;if(!e)return null;var t=n.renderWorkflowStepPorts(e.inputs,"Step inputs:","No step inputs.",this.renderOperationStepInputName,this.renderOperationStepInputValue);return a.createElement(en,null,t,null)}},{key:"renderResourceAttrName",value:function(e){return a.createElement(Nt.a,null,a.createElement(Gt.a,null,this.props.selectedResourceAttributes[e][0]))}},{key:"renderResourceAttrValue",value:function(e){return a.createElement(Nt.a,null,a.createElement(Gt.a,{showPopover:Gt.b.WHEN_TRUNCATED,detectTruncation:!0},"".concat(this.props.selectedResourceAttributes[e][1])))}},{key:"renderOperationStepInputName",value:function(e){var t=this.props.selectedWorkflowStepOp.inputs[e],a=this.props.selectedWorkflowStep.inputs[t.name];return n.renderWorkflowPortName(t,a)}},{key:"renderOperationStepInputValue",value:function(e){var t=this.props.selectedWorkflowStepOp.inputs[e],a=this.props.selectedWorkflowStep.inputs[t.name];return n.renderWorkflowPortValue(t,a)}},{key:"renderOperationStepOutputName",value:function(e){var t=this.props.selectedWorkflowStepOp.outputs[e],a=this.props.selectedWorkflowStep.outputs[t.name];return n.renderWorkflowPortName(t,a)}},{key:"renderOperationStepOutputValue",value:function(e){var t=this.props.selectedWorkflowStepOp.outputs[e],a=this.props.selectedWorkflowStep.outputs[t.name];return n.renderWorkflowPortValue(t,a)}},{key:"getWorkflowStepLabel",value:function(e){var t=[];if(e&&e.op){var n=e.op,r=n.lastIndexOf(".");r>0&&(n=n.slice(r+1)),t.push(a.createElement("code",{key:0},n,"()"))}else t.push(a.createElement("code",{key:0},"?()"));var o=this.props.resourcesMap[e.id];return o&&(t.push(a.createElement("span",{key:1}," \u2192 ")),t.push(a.createElement(Gn,{key:2,label:o.name,dataType:o.dataType}))),e&&e.persistent&&(t.push(a.createElement("span",{key:3}," ")),t.push(a.createElement(ue.Icon,{key:4,icon:"database"}))),a.createElement("span",null,t)}}],[{key:"getResourceItemKey",value:function(e){return e.name}},{key:"renderResourceItem",value:function(e){return a.createElement(Gn,{label:e.name,dataType:e.dataType})}},{key:"getStepItemKey",value:function(e){return e.id}},{key:"renderWorkflowStepPorts",value:function(e,t,n,r,o){return e&&e.length?a.createElement("div",null,a.createElement("p",null,t),a.createElement(Mt.a,{numRows:e.length,enableRowHeader:!1},a.createElement(xt.a,{name:"Name",cellRenderer:r}),a.createElement(xt.a,{name:"Value",cellRenderer:o}))):a.createElement("div",null,a.createElement("p",null,n))}},{key:"renderWorkflowPortName",value:function(e,t){return a.createElement(Nt.a,null,a.createElement(Gt.a,{showPopover:Gt.b.ALWAYS},e.name))}},{key:"renderWorkflowPortValue",value:function(e,t){var n;if(t){var r;e.units&&(r=a.createElement("span",{className:"bp3-text-muted"}," (".concat(e.units,")")));var o=Object(v.e)(t)?t:t.source;if(o)n=a.createElement("span",null,"\u2197 ",a.createElement("em",null,o));else{var i=t.value;Object(v.e)(i)&&i.length>128&&(i=i.substr(0,128)+"..."),n=a.createElement("span",null,i,r)}}else{var l=e.defaultValue;n=Object(v.b)(l)?a.createElement("span",null,"".concat(l)," ",a.createElement("span",{className:"bp3-text-muted"},"(default value)")):a.createElement("span",{className:"bp3-text-muted"},"Not given.")}return a.createElement(Nt.a,null,n)}}]),n}(a.PureComponent);tr.STATE_TAG_STYLE={margin:2},tr.FLEX_ROW_STYLE={display:"flex",alignItems:"center"},tr.SPACER_STYLE={flex:1};var nr=Object(o.b)((function(e){return{workspace:Oe.oc(e),resourcesMap:Oe.Z(e),resourceListHeight:Oe.Y(e),showResourceDetails:Oe.Xb(e),selectedResource:Oe.Bb(e),selectedResourceAttributes:Oe.zb(e),selectedResourceName:Oe.Ab(e),selectedResourceWorkflowStep:Oe.Db(e),workflowStepListHeight:Oe.ic(e),showWorkflowStepDetails:Oe.Yb(e),selectedWorkflowStep:Oe.Pb(e),selectedWorkflowStepId:Oe.Mb(e),selectedWorkflowStepOp:Oe.Nb(e),selectedWorkflowStepResource:Oe.Ob(e),activeViewId:Oe.d(e),workspacePanelMode:e.session.workspacePanelMode,operations:Oe.T(e)}}))(tr);function ar(e,t,n){var a=[];"python"===n?a.push("import cate.ops"):a.push("cate ws new");for(var r=0;r<t.length;r++){var o=t[r],i=Object(B.r)(e,o.op);if(i&&i.inputs){"python"===n&&(a.push(""),a.push("# Step ".concat(r+1)));var l,c=[],s=Object(g.a)(i.inputs);try{for(s.s();!(l=s.n()).done;){var u=l.value,d=o.inputs[u.name];if(d){var p=Object(v.e)(d)?d:d.source;if(d&&p)"python"===n?c.push("".concat(u.name,"=").concat(p)):c.push("".concat(u.name,"=@").concat(p));else if(d){var h=d.value;Object(v.f)(h)&&(h=null);var f=u.defaultValue;Object(v.f)(f)&&(f=null),h!==f&&(Object(v.g)(h)?c.push("".concat(u.name,"=None")):Object(v.e)(h)?c.push("".concat(u.name,'="').concat(h,'"')):Object(v.a)(h)?c.push("".concat(u.name,"=").concat(h?"True":"False")):Object(v.a)(h)&&c.push("".concat(u.name,"=").concat(h)))}}}}catch(y){s.e(y)}finally{s.f()}var m=o.id,b=i.name;"python"===n?a.push("".concat(m," = cate.ops.").concat(b,"(").concat(c.join(", "),")")):a.push("cate res set ".concat(m," ").concat(b," ").concat(c.join(" ")))}}return"shell"===n&&a.push("cate ws exit"),a.push(""),a.join("\n")}var rr=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).handleSelectedVariableNameChanged=a.handleSelectedVariableNameChanged.bind(Object(ie.a)(a)),a.handleListHeightChanged=a.handleListHeightChanged.bind(Object(ie.a)(a)),a.handleShowDetailsChanged=a.handleShowDetailsChanged.bind(Object(ie.a)(a)),a.handleShowSelectedVariableLayer=a.handleShowSelectedVariableLayer.bind(Object(ie.a)(a)),a.handleAddVariableLayer=a.handleAddVariableLayer.bind(Object(ie.a)(a)),a.handleAddVariableTimeSeriesPlot=a.handleAddVariableTimeSeriesPlot.bind(Object(ie.a)(a)),a.handleAddVariableHistogramPlot=a.handleAddVariableHistogramPlot.bind(Object(ie.a)(a)),a.handleShowVariableTableView=a.handleShowVariableTableView.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"handleSelectedVariableNameChanged",value:function(e){var t=this.props.selectedResource;if(f.a(t),e&&e.length){var n=e[0],a=this.props.variables.find((function(e){return e.name===n}));f.a(a),this.props.dispatch(c.Nc(t,a,this.props.savedLayers))}else this.props.dispatch(c.Nc(t,null))}},{key:"handleListHeightChanged",value:function(e){this.props.dispatch(c.Qc("variableListHeight",e))}},{key:"handleShowDetailsChanged",value:function(e){this.props.dispatch(c.Qc("showVariableDetails",e))}},{key:"handleShowSelectedVariableLayer",value:function(){var e=this.props.showSelectedVariableLayer;this.props.dispatch(c.Rc(!e))}},{key:"handleAddVariableLayer",value:function(){var e=this.props.selectedResource,t=this.props.selectedVariable,n=this.props.activeViewId,a=this.props.savedLayers;f.a(e),f.a(t&&t.imageLayout),f.a(n),this.props.dispatch(c.yb(n,e,t,!0,a))}},{key:"handleAddVariableTimeSeriesPlot",value:function(){var e=this.props.selectedResource,t=this.props.selectedVariable,n=this.props.selectedPlacemark,a=n.properties.name||"placemark",r=n.geometry.coordinates,o={ds:{source:e.name},var:{value:t.name},indexers:{value:"lon=".concat(r[0],", lat=").concat(r[1])},properties:{value:null},file:{value:null}};this.props.dispatch(c.Uc("cate.ops.plot.plot",o,null,!1,"Creating time series plot for placemark ".concat(a)))}},{key:"handleAddVariableHistogramPlot",value:function(){var e=this.props.selectedResource,t=this.props.selectedVariable,n={ds:{source:e.name},var:{value:t.name},indexers:{value:null},properties:{value:"bins=250"},file:{value:null}};this.props.dispatch(c.Uc("cate.ops.plot.plot_hist",n,null,!1,"Creating histogram plot"))}},{key:"handleShowVariableTableView",value:function(){var e=this.props.selectedResource,t=this.props.selectedVariable;f.a(e),f.a(t),this.props.dispatch(c.gd(e.name,t.name,this.props.activeViewId))}},{key:"render",value:function(){var e,t=this.props.selectedResource,n=this.props.variables;return n&&n.length?a.createElement(Ut,{showDetails:this.props.showVariableDetails,onShowDetailsChange:this.handleShowDetailsChanged,isSplitPanel:!0,contentHeight:this.props.variableListHeight,onContentHeightChange:this.handleListHeightChanged,actionComponent:this.renderVariableActionRow()},a.createElement(ir,{selectedEntity:this.props.selectedEntity,globeViewPosition:this.props.globeViewPosition,positionData:this.props.positionData,selectedVariableName:this.props.selectedVariableName,onSelectedVariableNameChanged:this.handleSelectedVariableNameChanged,variables:this.props.variables}),a.createElement(lr,{tableData:this.props.selectedVariableAttributesTableData})):t?(e=t.name,a.createElement(ue.NonIdealState,{title:"No variables",icon:"circle",description:'Selected resource "'.concat(e,"\" doesn't contain any variables.")})):Le}},{key:"renderVariableActionRow",value:function(){var e=this.props.selectedVariable,t=e&&e.numDims>=2&&e.imageLayout,n=this.props.selectedPlacemark,r=this.props.activeViewType&&"world"===this.props.activeViewType,o=t&&r,i=t&&n,l=e&&e.numDims>0;return a.createElement(ue.ButtonGroup,null,a.createElement(wt,{tooltipContent:"Toggle image layer visibility",icon:this.props.showSelectedVariableLayer?"eye-open":"eye-off",tooltipPosition:"top",onClick:this.handleShowSelectedVariableLayer}),a.createElement(wt,{tooltipContent:"Add a new image layer",disabled:!o,icon:"layer",tooltipPosition:"top",onClick:this.handleAddVariableLayer}),a.createElement(wt,{tooltipContent:"Create a time series plot from selected placemark",disabled:!i,icon:"timeline-line-chart",tooltipPosition:"top",onClick:this.handleAddVariableTimeSeriesPlot}),a.createElement(wt,{tooltipContent:"Create a histogram plot",disabled:!l,icon:"timeline-bar-chart",tooltipPosition:"top",onClick:this.handleAddVariableHistogramPlot}),a.createElement(wt,{tooltipContent:"Show data in table (only first ".concat(1e4," values)"),icon:"th",tooltipPosition:"top",onClick:this.handleShowVariableTableView}))}}]),n}(a.Component);rr.VALUE_STYLE={float:"right",color:ue.Colors.BLUE5};var or=Object(o.b)((function(e){return{variables:Oe.ac(e)||Oe.a,selectedResource:Oe.Bb(e),selectedVariableName:Oe.Jb(e),selectedVariable:Oe.Kb(e),selectedVariableAttributesTableData:Oe.Gb(e),variableListHeight:e.session.variableListHeight,showVariableDetails:e.session.showVariableDetails,showSelectedVariableLayer:e.session.showSelectedVariableLayer,activeViewId:Oe.d(e),activeViewType:Oe.f(e),savedLayers:Oe.db(e),selectedPlacemark:Oe.yb(e),selectedEntity:Oe.mb(e),globeViewPosition:e.location.globeViewPosition,positionData:e.location.positionData}}))(rr),ir=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(){var e;Object(re.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).getItemKey=function(e){return e.name},e.getItemValue=function(t){var n;if(Object(B.Z)(t)){var a=e.props.selectedEntity;if(a&&a.properties){var r=a.properties[t.name];Object(v.c)(r)&&(n=r.getValue())}}else if(Object(B.Y)(t)){var o=e.props.positionData;o&&(n=o[t.name])}return Object(v.b)(n)?n:t.value},e.renderItem=function(t){var n=a.createElement(Gn,{label:t.name,dataType:t.dataType,tooltipText:t.attributes&&t.attributes.long_name}),r=e.getItemValue(t);return Object(v.b)(r)?a.createElement("div",null,n,a.createElement("span",{style:rr.VALUE_STYLE},"".concat(r))):n},e.handleVariableNameSelection=function(t){e.props.onSelectedVariableNameChanged(t)},e}return Object(oe.a)(n,[{key:"render",value:function(){var e="vlb",t=this.props.selectedEntity&&this.props.selectedEntity.id;t&&(e+="_".concat(t));var n=this.props.globeViewPosition;return n&&(e+="_".concat(n.longitude,",").concat(n.latitude)),a.createElement(en,null,a.createElement(mn.a,{key:e,items:this.props.variables,getItemKey:this.getItemKey,renderItem:this.renderItem,selection:this.props.selectedVariableName,selectionMode:mn.b.SINGLE,onSelection:this.handleVariableNameSelection}))}}]),n}(a.PureComponent),lr=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(){var e;Object(re.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderAttributeName=function(t){return a.createElement(Nt.a,null,e.props.tableData[t][0])},e.renderAttributeValue=function(t){return a.createElement(Nt.a,null,a.createElement(Gt.a,null,e.props.tableData[t][1]))},e}return Object(oe.a)(n,[{key:"render",value:function(){var e=this.props.tableData;return e&&e.length?a.createElement("div",{style:n.DIV_STYLE},a.createElement(Mt.a,{numRows:e.length,enableRowHeader:!1},a.createElement(xt.a,{name:"Name",cellRenderer:this.renderAttributeName}),a.createElement(xt.a,{name:"Value",cellRenderer:this.renderAttributeValue}))):null}}]),n}(a.PureComponent);lr.DIV_STYLE={paddingTop:4,width:"100%"};var cr=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onCancel=a.onCancel.bind(Object(ie.a)(a)),a.onConfirm=a.onConfirm.bind(Object(ie.a)(a)),a.canConfirm=a.canConfirm.bind(Object(ie.a)(a)),a.handleChangedVariableSelection=a.handleChangedVariableSelection.bind(Object(ie.a)(a)),a.renderBody=a.renderBody.bind(Object(ie.a)(a)),a.state={selectedIndices:null},a}return Object(oe.a)(n,[{key:"onCancel",value:function(){this.props.dispatch(c.Pb(n.DIALOG_ID))}},{key:"onConfirm",value:function(){this.props.dispatch(c.Pb(n.DIALOG_ID));var e,t=!0,a=Object(g.a)(this.state.selectedIndices);try{for(a.s();!(e=a.n()).done;){var r=e.value,o=this.props.layerVariables[r];this.props.dispatch(c.yb(this.props.activeViewId,o.resource,o.variable,t,this.props.savedLayers)),t=!1}}catch(i){a.e(i)}finally{a.f()}}},{key:"canConfirm",value:function(){return!!this.state.selectedIndices&&this.state.selectedIndices.length>0}},{key:"handleChangedVariableSelection",value:function(e){this.setState({selectedIndices:e.slice()})}},{key:"render",value:function(){return a.createElement(Lt.a,{isOpen:this.props.isOpen,title:n.DIALOG_TITLE,icon:"layers",onCancel:this.onCancel,onConfirm:this.onConfirm,canConfirm:this.canConfirm,renderBody:this.renderBody})}},{key:"renderBody",value:function(){return this.props.isOpen?this.props.layerVariables.length?a.createElement(en,null,a.createElement("p",null,"Select the variables you wish to add as a layer:"),a.createElement(mn.a,{items:this.props.layerVariables,getItemKey:n.getVariableItemKey,renderItem:n.renderVariableItem,selectionMode:mn.b.MULTIPLE,selection:this.state.selectedIndices,onSelection:this.handleChangedVariableSelection})):a.createElement("p",null,"There are currently no resource or variables that could be added as layers."):null}}],[{key:"getVariableItemKey",value:function(e,t){return t}},{key:"renderVariableItem",value:function(e){var t=e.variable;return a.createElement("div",null,a.createElement("span",null,e.resource.name),a.createElement("span",null," / "),a.createElement(Gn,{label:t.name,dataType:"".concat(t.dataType,"[").concat(t.dimNames,"]"),units:t.units}))}}]),n}(a.Component);cr.DIALOG_ID="layerSourcesDialog",cr.DIALOG_TITLE="Add Layer";var sr=Object(o.b)((function(e){return{isOpen:Oe.x(cr.DIALOG_ID)(e).isOpen,layers:Oe.L(e),savedLayers:Oe.db(e),activeViewId:Oe.d(e),resources:Oe.bb(e),layerVariables:Oe.sb(e)}}))(cr);var ur=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).handleCopyGeometryAsCsv=function(e){c.Hb(function(e,t){var n="longitude".concat(t=t||",","latitude\n");if("Point"===e.type){var a=e.coordinates;return"".concat(n).concat(a[0]).concat(t).concat(a[1],"\n")}if("LineString"===e.type){var r,o=e.coordinates,i=[],l=Object(g.a)(o);try{for(l.s();!(r=l.n()).done;){var c=r.value;i.push("".concat(c[0]).concat(t).concat(c[1],"\n"))}}catch(v){l.e(v)}finally{l.f()}return"".concat(n).concat(i.join(""))}if("Polygon"===e.type){var s,u=e.coordinates,d=[],p=Object(g.a)(u);try{for(p.s();!(s=p.n()).done;){var h=s.value;d.length>0&&d.push("# hole:\n");var f,m=Object(g.a)(h);try{for(m.s();!(f=m.n()).done;){var b=f.value;d.push("".concat(b[0]).concat(t).concat(b[1],"\n"))}}catch(v){m.e(v)}finally{m.f()}}}catch(v){p.e(v)}finally{p.f()}return"".concat(n).concat(d.join(""))}return""}(e.geometry))},a.handleCopyGeometryAsWkt=function(e){c.Hb(vt(e.geometry))},a.handleCopyGeometryAsGeoJson=function(e){var t;c.Hb((t=e,JSON.stringify(t,null,2)))},a.handleListHeightChanged=a.handleListHeightChanged.bind(Object(ie.a)(a)),a.handleShowDetailsChanged=a.handleShowDetailsChanged.bind(Object(ie.a)(a)),a.handleNewPointToolButtonClicked=a.handleNewPointToolButtonClicked.bind(Object(ie.a)(a)),a.handleNewPolygonToolButtonClicked=a.handleNewPolygonToolButtonClicked.bind(Object(ie.a)(a)),a.handleNewPolylineToolButtonClicked=a.handleNewPolylineToolButtonClicked.bind(Object(ie.a)(a)),a.handleNewBoxToolButtonClicked=a.handleNewBoxToolButtonClicked.bind(Object(ie.a)(a)),a.handleRemovePlacemarkButtonClicked=a.handleRemovePlacemarkButtonClicked.bind(Object(ie.a)(a)),a.handleLocatePlacemarkButtonClicked=a.handleLocatePlacemarkButtonClicked.bind(Object(ie.a)(a)),a.handleChangedPlacemarkVisibility=a.handleChangedPlacemarkVisibility.bind(Object(ie.a)(a)),a.handleChangedPlacemarkSelection=a.handleChangedPlacemarkSelection.bind(Object(ie.a)(a)),a.handleChangedPlacemarkName=a.handleChangedPlacemarkName.bind(Object(ie.a)(a)),a.handleChangedPointLongitude=a.handleChangedPointLongitude.bind(Object(ie.a)(a)),a.handleChangedPointLatitude=a.handleChangedPointLatitude.bind(Object(ie.a)(a)),a.handleCopySelectedPlacemarkAsCsv=a.handleCopySelectedPlacemarkAsCsv.bind(Object(ie.a)(a)),a.handleCopySelectedPlacemarkAsWkt=a.handleCopySelectedPlacemarkAsWkt.bind(Object(ie.a)(a)),a.handleCopySelectedPlacemarkAsGeoJSON=a.handleCopySelectedPlacemarkAsGeoJSON.bind(Object(ie.a)(a)),a.handlePlacemarkDoubleClick=a.handlePlacemarkDoubleClick.bind(Object(ie.a)(a)),a.renderPlacemarkItem=a.renderPlacemarkItem.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"handleListHeightChanged",value:function(e){this.props.dispatch(c.rd({placemarkListHeight:e}))}},{key:"handleNewPointToolButtonClicked",value:function(){this.props.dispatch(c.ub("PointTool"))}},{key:"handleNewPolygonToolButtonClicked",value:function(){this.props.dispatch(c.ub("PolygonTool"))}},{key:"handleNewPolylineToolButtonClicked",value:function(){this.props.dispatch(c.ub("PolylineTool"))}},{key:"handleNewBoxToolButtonClicked",value:function(){this.props.dispatch(c.ub("BoxTool"))}},{key:"handleShowDetailsChanged",value:function(e){this.props.dispatch(c.rd({showPlacemarkDetails:e}))}},{key:"handleRemovePlacemarkButtonClicked",value:function(){this.props.dispatch(c.lc(this.props.selectedPlacemarkId))}},{key:"handleLocatePlacemarkButtonClicked",value:function(){this.props.dispatch(c.Xb(this.props.selectedPlacemarkId))}},{key:"handlePlacemarkDoubleClick",value:function(e){this.props.dispatch(c.Xb(e.id))}},{key:"handleChangedPlacemarkVisibility",value:function(e,t){this.props.dispatch(c.od(e.id,{visible:t}))}},{key:"handleChangedPlacemarkName",value:function(e){var t=this.props.selectedPlacemark,n=e.value;this.props.dispatch(c.pd(t.id,{title:n}))}},{key:"handleChangedPointLongitude",value:function(e){var t=this.props.selectedPlacemark,n=t.geometry;n=Object(d.a)(Object(d.a)({},n),{},{coordinates:[e.value,n.coordinates[1]]}),this.props.dispatch(c.nd(t.id,n))}},{key:"handleChangedPointLatitude",value:function(e){var t=this.props.selectedPlacemark,n=t.geometry;n=Object(d.a)(Object(d.a)({},n),{},{coordinates:[n.coordinates[0],e.value]}),this.props.dispatch(c.nd(t.id,n))}},{key:"handleChangedPlacemarkSelection",value:function(e){var t=e.length?e[0]:null;this.props.dispatch(c.Kc(t))}},{key:"handleCopySelectedPlacemarkAsCsv",value:function(){this.handleCopyGeometryAsCsv(this.props.selectedPlacemark)}},{key:"handleCopySelectedPlacemarkAsWkt",value:function(){this.handleCopyGeometryAsWkt(this.props.selectedPlacemark)}},{key:"handleCopySelectedPlacemarkAsGeoJSON",value:function(){this.handleCopyGeometryAsGeoJson(this.props.selectedPlacemark)}},{key:"render",value:function(){return a.createElement("div",{style:{width:"100%"}},a.createElement(Ut,{showDetails:this.props.showPlacemarkDetails,onShowDetailsChange:this.handleShowDetailsChanged,isSplitPanel:!0,contentHeight:this.props.placemarkListHeight,onContentHeightChange:this.handleListHeightChanged,actionComponent:this.renderActionButtonRow()},this.renderPlacemarksList(),this.renderPlacemarkDetails()))}},{key:"renderActionButtonRow",value:function(){var e="PointTool"===this.props.geometryToolType,t="PolylineTool"===this.props.geometryToolType,n="PolygonTool"===this.props.geometryToolType,r="BoxTool"===this.props.geometryToolType;return a.createElement(ue.ButtonGroup,null,a.createElement(wt,{tooltipContent:"New marker",onClick:this.handleNewPointToolButtonClicked,icon:"dot",tooltipPosition:"top",active:e,disabled:!1}),a.createElement(wt,{tooltipContent:"New polyline",onClick:this.handleNewPolylineToolButtonClicked,icon:"slash",tooltipPosition:"top",active:t,disabled:!1}),a.createElement(wt,{tooltipContent:"New polygon",onClick:this.handleNewPolygonToolButtonClicked,icon:"polygon-filter",tooltipPosition:"top",active:n,disabled:!1}),a.createElement(wt,{tooltipContent:"New box",onClick:this.handleNewBoxToolButtonClicked,icon:"widget",tooltipPosition:"top",active:r,disabled:!1}),a.createElement(wt,{tooltipContent:"Remove selected place",disabled:!this.props.selectedPlacemarkId,onClick:this.handleRemovePlacemarkButtonClicked,icon:"remove",tooltipPosition:"top"}),a.createElement(wt,{tooltipContent:"Locate selected place in view",disabled:!this.props.selectedPlacemarkId,onClick:this.handleLocatePlacemarkButtonClicked,icon:"locate",tooltipPosition:"top"}),a.createElement(ue.Popover,{disabled:!this.props.selectedPlacemark,position:ue.Position.LEFT},a.createElement(wt,{tooltipContent:this.props.selectedPlacemark?"Copy selected place.":"Copy selected place: Please select a place first.",disabled:!this.props.selectedPlacemark,icon:"clipboard",tooltipPosition:"top"}),a.createElement(ue.Menu,null,a.createElement(ue.MenuItem,{onClick:this.handleCopySelectedPlacemarkAsCsv,text:"Copy as CSV"}),a.createElement(ue.MenuItem,{onClick:this.handleCopySelectedPlacemarkAsWkt,text:"Copy as WKT"}),a.createElement(ue.MenuItem,{onClick:this.handleCopySelectedPlacemarkAsGeoJSON,text:"Copy as GeoJSON"}))),a.createElement(sr,null))}},{key:"renderPlacemarksList",value:function(){var e=this.props.placemarkCollection.features;return e&&e.length?a.createElement(en,null,a.createElement(mn.a,{items:e,getItemKey:n.getPlacemarkItemKey,renderItem:this.renderPlacemarkItem,selectionMode:mn.b.SINGLE,selection:this.props.selectedPlacemarkId,onSelection:this.handleChangedPlacemarkSelection})):Re}},{key:"renderPlacemarkItem",value:function(e){return a.createElement(pr,{placemark:e,onDoubleClick:this.handlePlacemarkDoubleClick,onVisibilityChange:this.handleChangedPlacemarkVisibility,onCopyPlacemarkCsv:this.handleCopyGeometryAsCsv,onCopyPlacemarkWkt:this.handleCopyGeometryAsWkt,onCopyPlacemarkGeoJSON:this.handleCopyGeometryAsGeoJson})}},{key:"renderPlacemarkDetails",value:function(){var e=this.props.placemarkCollection.features;return e&&e.length?this.props.selectedPlacemark?a.createElement("div",{style:{width:"100%"}},a.createElement(ue.Label,{key:"spacer"}," "),this.renderPlacemarkTitle(),this.renderPlacemarkGeometry()):Ne:null}},{key:"renderPlacemarkTitle",value:function(){var e=this.props.selectedPlacemark.properties.title;return a.createElement(ue.Label,{className:"bp3-inline"},"Name",a.createElement("span",{className:"bp3-text-muted"}," (optional)"),a.createElement(Wn.a,{value:{textValue:e,value:e},onChange:this.handleChangedPlacemarkName,size:16,uncontrolled:!0,placeholder:"Placemark name"}))}},{key:"renderPlacemarkGeometry",value:function(){var e=this.props.selectedPlacemark.geometry;if("Point"===e.type){var t=e.coordinates;return a.createElement("div",null,a.createElement(ue.Label,{className:"bp3-inline"},"Longitude",a.createElement("span",{className:"bp3-text-muted"}," (in degrees)"),a.createElement(xn,{value:t[0],onChange:this.handleChangedPointLongitude,size:12,uncontrolled:!0,min:-180,max:180,placeholder:"Longitude in degrees"})),a.createElement(ue.Label,{className:"bp3-inline"},"Latitude",a.createElement("span",{className:"bp3-text-muted"}," (in degrees)"),a.createElement(xn,{value:t[1],onChange:this.handleChangedPointLatitude,size:12,uncontrolled:!0,min:-90,max:90,placeholder:"Latitude in degrees"})))}return bt(e),null}}],[{key:"getPlacemarkItemKey",value:function(e){return e.id}}]),n}(a.Component),dr=Object(o.b)((function(e){return{placemarkCollection:Oe.W(e),selectedPlacemarkId:Oe.xb(e),selectedPlacemark:Oe.yb(e),placemarkListHeight:e.session.placemarkListHeight,showPlacemarkDetails:Oe.Wb(e),activeView:Oe.e(e),geometryToolType:Oe.O(e)}}))(ur),pr=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var r;return Object(re.a)(this,n),(r=t.call(this,e)).placemarkItemRef=Object(a.createRef)(),r.handleVisibilityChanged=r.handleVisibilityChanged.bind(Object(ie.a)(r)),r.handleCopyPlacemarkCsv=r.handleCopyPlacemarkCsv.bind(Object(ie.a)(r)),r.handleCopyPlacemarkWkt=r.handleCopyPlacemarkWkt.bind(Object(ie.a)(r)),r.handleCopyPlacemarksGeoJSON=r.handleCopyPlacemarksGeoJSON.bind(Object(ie.a)(r)),r.handleDoubleClick=r.handleDoubleClick.bind(Object(ie.a)(r)),r}return Object(oe.a)(n,[{key:"handleDoubleClick",value:function(){this.props.onDoubleClick(this.props.placemark)}},{key:"handleCopyPlacemarkCsv",value:function(){this.props.onCopyPlacemarkCsv(this.props.placemark)}},{key:"handleCopyPlacemarkWkt",value:function(){this.props.onCopyPlacemarkWkt(this.props.placemark)}},{key:"handleCopyPlacemarksGeoJSON",value:function(){this.props.onCopyPlacemarkGeoJSON(this.props.placemark)}},{key:"handleVisibilityChanged",value:function(e){this.props.onVisibilityChange(this.props.placemark,e.target.checked)}},{key:"componentDidMount",value:function(){var e=this,t=this.placemarkItemRef.current;t&&(t.oncontextmenu=function(t){t.preventDefault();var n=a.createElement(ue.Menu,{},a.createElement(ue.MenuItem,{onClick:e.handleCopyPlacemarkCsv,text:"Copy as CSV"}),a.createElement(ue.MenuItem,{onClick:e.handleCopyPlacemarkWkt,text:"Copy as WKT"}),a.createElement(ue.MenuItem,{onClick:e.handleCopyPlacemarksGeoJSON,text:"Copy as GeoJSON"}));ue.ContextMenu.show(n,{left:t.clientX,top:t.clientY},(function(){}))})}},{key:"render",value:function(){var e,t,r=this.props.placemark,o=r.properties.visible,i=r.properties.title,l=r.geometry;if("Point"===l.type){var c=l.coordinates;t=" ".concat(c[0].toFixed(3),", ").concat(c[1].toFixed(3)),e="dot"}else if("LineString"===l.type){var s=l.coordinates;t=" ".concat(s.length," positions"),e="slash"}else if("Polygon"===l.type){var u=l.coordinates[0];t=" ".concat(u.length-1," positions"),e=bt(l)?"widget":"polygon-filter"}return a.createElement("div",{ref:this.placemarkItemRef,style:n.DIV_STYLE},a.createElement(ue.Icon,{style:{marginRight:"4px"},icon:o?"eye-open":"eye-off"}),a.createElement(ue.Checkbox,{style:n.CHECK_STYLE,checked:!Object(v.a)(o)||o,onChange:this.handleVisibilityChanged}),a.createElement("div",{onDoubleClick:this.handleDoubleClick,style:n.LABEL_STYLE},a.createElement("span",{style:n.ICON_STYLE},a.createElement(ue.Icon,{icon:e})),a.createElement("span",{style:n.NAME_STYLE},i),a.createElement("span",{style:n.INFO_STYLE},t)))}}]),n}(a.PureComponent);pr.DIV_STYLE={display:"flex",alignItems:"center"},pr.CHECK_STYLE={flexGrow:0,margin:0},pr.LABEL_STYLE={flexGrow:1},pr.ICON_STYLE={marginLeft:"0.5em"},pr.NAME_STYLE={marginLeft:"0.5em"},pr.INFO_STYLE={float:"right",color:ue.Colors.BLUE5};var hr=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onViewModeChange=a.onViewModeChange.bind(Object(ie.a)(a)),a.onAddWorldView=a.onAddWorldView.bind(Object(ie.a)(a)),a.onShowLayerTextOverlayChange=a.onShowLayerTextOverlayChange.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"onViewModeChange",value:function(e){this.props.dispatch(c.Tc(this.props.activeViewId,e.target.value))}},{key:"onShowLayerTextOverlayChange",value:function(e){var t=e.target.checked;this.props.dispatch(c.rd({showLayerTextOverlay:t}))}},{key:"onAddWorldView",value:function(){this.props.dispatch(c.zb(this.props.activeViewId,this.props.lastBaseMapId))}},{key:"render",value:function(){return a.createElement("div",{style:{margin:"0.2em 0.2em 0.2em 0.2em"}},a.createElement(ue.AnchorButton,{icon:"globe",style:n.ACTION_ITEM_STYLE,onClick:this.onAddWorldView},"New World View"),this.renderActiveViewPanel())}},{key:"renderActiveViewPanel",value:function(){var e=this.props.activeView;if(!e)return Te;var t=a.createElement(ue.Label,{style:n.PROPERTY_ITEM_STYLE},"Active view:",a.createElement(ue.ControlGroup,{style:n.PROPERTY_ITEM_CONTROL_GROUP_STYLE},a.createElement(ue.Icon,{icon:e.icon,style:n.PROPERTY_ITEM_CONTROL_GROUP_MEMBER_STYLE}),a.createElement(ue.InputGroup,{style:n.PROPERTY_ITEM_CONTROL_GROUP_MEMBER_STYLE,type:"text",value:e.title,dir:"auto",disabled:!0})));return"world"===e.type?a.createElement("div",null,t,a.createElement(ue.Checkbox,{label:"Show layer text overlay",style:n.PROPERTY_ITEM_STYLE,checked:this.props.showLayerTextOverlay,onChange:this.onShowLayerTextOverlayChange})):t}}]),n}(a.Component);hr.ACTION_ITEM_STYLE={margin:"0.1em 0em 2em 0em"},hr.PROPERTY_ITEM_STYLE={margin:"0.1em 0em 0.6em 0em"},hr.PROPERTY_ITEM_CONTROL_GROUP_STYLE={display:"flex",alignItems:"center"},hr.PROPERTY_ITEM_CONTROL_GROUP_MEMBER_STYLE={marginBlock:0};var fr=Object(o.b)((function(e){return{activeView:Oe.e(e),activeViewId:Oe.d(e),lastBaseMapId:e.session.lastBaseMapId,showLayerTextOverlay:e.session.showLayerTextOverlay}}))(hr),mr=n(38);var br=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).handleShowDetails=a.handleShowDetails.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"handleShowDetails",value:function(){this.props.dispatch(c.cd(this.props.task.title,this.props.task.failure))}},{key:"render",value:function(){var e=this,t=this.props.task,r=this.props.jobId,o=a.createElement("p",null,t.title||"Task #".concat(r),":"),i=null;if(n.isRunning(t))if(n.isMakingProgress(t)){var l=0;t.progress.total>0&&t.progress.worked>0&&(l=t.progress.worked/t.progress.total);var c=a.createElement(ue.ProgressBar,{intent:ue.Intent.SUCCESS,value:l}),s=a.createElement(ue.AnchorButton,{type:"button",onClick:function(){return e.props.onCancelJob(r)},text:"Cancel"}),u=a.createElement("div",{style:n.FLEX_ROW_STYLE},a.createElement("div",{style:n.PROGRESS_STYLE},c),a.createElement("div",{style:{flex:"0 1 auto"}},s)),d=null;t.progress&&t.progress.message&&(d=a.createElement("div",{className:"bp3-text-muted"},t.progress.message)),i=a.createElement("div",null,u,d)}else i=a.createElement(ue.ProgressBar,null);else if(t.status===mr.g.CANCELLED||t.status===mr.g.FAILED){var p,h;t.status===mr.g.CANCELLED?h=a.createElement("div",null,n.renderIcon(t.failure),"Task has been cancelled."):(p=a.createElement(ue.AnchorButton,{onClick:this.handleShowDetails},"Details"),h=a.createElement("div",null,n.renderIcon(t.failure),Object(mr.l)(t.failure),a.createElement("br",null),a.createElement("div",{className:"bp3-text-muted",style:{paddingTop:"0.4em"}},t.failure.message))),i=a.createElement("div",null,a.createElement(ue.ButtonGroup,{className:"bp3-minimal",style:{float:"right"}},p,a.createElement(ue.AnchorButton,{icon:"cross",onClick:function(){return e.props.onRemoveJob(r)}})),h)}return a.createElement(ue.Card,null,o,i)}}],[{key:"isRunning",value:function(e){return e.status===mr.g.NEW||e.status===mr.g.SUBMITTED||e.status===mr.g.IN_PROGRESS}},{key:"isMakingProgress",value:function(e){return e.status===mr.g.IN_PROGRESS&&!!e.progress}},{key:"renderIcon",value:function(e){var t=Object(mr.j)(e),n=Object(mr.k)(e);return a.createElement(ue.Icon,{icon:t,intent:n,style:{paddingRight:"0.4em"}})}}]),n}(a.Component);br.FLEX_ROW_STYLE={display:"flex",flexFlow:"row nowrap",width:"100%"},br.PROGRESS_STYLE={flex:"3 1 auto",display:"flex",flexFlow:"column",justifyContent:"center",paddingRight:10};var vr=Object(o.b)((function(e,t){return t}))(br);var yr={cancelJob:c.Ab,removeJob:c.mc},gr=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(){return Object(re.a)(this,n),t.apply(this,arguments)}return Object(oe.a)(n,[{key:"render",value:function(){var e=this.props.tasks,t=[];for(var n in e)e[n].status!==mr.g.DONE&&t.push(a.createElement(vr,{key:n,jobId:n,task:e[n],onRemoveJob:this.props.removeJob,onCancelJob:this.props.cancelJob}));return t.length?a.createElement(en,null,t):a.createElement(ue.Card,null,a.createElement("p",null,a.createElement("strong",null,"There are currently no active tasks.")))}}]),n}(a.Component),Er=Object(o.b)((function(e){return{tasks:e.communication.tasks}}),yr)(gr);function Or(e){var t=e.className,n=e.style;return a.createElement("a",{className:t,style:n,href:"https://climate.esa.int/en/terms-and-conditions/",target:"_blank",rel:"noopener noreferrer"},"Terms & Conditions")}var _r=Object(o.b)((function(e,t){var n=e.communication.webAPIServiceInfo;return{uiVersion:"4.0.0-dev.0",apiVersion:n?n.version:null,minimal:t.minimal}}))((function(e){var t=e.uiVersion,n=e.apiVersion,r=e.minimal;return a.createElement("div",null,a.createElement(Cr,{label:"Cate UI",version:t,minimal:r}),n&&a.createElement(a.Fragment,null,"\xa0",a.createElement(Cr,{label:"Cate API",version:n,minimal:r})))})),Cr=function(e){var t=e.label,n=e.version,r=e.minimal,o=n.includes("dev")?ue.Intent.WARNING:ue.Intent.NONE;return a.createElement(ue.Tag,{intent:o,round:!0,minimal:r},t,"\xa0",n)};var kr={cancelJob:c.Ab,removeJob:c.mc},wr=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(){return Object(re.a)(this,n),t.apply(this,arguments)}return Object(oe.a)(n,[{key:"render",value:function(){var e,t=this.props.globePosition;return e=t?"lon=".concat(t.longitude.toFixed(2),", lat=").concat(t.latitude.toFixed(2)):"",a.createElement("div",{style:n.DIV_STYLE},a.createElement("div",{style:n.DIV_MESSAGE_STYLE},"Ready."),a.createElement("div",{style:n.DIV_TASKS_STYLE},this.renderTasks()),a.createElement("div",{style:n.DIV_CURSOR_STYLE},e),a.createElement("div",{style:n.DIV_TAC_STYLE},a.createElement(Or,null)),a.createElement(_r,{minimal:!0}),a.createElement("div",{style:n.DIV_STATUS_STYLE},this.renderBackendStatus()))}},{key:"renderTasks",value:function(){var e=this.props.tasks,t=0,n=0,r=[];for(var o in e){var i=e[o],l=!1;i.status===mr.g.SUBMITTED||i.status===mr.g.IN_PROGRESS?(t++,l=!0):i.status!==mr.g.CANCELLED&&i.status!==mr.g.FAILED||(n++,l=!0),l&&r.push(a.createElement(vr,{key:o,jobId:o,task:this.props.tasks[o],onRemoveJob:this.props.removeJob,onCancelJob:this.props.cancelJob}))}if(r.length>0){var c,s=null;t>0&&n>0?c="".concat(t," running / ").concat(n," failed task(s)"):t>0?c="".concat(t," running task(s)"):n>0&&(c="".concat(n," failed task(s)")),t>0&&(s=a.createElement("div",{style:{display:"flex",flexFlow:"column",justifyContent:"center",width:"12em",height:"1.5em"}},a.createElement(ue.ProgressBar,{intent:ue.Intent.SUCCESS})));var u=a.createElement("div",{style:{width:"300px"}},r);return a.createElement(ue.Popover,{content:u,position:ue.Position.TOP,interactionKind:ue.PopoverInteractionKind.HOVER},a.createElement("div",{style:{display:"flex",flexFlow:"row nowrap"}},s,a.createElement("div",{style:{display:"flex",flexFlow:"column",justifyContent:"center",paddingLeft:"5px"}},c)))}return null}},{key:"renderBackendStatus",value:function(){var e,t,n=" (".concat(this.props.webAPIServiceURL,")");return"connecting"===this.props.webAPIStatus?(e="link",t="Connecting"+n):"open"===this.props.webAPIStatus?(e="link",t="Connected"+n):"error"===this.props.webAPIStatus?(e="offline",t="Error"+n):"closed"===this.props.webAPIStatus?(e="offline",t="Closed"+n):(e="help",t="Unknown"+n),a.createElement(ue.Tooltip,{content:t,hoverOpenDelay:1500,position:ue.Position.LEFT_TOP},a.createElement(ue.Icon,{icon:e,iconSize:12}))}}]),n}(a.Component);wr.DIV_STYLE={flex:"none",display:"flex",flexFlow:"row nowrap",height:"1.5em",fontSize:"small",backgroundColor:"#2B95D6",overflow:"hidden"},wr.DIV_MARGIN={margin:"2px 4px 2px 4px"},wr.DIV_MESSAGE_STYLE=Object(d.a)({flex:"60 1 auto"},wr.DIV_MARGIN),wr.DIV_TAC_STYLE=Object(d.a)({flex:"0 1 auto"},wr.DIV_MARGIN),wr.DIV_TASKS_STYLE=Object(d.a)({flex:"20 1 auto"},wr.DIV_MARGIN),wr.DIV_CURSOR_STYLE=Object(d.a)({flex:"20 1 auto"},wr.DIV_MARGIN),wr.DIV_STATUS_STYLE={flex:"0 1 auto",margin:"0px 4px 0px 4px"};var Sr=Object(o.b)((function(e){return{webAPIStatus:e.communication.webAPIStatus,webAPIServiceURL:e.communication.webAPIServiceURL,tasks:e.communication.tasks,globePosition:Oe.E(e)||Oe.F(e)}}),kr)(wr),jr=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(){return Object(re.a)(this,n),t.apply(this,arguments)}return Object(oe.a)(n,[{key:"render",value:function(){var e=this.props.divStyle?Object(d.a)(Object(d.a)({},n.DIV_STYLE),this.props.divStyle):n.DIV_STYLE,t=this.props.titleStyle?Object(d.a)(Object(d.a)({},n.SPAN_STYLE),this.props.titleStyle):n.SPAN_STYLE;return a.createElement("div",{style:e},a.createElement("span",{style:t},this.props.title))}}]),n}(a.PureComponent);jr.DIV_STYLE={margin:"12px 0 6px 0",padding:"2px 6px",backgroundColor:"#3c5161"},jr.SPAN_STYLE={color:"#aaafaf",fontSize:"0.9em",fontWeight:100};var Ir=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).handleShowDetailsChanged=a.handleShowDetailsChanged.bind(Object(ie.a)(a)),a.handleListHeightChanged=a.handleListHeightChanged.bind(Object(ie.a)(a)),a.handleAddLayerButtonClicked=a.handleAddLayerButtonClicked.bind(Object(ie.a)(a)),a.handleRemoveLayerButtonClicked=a.handleRemoveLayerButtonClicked.bind(Object(ie.a)(a)),a.handleMoveLayerUpButtonClicked=a.handleMoveLayerUpButtonClicked.bind(Object(ie.a)(a)),a.handleMoveLayerDownButtonClicked=a.handleMoveLayerDownButtonClicked.bind(Object(ie.a)(a)),a.handleChangedLayerSelection=a.handleChangedLayerSelection.bind(Object(ie.a)(a)),a.handleChangedLayerVisibility=a.handleChangedLayerVisibility.bind(Object(ie.a)(a)),a.handleChangedLayerSplitMode=a.handleChangedLayerSplitMode.bind(Object(ie.a)(a)),a.handleChangedBaseMap=a.handleChangedBaseMap.bind(Object(ie.a)(a)),a.renderLayerItem=a.renderLayerItem.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"componentDidMount",value:function(){this.props.colorMapCategories||this.props.dispatch(c.Vb())}},{key:"render",value:function(){var e=this.props.activeView;return e&&"world"===e.type?a.createElement("div",{style:{width:"100%"}},a.createElement(Ut,{showDetails:this.props.showLayerDetails,onShowDetailsChange:this.handleShowDetailsChanged,isSplitPanel:!0,contentHeight:this.props.layerListHeight,onContentHeightChange:this.handleListHeightChanged,actionComponent:this.renderActionButtonRow()},a.createElement("div",null,this.renderBackgroundMapSelector(),this.renderLayersList()),this.renderLayerDetails())):xe}},{key:"handleShowDetailsChanged",value:function(e){this.props.dispatch(c.Qc("showLayerDetails",e))}},{key:"handleListHeightChanged",value:function(e){this.props.dispatch(c.Qc("layerListHeight",e))}},{key:"handleAddLayerButtonClicked",value:function(){this.props.dispatch(c.Wc("layerSourcesDialog"))}},{key:"handleRemoveLayerButtonClicked",value:function(){this.props.dispatch(c.jc(this.props.activeView.id,this.props.selectedLayerId))}},{key:"handleMoveLayerUpButtonClicked",value:function(){this.props.dispatch(c.Zb(this.props.activeView.id,this.props.selectedLayerId))}},{key:"handleMoveLayerDownButtonClicked",value:function(){this.props.dispatch(c.Yb(this.props.activeView.id,this.props.selectedLayerId))}},{key:"handleChangedLayerVisibility",value:function(e,t){this.props.dispatch(c.ld(this.props.activeView.id,e,{visible:t}))}},{key:"handleChangedLayerSplitMode",value:function(e){this.props.dispatch(c.yc(this.props.activeView.id,this.props.selectedLayerId,e.target.value))}},{key:"handleChangedLayerSelection",value:function(e){var t=e.length?e[0]:null;this.props.dispatch(c.Gc(this.props.activeView.id,t))}},{key:"handleChangedBaseMap",value:function(e){this.props.dispatch(c.tc(this.props.activeView.id,e.target.value))}},{key:"renderLayerItem",value:function(e){var t=this;return a.createElement("div",{style:n.LAYER_DIV_STYLE},a.createElement(ue.Icon,{style:{marginRight:"4px"},icon:e.visible?"eye-open":"eye-off"}),a.createElement(ue.Checkbox,{style:n.LAYER_CHECKBOX_STYLE,checked:e.visible,onClick:n.stopPropagation,onChange:function(n){t.handleChangedLayerVisibility(e,n.target.checked)}}),a.createElement(ue.Icon,{style:n.LAYER_LABEL_ELEMENT_STYLE,icon:Object(B.F)(e),iconSize:12}),a.createElement("span",{style:n.LAYER_LABEL_ELEMENT_STYLE},Object(B.E)(e)))}},{key:"renderActionButtonRow",value:function(){var e=this.props.layers?this.props.layers.length:0,t=this.props.selectedLayerIndex,n=this.props.selectedLayer,r=n&&n.id!==B.a,o=t>0,i=t>=0&&t<e-1;return a.createElement(ue.ButtonGroup,null,a.createElement(wt,{tooltipContent:"Add a new layer",intent:ue.Intent.PRIMARY,onClick:this.handleAddLayerButtonClicked,icon:"add",tooltipPosition:"top"}),a.createElement(wt,{tooltipContent:"Remove selected layer",disabled:!r,onClick:this.handleRemoveLayerButtonClicked,icon:"remove",tooltipPosition:"top"}),a.createElement(wt,{tooltipContent:"Move layer up",disabled:!o,onClick:this.handleMoveLayerUpButtonClicked,icon:"arrow-up",tooltipPosition:"top"}),a.createElement(wt,{tooltipContent:"Move layer down",disabled:!i,onClick:this.handleMoveLayerDownButtonClicked,icon:"arrow-down",tooltipPosition:"top"}),a.createElement(sr,null))}},{key:"renderBackgroundMapSelector",value:function(){return a.createElement("div",{style:n.BG_MAP_CONTAINER_STYLE},a.createElement("div",{style:n.BG_MAP_LABEL_STYLE},"Base map:"),a.createElement("div",{style:n.BG_MAP_VALUE_STYLE},a.createElement(ue.HTMLSelect,{disabled:this.props.offlineMode,value:this.props.offlineMode?"natural_offline":this.props.baseMapId,onChange:this.handleChangedBaseMap},this.props.baseMaps.map((function(e){return a.createElement("option",{key:e.id,value:e.id},e.title)})))))}},{key:"renderLayersList",value:function(){var e=this.props.layers;return e&&e.length?a.createElement(en,null,a.createElement(mn.a,{items:e,getItemKey:n.getLayerItemKey,renderItem:this.renderLayerItem,selectionMode:mn.b.SINGLE,selection:this.props.selectedLayerId,onSelection:this.handleChangedLayerSelection})):null}},{key:"renderLayerDetails",value:function(){var e=this.props.layers;return e&&e.length?this.props.selectedLayer?this.props.selectedImageLayer?a.createElement("div",null,this.renderDataSelectionSection(),this.renderSplitModeSection()):void 0:a.createElement(a.Fragment,null,a.createElement(ue.Label,{style:{height:"20px"}}," "),Ve):Me}},{key:"renderDataSelectionSection",value:function(){var e=this,t=this.props.selectedVariableImageLayer,r=this.props.selectedVariable;if(!t||!r||r.numDims<=2)return null;for(var o=r.numDims-2,i=[],l=function(o){var l=r.dimNames[o],s=r.shape[o]-1;if(s>0){var u=t.varIndex[o];i.push(a.createElement(ue.Label,{key:l+"_index",className:"bp3-inline",style:{display:"flex"}},a.createElement("span",{style:n.LABEL_SPAN_STYLE_100},n.capitalizeFirstLetter(l)+" index"),a.createElement("div",{style:Object(d.a)(Object(d.a)({},n.SLIDER_DIV_STYLE_10),{},{width:void 0,flex:"auto 1",margin:"auto 0"})},a.createElement(ue.Slider,{min:0,max:s,stepSize:1,labelStepSize:s,value:u,onChange:function(n){return function(n,a){var r=t.varIndex.slice();r[n]=a,e.props.dispatch(c.ld(e.props.activeView.id,t,{varIndex:r}))}(o,n)}}))))}},s=0;s<o;s++)l(s);return 0===i.length?null:a.createElement(a.Fragment,null,a.createElement(jr,{title:"DATA SELECTION"}),i)}},{key:"renderSplitModeSection",value:function(){var e=this.props.selectedImageLayer.splitMode||V.b;return a.createElement(a.Fragment,null,a.createElement(jr,{title:"LAYER SPLIT"}),a.createElement(ue.RadioGroup,{key:"layerSplit",inline:!0,onChange:this.handleChangedLayerSplitMode,selectedValue:e},a.createElement(ue.Radio,{label:"Show left",value:V.a}),a.createElement(ue.Radio,{label:"Show right",value:V.c}),a.createElement(ue.Radio,{label:"Off",value:V.b})))}}],[{key:"getLayerItemKey",value:function(e){return e.id}},{key:"stopPropagation",value:function(e){e.stopPropagation()}},{key:"capitalizeFirstLetter",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}]),n}(a.Component);Ir.SLIDER_DIV_STYLE_10={width:"100%",paddingLeft:"1em",paddingRight:"1em"},Ir.LABEL_SPAN_STYLE_100={flexBasis:"100px",paddingLeft:"5px"},Ir.LAYER_DIV_STYLE={display:"flex",alignItems:"center",justifyContent:"flex-start",height:"100%"},Ir.LAYER_LABEL_ELEMENT_STYLE={marginLeft:"0.5em"},Ir.LAYER_CHECKBOX_STYLE={flexGrow:0,margin:0},Ir.BG_MAP_CONTAINER_STYLE={display:"flex",alignItems:"center",marginTop:3,marginBottom:3},Ir.BG_MAP_LABEL_STYLE={flexGrow:0,marginRight:3},Ir.BG_MAP_VALUE_STYLE={flexGrow:1,marginRight:1,display:"flex",justifyContent:"flex-end"};var Pr=Object(o.b)((function(e){return{offlineMode:Oe.P(e),selectedVariable:Oe.Kb(e),activeView:Oe.e(e),layers:Oe.L(e),selectedLayerId:Oe.pb(e),selectedLayerIndex:Oe.qb(e),selectedLayer:Oe.rb(e),selectedImageLayer:Oe.ob(e),selectedVariableImageLayer:Oe.Ib(e),baseMaps:Oe.l(e),baseMapId:Oe.j(e),layerListHeight:e.session.layerListHeight,showLayerDetails:e.session.showLayerDetails,colorMapCategories:Oe.q(e)}}))(Ir),Dr=n(214),Lr=n.n(Dr),Tr=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(){return Object(re.a)(this,n),t.apply(this,arguments)}return Object(oe.a)(n,[{key:"parseValue",value:function(e){var t=function(e){if(!e||""===e.trim())return null;var t=e.split(",");if(2===t.length){var n=parseFloat(t[0]),a=parseFloat(t[1]);return[n,a]}throw new Error("Value must be a pair of numbers.")}(e);if(!t)return null;var n=t[0],a=t[1];return a<n?[a,n]:t}},{key:"validateValue",value:function(e){if(Object(kn.a)(Object(wn.a)(n.prototype),"validateValue",this).call(this,e),Object(v.g)(e)){if(!this.props.nullable)throw new Error("Numeric range value expected.")}else Mn(e[0],this.props.nullable,this.props.min,this.props.max,this.props.isInt),Mn(e[1],this.props.nullable,this.props.min,this.props.max,this.props.isInt)}},{key:"formatValue",value:function(e){return!e||e.length<2?"":"".concat(e[0],", ").concat(e[1])}}]),n}(Sn.a);var Ar={display:"grid",gridTemplateColumns:"auto auto auto",justifyItems:"stretch",alignItems:"center",columnGap:"0.7em"},Rr=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).handleUpdateDisplayStatistics=a.handleUpdateDisplayStatistics.bind(Object(ie.a)(a)),a.handleChangedDisplayMinMax=a.handleChangedDisplayMinMax.bind(Object(ie.a)(a)),a.handleChangedDisplayRange=a.handleChangedDisplayRange.bind(Object(ie.a)(a)),a.handleChangedDisplayAlphaBlend=a.handleChangedDisplayAlphaBlend.bind(Object(ie.a)(a)),a.handleChangedColorMapName=a.handleChangedColorMapName.bind(Object(ie.a)(a)),a.handleChangedStyleContext=a.handleChangedStyleContext.bind(Object(ie.a)(a)),a.handleChangedFillColor=a.handleChangedFillColor.bind(Object(ie.a)(a)),a.handleChangedFillColorFromPicker=a.handleChangedFillColorFromPicker.bind(Object(ie.a)(a)),a.handleChangedFillOpacity=a.handleChangedFillOpacity.bind(Object(ie.a)(a)),a.handleChangedStrokeWidth=a.handleChangedStrokeWidth.bind(Object(ie.a)(a)),a.handleChangedStrokeColor=a.handleChangedStrokeColor.bind(Object(ie.a)(a)),a.handleChangedStrokeColorFromPicker=a.handleChangedStrokeColorFromPicker.bind(Object(ie.a)(a)),a.handleChangedStrokeOpacity=a.handleChangedStrokeOpacity.bind(Object(ie.a)(a)),a.handleChangedMarkerColor=a.handleChangedMarkerColor.bind(Object(ie.a)(a)),a.handleChangedMarkerColorFromPicker=a.handleChangedMarkerColorFromPicker.bind(Object(ie.a)(a)),a.handleChangedMarkerSize=a.handleChangedMarkerSize.bind(Object(ie.a)(a)),a.handleChangedMarkerSymbol=a.handleChangedMarkerSymbol.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"componentDidMount",value:function(){this.props.colorMapCategories||this.props.dispatch(c.Vb())}},{key:"render",value:function(){return a.createElement(a.Fragment,null,this.renderLayerDetails())}},{key:"renderLayerDetails",value:function(){var e;return e=this.props.styleContext===V.d?this.props.selectedEntity?this.renderVectorLayerDetails():We:this.props.selectedVectorLayer?this.renderVectorLayerDetails():this.props.selectedImageLayer?this.renderImageLayerDetails():Be,a.createElement("div",{style:{width:"100%"}},this.renderStyleContext(),e)}},{key:"renderImageLayerDetails",value:function(){return a.createElement(a.Fragment,null,a.createElement(jr,{title:"COLOUR MAPPING"}),this.renderFormAlphaBlending(),this.renderFormDisplayMinMax(),this.renderFormDisplayColorBar(),a.createElement(jr,{title:"IMAGE ENHANCEMENTS"}),this.renderFormImageEnhancement("opacity","Opacity",0,1),this.renderFormImageEnhancement("brightness","Brightness",0,2),this.renderFormImageEnhancement("contrast","Contrast",0,2),this.renderFormImageEnhancement("hue","Hue",0,1),this.renderFormImageEnhancement("saturation","Saturation",0,2),this.renderFormImageEnhancement("gamma","Gamma",1,2))}},{key:"renderFormAlphaBlending",value:function(){var e=this.props.selectedVariableImageLayer;return e?a.createElement(ue.Switch,{key:"alpha",checked:e.alphaBlending,label:"Alpha blending",onChange:this.handleChangedDisplayAlphaBlend}):null}},{key:"renderFormDisplayMinMax",value:function(){return this.props.selectedVariableImageLayer||this.props.selectedResourceVectorLayer?a.createElement("div",{style:{width:"100%",marginBottom:"20px"}},a.createElement(ue.Label,{key:"drange",style:{display:"flex"}},a.createElement("span",{style:Object(d.a)(Object(d.a)({},n.LABEL_SPAN_STYLE_100),{},{margin:"auto 0"})},"Display range"),a.createElement("div",{style:Ar},a.createElement(Tr,{value:this.props.displayMinMax,style:{flex:"auto"},onChange:this.handleChangedDisplayMinMax,uncontrolled:!0}),a.createElement(wt,{tooltipContent:"Compute valid min/max",intent:ue.Intent.PRIMARY,icon:"arrows-horizontal",tooltipPosition:"top",style:{flexGrow:0,margin:0},disabled:this.props.isComputingVariableStatistics,onClick:this.handleUpdateDisplayStatistics}))),a.createElement("div",{style:n.SLIDER_DIV_STYLE_15},this.renderDisplayRangeSlider())):null}},{key:"renderFormDisplayColorBar",value:function(){var e,t=this.props.selectedVariableImageLayer;if(!t)return null;if(this.props.colorMapCategories){var r=this.renderColorBarBox(t);e=a.createElement(ue.Popover,{content:r,interactionKind:ue.PopoverInteractionKind.CLICK,popoverClassName:"bp3-popover-content-sizing cate-color-bars-popover",position:ue.PopoverPosition.LEFT},this.renderColorBarButton(t,!1))}else e=this.renderColorBarButton(t,!0);return a.createElement(ue.Label,{key:"cmap",className:"bp3-inline",style:{display:"flex"}},a.createElement("span",{style:n.LABEL_SPAN_STYLE_100},"Colour bar"),e)}},{key:"renderFormImageEnhancement",value:function(e,t,r,o){var i=this,l=this.props.selectedVariableImageLayer||this.props.selectedResourceVectorLayer;if(!l||l===this.props.selectedResourceVectorLayer&&"opacity"!==e)return null;return a.createElement(ue.Label,{key:e,style:{display:"flex"}},a.createElement("span",{style:n.LABEL_SPAN_STYLE_100},t),a.createElement("div",{style:Object(d.a)(Object(d.a)({},n.SLIDER_DIV_STYLE_10),{},{width:void 0,flex:"auto 1",margin:"auto 0"})},a.createElement(ue.Slider,{min:r,max:o,stepSize:(o-r)/10,labelRenderer:!1,value:l[e],onChange:function(t){return function(e,t){i.props.dispatch(c.ld(i.props.activeView.id,l,Object(s.a)({},e,t)))}(e,t)}})))}},{key:"renderVectorLayerDetails",value:function(){return a.createElement(a.Fragment,null,a.createElement(jr,{title:"FILL"}),this.renderFillColor(),this.renderFillOpacity(),a.createElement(jr,{title:"STROKE"}),this.renderStrokeWidth(),this.renderStrokeColor(),this.renderStrokeOpacity(),a.createElement(jr,{title:"MARKER"}),this.renderMarkerColor(),this.renderMarkerSize(),this.renderMarkerSymbol())}},{key:"renderStyleContext",value:function(){var e,t,n=this.props.selectedEntity,r=this.props.selectedPlacemark,o=this.props.selectedLayer;if(r){var i=r.properties&&r.properties.title;e=i&&""!==i?"My place ".concat(i):"Selected place"}else e=n?"Selected entity":"Selected entity (none)";return t=o?"Layer ".concat(Object(B.E)(o)):"Selected layer",a.createElement(ue.RadioGroup,{key:"styleContext",label:"Style context",onChange:this.handleChangedStyleContext,selectedValue:this.props.styleContext},a.createElement(ue.Radio,{label:e,value:V.d}),a.createElement(ue.Radio,{label:t,value:V.e}))}},{key:"renderFillColor",value:function(){return a.createElement(ue.Label,{className:"bp3-inline",style:n.LABEL_BOTTOM_MARGIN},a.createElement("span",{style:n.LABEL_SPAN_STYLE_100},"Colour"),a.createElement(ue.ControlGroup,{style:{lineHeight:"0",flex:"auto 1"}},a.createElement(Wn.a,{value:this.props.vectorStyle.fill,style:{flex:"auto",fontFamily:"courier",textAlign:"right",paddingRight:"40px"},size:8,uncontrolled:!0,onChange:this.handleChangedFillColor}),a.createElement(ue.Popover,{interactionKind:ue.PopoverInteractionKind.CLICK,popoverClassName:"bp3-minimal",position:ue.PopoverPosition.LEFT,className:"bp3-input-action"},a.createElement(ue.Button,{style:{backgroundColor:this.props.vectorStyle.fill}}),a.createElement(Lr.a,{color:this.props.vectorStyle.fill,onChange:this.handleChangedFillColorFromPicker,disableAlpha:!0}))))}},{key:"renderFillOpacity",value:function(){return a.createElement(ue.Label,{className:"bp3-inline",style:n.LABEL_BOTTOM_MARGIN},a.createElement("span",{style:n.LABEL_SPAN_STYLE_100},"Opacity"),a.createElement("div",{style:Object(d.a)(Object(d.a)({},n.SLIDER_DIV_STYLE_05),{},{width:void 0,flex:"auto 1",margin:"auto 0"})},a.createElement(ue.Slider,{min:0,max:1,stepSize:.05,labelRenderer:!1,value:this.props.vectorStyle.fillOpacity,onChange:this.handleChangedFillOpacity})))}},{key:"renderStrokeWidth",value:function(){return a.createElement(ue.Label,{className:"bp3-inline",style:n.LABEL_BOTTOM_MARGIN},a.createElement("span",{style:n.LABEL_SPAN_STYLE_100},"Width"),a.createElement(xn,{value:this.props.vectorStyle.strokeWidth,style:{flex:"auto 1",fontFamily:"courier"},size:8,min:0,uncontrolled:!0,onChange:this.handleChangedStrokeWidth}))}},{key:"renderStrokeColor",value:function(){return a.createElement(ue.Label,{className:"bp3-inline",style:n.LABEL_BOTTOM_MARGIN},a.createElement("span",{style:n.LABEL_SPAN_STYLE_100},"Colour"),a.createElement(ue.ControlGroup,{style:{lineHeight:"0",flex:"auto 1"}},a.createElement(Wn.a,{value:this.props.vectorStyle.stroke,style:{flex:"auto",fontFamily:"courier",textAlign:"right",paddingRight:"40px"},size:8,uncontrolled:!0,onChange:this.handleChangedStrokeColor}),a.createElement(ue.Popover,{interactionKind:ue.PopoverInteractionKind.CLICK,popoverClassName:"bp3-minimal",position:ue.PopoverPosition.LEFT,className:"bp3-input-action"},a.createElement(ue.Button,{style:{backgroundColor:this.props.vectorStyle.stroke}}),a.createElement(Lr.a,{color:this.props.vectorStyle.stroke,onChange:this.handleChangedStrokeColorFromPicker,disableAlpha:!0}))))}},{key:"renderStrokeOpacity",value:function(){return a.createElement(ue.Label,{className:"bp3-inline",style:n.LABEL_BOTTOM_MARGIN},a.createElement("span",{style:n.LABEL_SPAN_STYLE_100},"Opacity"),a.createElement("div",{style:Object(d.a)(Object(d.a)({},n.SLIDER_DIV_STYLE_05),{},{width:void 0,flex:"auto 1",margin:"auto 0"})},a.createElement(ue.Slider,{min:0,max:1,stepSize:.05,labelRenderer:!1,value:this.props.vectorStyle.strokeOpacity,onChange:this.handleChangedStrokeOpacity})))}},{key:"renderMarkerColor",value:function(){return a.createElement(ue.Label,{className:"bp3-inline",style:n.LABEL_BOTTOM_MARGIN},a.createElement("span",{style:n.LABEL_SPAN_STYLE_100},"Colour"),a.createElement(ue.ControlGroup,{style:{lineHeight:"0",flex:"auto 1"}},a.createElement(Wn.a,{value:this.props.vectorStyle.markerColor,style:{flex:"auto",fontFamily:"courier",textAlign:"right",paddingRight:"40px"},size:8,uncontrolled:!0,onChange:this.handleChangedMarkerColor}),a.createElement(ue.Popover,{interactionKind:ue.PopoverInteractionKind.CLICK,popoverClassName:"bp3-minimal",position:ue.PopoverPosition.LEFT,className:"bp3-input-action"},a.createElement(ue.Button,{style:{backgroundColor:this.props.vectorStyle.markerColor}}),a.createElement(Lr.a,{color:this.props.vectorStyle.markerColor,onChange:this.handleChangedMarkerColorFromPicker,disableAlpha:!0}))))}},{key:"renderMarkerSize",value:function(){return a.createElement(ue.Label,{className:"bp3-inline",style:n.LABEL_BOTTOM_MARGIN},a.createElement("span",{style:n.LABEL_SPAN_STYLE_100},"Size"),a.createElement(ue.HTMLSelect,{style:{flex:"auto 1"},value:this.props.vectorStyle.markerSize,onChange:this.handleChangedMarkerSize},a.createElement("option",{value:"small"},"Small"),a.createElement("option",{value:"medium"},"Medium"),a.createElement("option",{value:"large"},"Large")))}},{key:"renderMarkerSymbol",value:function(){return a.createElement(ue.Label,{className:"bp3-inline",style:n.LABEL_BOTTOM_MARGIN},a.createElement("span",{style:n.LABEL_SPAN_STYLE_100},"Symbol"),a.createElement(Wn.a,{value:this.props.vectorStyle.markerSymbol,style:{flex:"auto",fontFamily:"courier",textAlign:"right"},size:8,uncontrolled:!0,onChange:this.handleChangedMarkerSymbol}))}},{key:"renderDisplayRangeSlider",value:function(){var e=this.props.selectedVariableImageLayer;if(!e)return null;var t=e.statistics;if(!t)return a.createElement("span",{style:{color:ue.Colors.ORANGE3}},"Missing data min/max");var n=t.min,r=t.max;if(isNaN(n)||isNaN(r))return a.createElement("span",{style:{color:ue.Colors.ORANGE3}},"All values are NaN");if(n===r)return a.createElement("span",{style:{color:ue.Colors.ORANGE3}},"All values are ",n);var o=function(e,t){var n=Math.round(Math.log10(t-e));return n<0?1-n:n<=2?2:n<=3?1:0}(n,r);return a.createElement(ue.RangeSlider,{min:n,max:r,stepSize:(r-n)/100,labelStepSize:r-n,labelRenderer:function(e){return function(e,t){return t<3?e.toFixed(t):e.toExponential(1)}(e,o)},onChange:this.handleChangedDisplayRange,value:[e.displayMin,e.displayMax]})}},{key:"renderColorBarButton",value:function(e,t){var n=e.colorMapName,r=this.renderColorMapImage(this.props.selectedColorMap)||n||"Select Color Bar";return a.createElement(ue.AnchorButton,{className:"bp3-minimal",style:{width:"100%"},disabled:t},r)}},{key:"renderColorBarBox",value:function(e){var t,n=this,r=[],o=Object(g.a)(this.props.colorMapCategories);try{for(o.s();!(t=o.n()).done;){var i=t.value,l=i.colorMaps;r.push(a.createElement("p",{key:i.name+"_head",style:{marginTop:2,marginBottom:2}},a.createElement(ue.Tooltip,{content:a.createElement("div",{style:{width:"19em"}},i.description),position:"top"},i.name))),r.push(a.createElement(mn.a,{key:i.name+"_list",items:l,getItemKey:function(e){return e.name},renderItem:function(e){return n.renderColorMapImage(e)},selectionMode:mn.b.SINGLE,selection:e.colorMapName?[e.colorMapName]:[],onSelection:this.handleChangedColorMapName}))}}catch(c){o.e(c)}finally{o.f()}return a.createElement("div",{style:{padding:5,overflowY:"auto",height:"87vh"}},r)}},{key:"renderColorMapImage",value:function(e){return e?a.createElement(ue.Tooltip,{content:e.name},a.createElement("img",{src:"data:image/png;base64,".concat(e.imageData),alt:e.name,style:{width:"100%",height:"1em"}})):null}},{key:"handleChangedDisplayAlphaBlend",value:function(e){var t=e.target.checked,n=this.props.selectedVariableImageLayer;this.props.dispatch(c.ld(this.props.activeView.id,n,{alphaBlending:t}))}},{key:"handleChangedDisplayMinMax",value:function(e){var t=this.props.selectedVariableImageLayer||this.props.selectedResourceVectorLayer;if(!e.error){var n=e.value[0],a=e.value[1];this.props.dispatch(c.ld(this.props.activeView.id,t,{displayMin:n,displayMax:a}))}}},{key:"handleUpdateDisplayStatistics",value:function(){var e=this,t=this.props.selectedResource,n=this.props.selectedVariable,a=this.props.selectedVariableImageLayer;t&&n&&a&&this.props.dispatch(c.Ob(t.name,n.name,a.varIndex,(function(t){return c.ld(e.props.activeView.id,a,{displayMin:t.min,displayMax:t.max,statistics:t})})))}},{key:"handleChangedDisplayRange",value:function(e){var t=this.props.selectedVariableImageLayer||this.props.selectedResourceVectorLayer;this.props.dispatch(c.ld(this.props.activeView.id,t,{displayMin:e[0],displayMax:e[1]}))}},{key:"handleChangedColorMapName",value:function(e){var t=this.props.selectedVariableImageLayer||this.props.selectedResourceVectorLayer,n=e&&e.length&&e[0];n&&this.props.dispatch(c.ld(this.props.activeView.id,t,{colorMapName:n}))}},{key:"handleChangedStyleContext",value:function(e){this.props.dispatch(c.Sc(e.target.value))}},{key:"handleChangedFillColor",value:function(e){this.handleChangedVectorStyle({fill:e.value})}},{key:"handleChangedFillColorFromPicker",value:function(e){this.handleChangedVectorStyle({fill:e.hex})}},{key:"handleChangedFillOpacity",value:function(e){this.handleChangedVectorStyle({fillOpacity:e})}},{key:"handleChangedStrokeWidth",value:function(e){this.handleChangedVectorStyle({strokeWidth:e.value})}},{key:"handleChangedStrokeColor",value:function(e){this.handleChangedVectorStyle({stroke:e.value})}},{key:"handleChangedStrokeColorFromPicker",value:function(e){this.handleChangedVectorStyle({stroke:e.hex})}},{key:"handleChangedStrokeOpacity",value:function(e){this.handleChangedVectorStyle({strokeOpacity:e})}},{key:"handleChangedMarkerSize",value:function(e){this.handleChangedVectorStyle({markerSize:e.target.value})}},{key:"handleChangedMarkerColor",value:function(e){this.handleChangedVectorStyle({markerColor:e.value})}},{key:"handleChangedMarkerColorFromPicker",value:function(e){this.handleChangedVectorStyle({markerColor:e.hex})}},{key:"handleChangedMarkerSymbol",value:function(e){this.handleChangedVectorStyle({markerSymbol:e.value})}},{key:"handleChangedVectorStyle",value:function(e){this.props.styleContext===V.d?this.props.dispatch(c.jd(this.props.activeView,this.props.selectedEntity,e)):this.props.dispatch(c.md(this.props.activeView.id,this.props.selectedVectorLayer.id,e))}}]),n}(a.Component);Rr.SLIDER_DIV_STYLE_05={width:"100%",paddingLeft:"0.5em",paddingRight:"0.5em"},Rr.SLIDER_DIV_STYLE_10={width:"100%",paddingLeft:"1em",paddingRight:"1em"},Rr.SLIDER_DIV_STYLE_15={width:"100%",paddingLeft:"1.5em",paddingRight:"1.5em"},Rr.LABEL_SPAN_STYLE_100={flexBasis:"100px",paddingLeft:"5px"},Rr.LABEL_BOTTOM_MARGIN={display:"flex",margin:"0 0 5px"};var Nr=Object(o.b)((function(e){return{selectedResource:Oe.Bb(e),selectedVariable:Oe.Kb(e),activeView:Oe.e(e),layers:Oe.L(e),selectedLayer:Oe.rb(e),selectedImageLayer:Oe.ob(e),selectedVariableImageLayer:Oe.Ib(e),selectedVectorLayer:Oe.Lb(e),selectedResourceVectorLayer:Oe.Cb(e),selectedEntity:Oe.mb(e),selectedPlacemark:Oe.yb(e),styleContext:Oe.Zb(e),showLayerDetails:e.session.showLayerDetails,colorMapCategories:Oe.q(e),selectedColorMap:Oe.eb(e),displayMinMax:Oe.Hb(e),isComputingVariableStatistics:Oe.G(e),vectorStyle:Oe.bc(e)}}))(Rr);var xr=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).localWebAPI=void 0,a.state={workspaceDir:"",workspaceName:""},a.onCancel=a.onCancel.bind(Object(ie.a)(a)),a.onConfirm=a.onConfirm.bind(Object(ie.a)(a)),a.canConfirm=a.canConfirm.bind(Object(ie.a)(a)),a.renderBody=a.renderBody.bind(Object(ie.a)(a)),a.onWorkspaceNameChange=a.onWorkspaceNameChange.bind(Object(ie.a)(a)),a.onWorkspaceDirChange=a.onWorkspaceDirChange.bind(Object(ie.a)(a)),a.showDirectorySelectDialog=a.showDirectorySelectDialog.bind(Object(ie.a)(a)),a.localWebAPI=e.isLocalFSAllowed,a}return Object(oe.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.setState({workspaceDir:e.workspaceDir,workspaceName:e.workspaceName})}},{key:"onCancel",value:function(){this.props.dispatch(c.Pb(this.props.dialogId))}},{key:"canConfirm",value:function(){return!(this.localWebAPI&&!this.state.workspaceDir||!this.state.workspaceName)&&/^([A-Za-z_\-\s0-9.]+)$/.test(this.state.workspaceName)}},{key:"composeWorkspacePath",value:function(){var e=this.state.workspaceDir,t=this.state.workspaceName;return null===e?t:e+"/"+t}},{key:"onConfirm",value:function(){this.props.dispatch(c.Pb(this.props.dialogId,this.state)),this.props.isNewDialog?this.props.dispatch(c.bc(this.composeWorkspacePath())):this.props.dispatch(c.pc(this.composeWorkspacePath()))}},{key:"onWorkspaceDirChange",value:function(e){this.setState({workspaceDir:e.target.value})}},{key:"onWorkspaceNameChange",value:function(e){this.setState({workspaceName:e.target.value})}},{key:"showDirectorySelectDialog",value:function(){var e=this;this.props.dispatch(c.Xc({defaultPath:this.state.workspaceDir},(function(t){t&&e.setState({workspaceDir:t})})))}},{key:"render",value:function(){var e=this.props.isOpen;return e?a.createElement(Lt.a,{isOpen:e,title:this.props.isNewDialog?"New Workspace":"Save Workspace As",confirmTitle:this.props.isNewDialog?"New":"Save As",onCancel:this.onCancel,canConfirm:this.canConfirm,onConfirm:this.onConfirm,renderBody:this.renderBody}):null}},{key:"renderBody",value:function(){if(!this.props.isOpen)return null;var e=null;return this.props.isLocalFSAllowed&&(e=a.createElement(a.Fragment,null,a.createElement("p",{style:{marginTop:"1em"}},"Workspace parent directory:"),a.createElement(ue.ControlGroup,{style:{flexGrow:1,display:"flex",marginLeft:"1em",width:"100%"}},a.createElement(ue.InputGroup,{type:"text",style:{flex:"auto"},value:this.state.workspaceDir,onChange:this.onWorkspaceDirChange}),a.createElement(ue.AnchorButton,{intent:ue.Intent.PRIMARY,style:{flex:"none"},onClick:this.showDirectorySelectDialog},"...")))),a.createElement("div",null,e,a.createElement("p",{style:{marginTop:"1em"}},"Workspace name:"),a.createElement(ue.InputGroup,{type:"text",style:{width:"100%"},value:this.state.workspaceName,onChange:this.onWorkspaceNameChange}))}}]),n}(a.Component),Mr=Object(o.b)((function(e,t){var n=Oe.x(t.dialogId)(e),a=n.isOpen,r=t.dialogId,o="newWorkspaceDialog"===t.dialogId,i=Oe.I(e),l=n.workspaceDir,c=n.workspaceName;return a&&(Oe.J(e)||(l=l||Oe.lc(e),c=c||Oe.nc(e)),l=l||Oe.K(e)),{workspaceDir:l=i?l||"":null,workspaceName:c=c||"",dialogId:r,isNewDialog:o,isOpen:a,isLocalFSAllowed:i}}))(xr);function Vr(){return a.createElement(Mr,{dialogId:"newWorkspaceDialog"})}function Br(){return a.createElement(Mr,{dialogId:"saveWorkspaceAsDialog"})}var Wr=n(67);var Fr={width:"40%"},Ur={width:"100%",marginBottom:"1em"},Gr={width:"100%",marginTop:"1em"},Yr={width:"60%",wordWrap:"break-word"},Hr=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onConfirm=a.onConfirm.bind(Object(ie.a)(a)),a.onCancel=a.onCancel.bind(Object(ie.a)(a)),a.canConfirm=a.canConfirm.bind(Object(ie.a)(a)),a.renderBody=a.renderBody.bind(Object(ie.a)(a)),a.state=e.preferences,a}return Object(oe.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.setState(e.preferences)}},{key:"onConfirm",value:function(){if(this.props.dispatch(c.Rb()),h()(this.props.preferences,this.state))Object(Wr.a)({type:"info",text:"No changes detected."});else{var e=this.state.backendConfig,t=this.props.preferences.autoUpdateSoftware!==this.state.autoUpdateSoftware,a=!h()(this.props.preferences.backendConfig,e);this.props.dispatch(c.rd(this.state)),this.props.dispatch(c.qd(this.state)),(t||a)&&(this.props.dispatch(c.id(e)),this.props.dispatch(Object(c.dd)({type:"info",title:n.DIALOG_TITLE,message:"Some changes will be effective only after restart."})))}}},{key:"onCancel",value:function(){this.props.dispatch(c.Rb())}},{key:"canConfirm",value:function(){return!0}},{key:"render",value:function(){return a.createElement(Lt.a,{isOpen:this.props.isOpen,title:n.DIALOG_TITLE,style:{minWidth:"30em"},icon:"confirm",onCancel:this.onCancel,onConfirm:this.onConfirm,canConfirm:this.canConfirm,renderBody:this.renderBody})}},{key:"renderBody",value:function(){return this.props.isOpen?a.createElement(ue.Tabs,{id:"preferences"},a.createElement(ue.Tab,{id:"g",title:"General",panel:this.renderGeneralPanel()}),a.createElement(ue.Tab,{id:"dm",title:"Data Management",panel:this.renderDataManagementPanel()}),a.createElement(ue.Tab,{id:"pc",title:"Proxy Configuration",panel:this.renderProxyConfigurationPanel()}),a.createElement(ue.Tab,{id:"a",title:"System",panel:this.renderSystemPanel()})):null}},{key:"renderGeneralPanel",value:function(){return a.createElement("div",{style:{width:"100%",marginTop:"1em"}},this.renderReopenLastWorkspace(),this.renderAutoShowNewFigures())}},{key:"renderDataManagementPanel",value:function(){var e=this.props.serviceInfo.userRootMode;return a.createElement("div",{style:{width:"100%",marginTop:"1em"}},!e&&this.renderDataStoresPath(),!e&&this.renderCacheWorkspaceImagery(),this.renderResourceNamePrefix())}},{key:"renderProxyConfigurationPanel",value:function(){return a.createElement("div",{style:{width:"100%",marginTop:"1em"}},this.renderProxyUrlInput())}},{key:"renderSystemPanel",value:function(){var e=this,t=this.getStateValue("showProperties",!1),n=this.getChangeHandler("showProperties",!1);return a.createElement("div",{style:Gr},a.createElement(ue.ControlGroup,{style:Ur},a.createElement("span",{style:Fr},"Cate UI version:"),a.createElement("span",{style:Yr},a.createElement("code",null,"4.0.0-dev.0"))),a.createElement(ue.ControlGroup,{style:Ur},a.createElement("span",{style:Fr},"Cate API URL:"),a.createElement("span",{style:Yr},a.createElement("code",null,this.props.serviceURL))),a.createElement(ue.ControlGroup,{style:Ur},a.createElement("span",{style:Fr},"Cate API version:"),a.createElement("span",{style:Yr},a.createElement("code",null,this.props.serviceInfo.version))),this.props.serviceInfo.dependencies&&a.createElement(ue.ControlGroup,{style:Ur},a.createElement("span",{style:Fr},"Cate dependencies:"),a.createElement("div",null,a.createElement(ue.Button,{onClick:function(){return n(!t)},small:!0,style:{marginBottom:2}},"Click to "+(t?"collapse":"expand")),a.createElement(ue.Collapse,{isOpen:t},a.createElement(ue.Card,null,a.createElement(ue.HTMLTable,{condensed:!0,small:!0,bordered:!0},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Package"),a.createElement("th",null,"Version"))),a.createElement("tbody",null,Object.getOwnPropertyNames(this.props.serviceInfo.dependencies).map((function(t){var n=e.props.serviceInfo.dependencies[t];return a.createElement("tr",null,a.createElement("td",null,t),a.createElement("td",null,n))})))))))),a.createElement(ue.ControlGroup,{style:Ur},a.createElement("span",{style:Fr},"File access mode:"),a.createElement("span",{style:Yr},this.props.serviceInfo.userRootMode?"sandboxed file system":"full access to file system")))}},{key:"renderReopenLastWorkspace",value:function(){return this.renderBooleanValue("reopenLastWorkspace",!1,"Reopen last workspace on startup")}},{key:"renderAutoShowNewFigures",value:function(){return this.renderBooleanValue("autoShowNewFigures",!1,"Open plot view for new Figure resources")}},{key:"renderDataStoresPath",value:function(){return this.renderDirectoryPath("dataStoresPath",!0,"Synchronisation directory for remote data store files")}},{key:"renderCacheWorkspaceImagery",value:function(){return this.renderBooleanValue("useWorkspaceImageryCache",!0,"Use per-workspace imagery cache (may accelerate image display)")}},{key:"renderResourceNamePrefix",value:function(){return this.renderStringValue("resourceNamePattern",!0,"Default resource name pattern")}},{key:"renderProxyUrlInput",value:function(){var e=this.getStateValue("proxyUrl",!0),t=this.getChangeHandler("proxyUrl",!0);return a.createElement(ue.ControlGroup,{style:{width:"100%",marginBottom:"1em",display:"flex",alignItems:"center"}},a.createElement("span",{style:{flexGrow:.8}},"Proxy URL:"),a.createElement(Wn.a,{className:"bp3-input bp3-fill",style:{flexGrow:.2},value:e,onChange:t,placeholder:"http://user:password@host:port",nullable:!0}))}},{key:"renderDirectoryPath",value:function(e,t,n){var r=this,o=this.getStateValue(e,t),i=this.getChangeHandler(e,t);return a.createElement("div",{style:{width:"100%",marginBottom:"1em"}},a.createElement("p",null,n,":"),a.createElement(ue.ControlGroup,{style:{display:"flex",alignItems:"center"}},a.createElement(Wn.a,{style:{flexGrow:1},value:o,placeholder:"Enter directory path",onChange:i}),a.createElement(ue.AnchorButton,{intent:ue.Intent.PRIMARY,style:{flex:"none"},onClick:function(){return r.showOpenDirectoryDialog(o,i)}},"...")))}},{key:"renderStringValue",value:function(e,t,n){var r=this.getStateValue(e,t),o=this.getChangeHandler(e,t);return a.createElement(ue.ControlGroup,{style:{width:"100%",marginBottom:"1em",display:"flex",alignItems:"center"}},a.createElement("span",{style:{flexGrow:.8}},n,":"),a.createElement(Wn.a,{style:{flexGrow:.2},value:r,onChange:o}))}},{key:"renderBooleanValue",value:function(e,t,n){var r=this.getStateValue(e,t),o=this.getChangeHandler(e,t);return a.createElement("div",{style:{width:"100%",marginBottom:"1em"}},a.createElement(ue.Switch,{checked:r,label:n,onChange:function(e){return o(e.target.checked)}}))}},{key:"getChangeHandler",value:function(e,t){var n=this;return function(a){var r={};r[e]=Object(v.b)(a)?Object(v.b)(a.value)?a.value:a:null,t?n.setBackendConfig(r):n.setState(r)}}},{key:"getStateValue",value:function(e,t){return t?this.state.backendConfig[e]:this.state[e]}},{key:"setBackendConfig",value:function(e){var t=Object.assign({},this.state.backendConfig,e);this.setState({backendConfig:t})}},{key:"showOpenDirectoryDialog",value:function(e,t){this.props.dispatch(c.Xc({defaultPath:e},(function(e){e&&t(e)})))}}]),n}(a.Component);Hr.DIALOG_ID="preferencesDialog",Hr.DIALOG_TITLE="Preferences";var Kr=Object(o.b)((function(e){return{isOpen:Oe.x(Hr.DIALOG_ID)(e).isOpen,preferences:e.session,serviceURL:e.communication.webAPIServiceURL,serviceInfo:e.communication.webAPIServiceInfo}}))(Hr),zr=n(786),qr={display:"flex",flexFlow:"row nowrap",alignItems:"center"},Jr={marginRight:5},Xr={width:"100%",textAlign:"right"},Zr={},Qr=Object(d.a)(Object(d.a)({},Zr),{},{backgroundColor:ue.Colors.BLUE3}),$r={width:"100%",height:"100%",overflow:"auto",borderColor:ue.Colors.DARK_GRAY2,borderStyle:"solid",borderWidth:1},eo={width:"100%"},to=function(e){var t=e.rootNode,n=e.fileFilter,r=e.multiSelections,o=e.openDirectory,i=e.currentDirPath,l=e.onCurrentDirPathChange,c=e.selectedPaths,s=e.onSelectedPathsChange,u=function(e,t,n){var a=e.childNodes;if(t){var r=Object(y.i)(e,t);r&&r.length>0&&(a=r[r.length-1].childNodes)}a&&(n&&(a=Object(y.c)(a,n)),a=a.sort(y.d));return a}(t,i,n),d=new Set(c),p=function(e){return u[e]},h=function(e){var t=p(e),n=t.name;return i&&(n=i+"/"+t.name),n},f=function(e){return d.has(h(e))};return a.createElement("div",{style:$r},a.createElement(ue.HTMLTable,{className:"bp3-html-table-condensed bp3-interactive",style:eo},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Name"),a.createElement("th",null,"Last modified"),a.createElement("th",null,"Size"))),a.createElement("tbody",null,u&&u.map((function(e,t){return a.createElement("tr",{key:t,style:f(t)?Qr:Zr,onClick:function(e){return function(e,t,n){var a=p(t);if(!(!o&&a.isDir||o&&!a.isDir)){var i=h(t),l=new Set(d);l.has(i)?l.delete(i):(r&&n.ctrlKey||l.clear(),l.add(i)),s&&s(Array.from(l))}}(0,t,e)},onDoubleClick:function(){return function(e,t){l&&(p(t).isDir&&l(h(t)))}(0,t)}},a.createElement("td",null,function(e){var t=p(e);return a.createElement("div",{style:qr},a.createElement(ue.Icon,{style:Jr,icon:Object(y.h)(t)}),a.createElement("span",null,t.name))}(t)),a.createElement("td",null,function(e){return p(e).lastModified}(t)),a.createElement("td",null,function(e){var t=p(e);return a.createElement("div",{style:Xr},t.size)}(t)))})))))};var no=function(e){return e.rootNode.childNodes?null:a.createElement("div",{style:{width:"100%",height:"100%"}},a.createElement(ue.Spinner,{size:32}))},ao={width:"100%",height:"100%",overflow:"auto",borderColor:ue.Colors.DARK_GRAY2,borderStyle:"solid",borderWidth:1},ro=function(e){var t=e.rootNode,n=e.selectedPath,r=e.onSelectedPathChange,o=e.expandedPaths,i=e.onExpandedPathsChange,l=e.showFiles;if(!t.childNodes)return a.createElement(no,{rootNode:t});var c=function(e,t,n,r){if(!e.childNodes)return[];return function e(t,n,r,o,i,l){o||(t=t.filter((function(e){return e.isDir})));return t.map((function(t){var c=n,s=!1;c&&Object(y.j)(c,i,t.name)?s=i===c.length-1:c=null;var u=r,d=!1;u?d=null!==(u=(u=u.filter((function(e){return Object(y.j)(e,i,t.name)}))).length>0?u:null):u=null;var p,h,f,m=l[0];return l[0]=m+1,t.childNodes&&(p=e(t.childNodes,c,u,o,i+1,l)),h=o?t.isDir&&(!p||Boolean(p.find((function(e){return e.nodeData.isDir})))):t.isDir&&(!p||p.length>0),"updating"===t.status?f=a.createElement(ue.Spinner,{size:16}):"error"===t.status&&(f=a.createElement(ue.Icon,{icon:"error",iconSize:16})),{id:m,icon:Object(y.h)(t),label:t.name,secondaryLabel:f,hasCaret:h,isSelected:s,isExpanded:d,childNodes:p,nodeData:t}}))}(e.childNodes,t?t.split("/"):[],n?n.map((function(e){return e.split("/")})):[],r,0,[0])}(t,n||null,o&&o.length>0?o:null,Boolean(l));return a.createElement("div",{style:ao},a.createElement(ue.Tree,{contents:c,onNodeClick:function(e,t){if(r&&e.nodeData.isDir){var a=oo(c,t);r(a!==n?a:null)}},onNodeExpand:function(e,t){if(i&&e.nodeData.isDir){var n=oo(c,t);i(Object(y.b)(o||[],n))}},onNodeCollapse:function(e,t){if(i&&e.nodeData.isDir){var n=oo(c,t);i(Object(y.k)(o||[],n))}}}))};function oo(e,t){for(var n=null,a=e,r=0;r<t.length;r++){if(!a)throw new Error("internal error: missing childNodes at index ".concat(r," in node path ").concat(t.join()));var o=a[t[r]];null===n?n=o.nodeData.name:n+="/"+o.nodeData.name,a=o.childNodes}return n}var io={width:"52vw"},lo={width:"100%",display:"flex",flexFlow:"column nowrap"},co={flexGrow:0,display:"flex",flexFlow:"row nowrap",marginBottom:6},so={height:"40vh",flexGrow:0},uo={flexGrow:0,display:"flex",flexFlow:"row nowrap",alignItems:"center",marginTop:10},po={flexGrow:1,marginLeft:10,overflow:"hidden"},ho=Object(d.a)(Object(d.a)({},po),{},{color:"#ffaaaa"}),fo={flexGrow:0,display:"flex",flexFlow:"row nowrap",marginBottom:6},mo={flexGrow:1,backgroundColor:ue.Colors.DARK_GRAY5,paddingLeft:10,paddingRight:10},bo=zr.a.ofType(),vo=function(e){var t=e.isOpen,n=e.onClose,r=e.rootNode,o=e.updateFileNode,i=e.createFileNode,l=e.renameFileNode,c=e.deleteFileNodes,s=e.title,u=e.defaultPath,p=e.buttonLabel,h=e.filters,f=e.saveFile,m=e.openFile,b=e.openDirectory,v=e.multiSelections,g=e.showHiddenFiles,E=e.hostOS;if(f&&m||f&&b||f&&v)throw new Error("saveFile flag cannot be used with openFile, openDirectory, multiSelections flags");g&&console.warn("showHiddenFiles flag ignored (not implemented yet))");var O=u&&Object(y.f)(u,"",v,E)||[],_=[];O.forEach((function(e){_=Object(y.b)(_,Object(yn.c)(e,E))}));var C=_.length>0?_[0]:null,k=C||"",w=a.useReducer((function(e,t){return Object(d.a)(Object(d.a)({},e),t)}),{selectedPaths:O,expandedPaths:_,selectedDirPath:C,currentDirPath:k}),S=Object(te.a)(w,2),j=S[0],I=S[1],P=a.useReducer((function(e,t){return Object(d.a)(Object(d.a)({},e),t)}),{value:u||"",isValid:!0}),D=Object(te.a)(P,2),L=D[0],T=D[1],A=a.useState(300),R=Object(te.a)(A,2),N=R[0],x=R[1],M=a.useState(h&&h.length?h[0]:null),V=Object(te.a)(M,2),B=V[0],W=V[1],F=a.useMemo((function(){return function(e){o(e,!1)}}),[o]);if(a.useEffect((function(){u&&F(u)}),[u,F]),a.useEffect((function(){j.expandedPaths.forEach((function(e){return F(e)}))}),[j.expandedPaths,F]),a.useEffect((function(){F(j.currentDirPath)}),[j.currentDirPath,F]),!t)return null;var U,G=function(){return""!==j.currentDirPath},Y=function(){return Boolean(i)},H=function(){return Boolean(l)&&1===j.selectedPaths.length},K=function(){return Boolean(c)&&j.selectedPaths.length>0},z=function(e){if(b)if(null!==e){var t=[e],n=Object(y.l)([Object(yn.a)(e)],v);I({selectedDirPath:e,currentDirPath:e,selectedPaths:t}),T({value:n,isValid:!0})}else I({selectedDirPath:null,selectedPaths:[]}),T({value:"",isValid:!0});else I(null!==e?{selectedDirPath:e,currentDirPath:e}:{selectedDirPath:null})};return m||b||f||(U=function(){return null}),a.createElement(Lt.a,{isOpen:t,title:s||Eo(f,b,m),confirmTitle:p||Eo(f,b,m),onConfirm:function(){n&&n({filePaths:j.selectedPaths.map((function(e){return Object(y.e)(e,E)})),canceled:!1})},onCancel:function(){n&&n({filePaths:[],canceled:!0})},canConfirm:function(){return j.selectedPaths.length>0&&L.isValid},style:io,renderActions:U},a.createElement("div",{style:lo},a.createElement("div",{style:fo},a.createElement(ue.ButtonGroup,{minimal:!0},a.createElement(ue.Button,{disabled:!0,onClick:function(){0},icon:"arrow-left"}),a.createElement(ue.Button,{disabled:!0,onClick:function(){0},icon:"arrow-right"}),a.createElement(ue.Button,{disabled:!G(),onClick:function(){if(G()){var e=Object(yn.c)(j.currentDirPath);I({selectedDirPath:""!==e?e:null,currentDirPath:e})}},icon:"arrow-up"})),a.createElement("div",{style:mo},a.createElement(ue.Breadcrumbs,{className:"bp3-small",items:function(){if(""===j.currentDirPath)return[];var e=j.currentDirPath.split("/");return e.map((function(t,n){var a;if(n<e.length-1){var r=e.slice(0,n+1).join("/");a=function(){z(r)}}return{text:t,onClick:a}}))}()})),a.createElement(ue.ButtonGroup,{minimal:!0},a.createElement(ue.Button,{disabled:!0,onClick:function(){0},icon:"caret-down"}),a.createElement(ue.Button,{onClick:function(){o(j.currentDirPath,!0)},icon:"refresh"}))),(Boolean(i)||Boolean(l)||Boolean(c))&&a.createElement("div",{style:co},a.createElement(ue.ButtonGroup,{minimal:!0},Boolean(i)&&a.createElement(ue.Tooltip,{content:Y()?"Create new directory in ".concat(j.currentDirPath):null},a.createElement(ue.Button,{disabled:!Y(),onClick:function(){Y()},icon:"folder-new",text:"Create Directory"})),Boolean(l)&&a.createElement(ue.Tooltip,{content:H()?"Rename ".concat(j.selectedPaths[0]):null},a.createElement(ue.Button,{disabled:!H(),onClick:function(){H()},icon:"edit",text:"Rename"})),Boolean(c)&&a.createElement(ue.Tooltip,{content:K()?"Delete ".concat(j.selectedPaths[0])+(j.selectedPaths.length>0?", ...":""):null},a.createElement(ue.Button,{disabled:!K(),onClick:function(){K()&&c(j.selectedPaths)},icon:"trash",text:"Delete Directory"})))),a.createElement("div",{style:so},a.createElement(Ft,{dir:"hor",initialSize:N,onChange:function(e){x(e)}},a.createElement(ro,{rootNode:r,selectedPath:j.selectedDirPath,onSelectedPathChange:z,expandedPaths:j.expandedPaths,onExpandedPathsChange:function(e){I({expandedPaths:e})}}),a.createElement(to,{rootNode:r,currentDirPath:j.currentDirPath,onCurrentDirPathChange:function(e){!b||m||v?I({expandedPaths:Object(y.b)(j.expandedPaths,e),selectedDirPath:e,currentDirPath:e}):(I({expandedPaths:Object(y.b)(j.expandedPaths,e),selectedDirPath:e,currentDirPath:e,selectedPaths:[e]}),T({value:Object(y.l)([Object(yn.a)(e)],v),isValid:!0}))},selectedPaths:j.selectedPaths,onSelectedPathsChange:function(e){I({selectedPaths:e}),T({value:Object(y.l)(e.map((function(e){return Object(yn.a)(e)})),v),isValid:!0})},fileFilter:B,multiSelections:v,openDirectory:b}))),a.createElement("div",{style:uo},a.createElement("span",null,b&&!m?"Directory:":"Filename:"),a.createElement("input",{className:ue.Classes.INPUT,style:L.isValid?po:ho,type:"text",value:L.value,onChange:function(e){var t=e.target.value||"",n=!0,a=Object(y.f)(t,j.currentDirPath,v,E);if(a.length){var o=j.expandedPaths;a.forEach((function(e){var t=Object(yn.c)(e);o=Object(y.b)(o,t)}));var i=a.length>0?Object(yn.c)(a[0]):null;null!==i&&null===Object(y.g)(r,i)&&(i=null),null!==i?(I({selectedDirPath:i,currentDirPath:i,expandedPaths:o,selectedPaths:a}),(m||b)&&(n=!a.find((function(e){return null===Object(y.g)(r,e)})))):(I({selectedPaths:a,expandedPaths:o}),n=!1)}else I({selectedPaths:a});T({value:t,isValid:n})}}),a.createElement(ue.ButtonGroup,null,a.createElement(ue.Button,{disabled:!0,onClick:function(){0},icon:"caret-down",minimal:!0}),h&&a.createElement(bo,{popoverProps:{minimal:!0},items:h,filterable:!1,itemRenderer:yo,onItemSelect:function(e){return W(e)}},a.createElement(ue.Button,{text:go(B),rightIcon:"caret-down"}))))))},yo=function(e,t){var n=t.modifiers,r=t.handleClick;return a.createElement(ue.MenuItem,{active:n.active,disabled:n.disabled,key:e.name,text:e.name,label:"(".concat(e.extensions.map((function(e){return"*."+e})).join(", "),")"),onClick:r})};function go(e){return e=e||y.a,"".concat(e.name," (").concat(e.extensions.map((function(e){return"*."+e})).join(", "),")")}function Eo(e,t,n){return e?"Save File":t&&!n?"Select Directory":"Open File"}var Oo=function(e){var t=new Set(e.properties);return a.createElement(vo,Object.assign({},e,{saveFile:!1,openFile:t.has("openFile"),openDirectory:t.has("openDirectory"),multiSelections:t.has("multiSelections"),showHiddenFiles:t.has("showHiddenFiles")}))};var _o={updateFileNode:c.kd},Co=Object(o.b)((function(e){return Object(d.a)(Object(d.a)({},e.control.directorySelectDialog.options),{},{isOpen:e.control.directorySelectDialog.isOpen,onClose:e.control.directorySelectDialog.onClose,rootNode:e.data.fsRootNode,hostOS:e.communication.webAPIServiceInfo.hostOS})}),_o)((function(e){return e.isOpen?a.createElement(Oo,e):null}));var ko={updateFileNode:c.kd},wo=Object(o.b)((function(e){return Object(d.a)(Object(d.a)({},e.control.fileOpenDialog.options),{},{isOpen:e.control.fileOpenDialog.isOpen,onClose:e.control.fileOpenDialog.onClose,rootNode:e.data.fsRootNode,hostOS:e.communication.webAPIServiceInfo.hostOS})}),ko)((function(e){return e.isOpen?a.createElement(Oo,e):null})),So=function(e){var t=e.onClose,n=Object(Ht.a)(e,["onClose"]),r=new Set(n.properties);return a.createElement(vo,Object.assign({},n,{onClose:function(e){t({canceled:e.canceled,filePath:!e.canceled&&e.filePaths.length>0?e.filePaths[0]:null})},saveFile:!0,openFile:!1,openDirectory:!1,multiSelections:!1,showHiddenFiles:r.has("showHiddenFiles")}))};var jo={updateFileNode:c.kd},Io=Object(o.b)((function(e){return Object(d.a)(Object(d.a)({},e.control.fileSaveDialog.options),{},{isOpen:e.control.fileSaveDialog.isOpen,onClose:e.control.fileSaveDialog.onClose,rootNode:e.data.fsRootNode,hostOS:e.communication.webAPIServiceInfo.hostOS})}),jo)((function(e){return e.isOpen?a.createElement(So,e):null}));var Po={updateFileNode:c.kd},Do=Object(o.b)((function(e){return Object(d.a)(Object(d.a)({},e.control.fileBrowseDialog.options),{},{isOpen:e.control.fileBrowseDialog.isOpen,onClose:e.control.fileBrowseDialog.onClose,rootNode:e.data.fsRootNode,hostOS:e.communication.webAPIServiceInfo.hostOS})}),Po)((function(e){var t=e.properties;if(t){var n=new Set(t);n.delete("openFile"),n.delete("openDirectory"),t=Array.from(n)}else t=[];return e.isOpen?a.createElement(Oo,Object.assign({title:"Browse Files"},e,{properties:t})):null})),Lo={none:void 0,info:On.a.INFO_SIGN,error:On.a.ERROR,question:On.a.CONFIRM,warning:On.a.WARNING_SIGN},To=function(e){var t=e.isOpen,n=e.onClose,r=e.type,o=e.title,i=e.message,l=e.detail,c=e.buttons,s=e.checkboxLabel,u=e.checkboxChecked,d=e.defaultId,p=e.cancelId,h=a.useState(Object(v.b)(u)&&u),f=Object(te.a)(h,2),m=f[0],b=f[1],y=Boolean(s);if(!t)return null;var g=function(){n&&n(null)};return a.createElement(Lt.a,{isOpen:t,title:o,icon:Lo[r],onCancel:g,renderActions:function(){return(c||["OK"]).map((function(e,t){var r=t===d?ue.Intent.PRIMARY:ue.Intent.NONE;return t===p?a.createElement(ue.Button,{intent:r,onClick:g},e):a.createElement(ue.Button,{intent:r,onClick:function(){return function(e){n&&n({buttonIndex:e,checkboxChecked:m})}(t)}},e)}))}},a.createElement("p",null,i),a.createElement("p",{className:"bp3-text-muted"},l),y&&a.createElement("p",null,a.createElement(ue.Checkbox,{label:s,onChange:function(e){b(e.target.checked)}})))};var Ao=Object(o.b)((function(e){return e.control.messageBox?Object(d.a)({isOpen:e.control.messageBox.isOpen,onClose:e.control.messageBox.onClose},e.control.messageBox.options):{isOpen:!1,message:""}}))((function(e){return a.createElement(To,e)})),Ro=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onTopPanelSelected=a.onTopPanelSelected.bind(Object(ie.a)(a)),a.onBottomPanelSelected=a.onBottomPanelSelected.bind(Object(ie.a)(a)),a.onTopPanelClose=a.onTopPanelClose.bind(Object(ie.a)(a)),a.onBottomPanelClose=a.onBottomPanelClose.bind(Object(ie.a)(a)),a.onVerSplitterPosChange=a.onVerSplitterPosChange.bind(Object(ie.a)(a)),a.onHorSplitterPosChange=a.onHorSplitterPosChange.bind(Object(ie.a)(a)),a.state=n.mapPropsToState(e),a}return Object(oe.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.setState(n.mapPropsToState(e))}},{key:"onTopPanelSelected",value:function(e){var t=this,n=this.state.selectedTopPanelId===e;this.setState({selectedTopPanelId:n?null:e},(function(){t.props.onSelectedTopPanelChange&&t.props.onSelectedTopPanelChange(t.state.selectedTopPanelId)}))}},{key:"onBottomPanelSelected",value:function(e){var t=this,n=this.state.selectedBottomPanelId===e;this.setState({selectedBottomPanelId:n?null:e},(function(){t.props.onSelectedBottomPanelChange&&t.props.onSelectedBottomPanelChange(t.state.selectedBottomPanelId)}))}},{key:"onTopPanelClose",value:function(){this.onTopPanelSelected(null)}},{key:"onBottomPanelClose",value:function(){this.onBottomPanelSelected(null)}},{key:"onVerSplitterPosChange",value:function(e){var t=this.state.layout.verPos+e;this.setLayout(Object(d.a)(Object(d.a)({},this.state.layout),{},{verPos:t}))}},{key:"onHorSplitterPosChange",value:function(e){var t=this.state.layout.horPos;"left"===(this.props.position||"left")?t+=e:t-=e,this.setLayout(Object(d.a)(Object(d.a)({},this.state.layout),{},{horPos:t}))}},{key:"setLayout",value:function(e){var t=this;this.setState({layout:e},(function(){t.props.onLayoutChange&&t.props.onLayoutChange(e)}))}},{key:"getSelectedTopPanel",value:function(){return this.findPanel(this.state.selectedTopPanelId)}},{key:"getSelectedBottomPanel",value:function(){return this.findPanel(this.state.selectedBottomPanelId)}},{key:"findPanel",value:function(e){if(!e)return null;var t=null;return a.Children.forEach(this.props.children,(function(n){var a=n;a.props&&a.props.id===e&&(t=a)})),t}},{key:"render",value:function(){var e,t,n,r,o=a.createElement(Ko,{panels:a.Children.toArray(this.props.children),position:this.props.position,selectedTopPanelId:this.state.selectedTopPanelId,selectedBottomPanelId:this.state.selectedBottomPanelId,onTopPanelSelected:this.onTopPanelSelected,onBottomPanelSelected:this.onBottomPanelSelected}),i=this.getSelectedTopPanel(),l=this.getSelectedBottomPanel(),c=this.state.layout.horPos,s="100%";if(i){i&&l&&(s=this.state.layout.verPos);var u={width:c,height:s};e=this.renderPanelPane(i,u,this.onTopPanelClose)}if(l){i&&l&&(s="calc(100% - ".concat(this.state.layout.verPos+4,"px)"));var d={width:c,height:s};t=this.renderPanelPane(l,d,this.onBottomPanelClose)}e&&t?n=this.renderTwoPanelsPane(e,t):e?n=e:t&&(n=t),n&&(r=this.renderResizablePanelPane(n));var p={display:"flex",flexFlow:"row nowrap",flex:"none",maxHeight:"100%"};return"left"===(this.props.position||"left")?a.createElement("div",{style:p},o,r):a.createElement("div",{style:p},r,o)}},{key:"renderPanelPane",value:function(e,t,n){return a.createElement(zo,{panel:e,onClose:n,position:this.props.position,style:t})}},{key:"renderTwoPanelsPane",value:function(e,t){var n=a.createElement(Wt,{dir:"ver",onChange:this.onVerSplitterPosChange});return a.createElement("div",{style:{display:"flex",flexDirection:"column"}},e,n,t)}},{key:"renderResizablePanelPane",value:function(e){var t,r=this.props.undockedMode||!1,o=this.props.position||"left";r&&(t="left"===o?{position:"absolute",top:0,left:n.PANEL_BAR_SIZE,backgroundColor:Bo,zIndex:5}:{position:"absolute",top:0,right:n.PANEL_BAR_SIZE,backgroundColor:Bo,zIndex:5});var i=Object(d.a)({paddingTop:n.PANEL_PANE_PADDING,paddingLeft:"left"===o?n.PANEL_PANE_PADDING:0,paddingRight:"left"===o?0:n.PANEL_PANE_PADDING,flex:"auto",display:"flex",flexFlow:"row nowrap",maxHeight:"100%"},t),l=a.createElement(Wt,{dir:"hor",onChange:this.onHorSplitterPosChange});return"left"===o?a.createElement("div",{style:i},e,l):a.createElement("div",{style:i},l,e)}}],[{key:"mapPropsToState",value:function(e){return{selectedTopPanelId:e.selectedTopPanelId,selectedBottomPanelId:e.selectedBottomPanelId,layout:e.layout}}}]),n}(a.PureComponent);function No(e){var t=a.createElement(ue.Icon,{icon:e.icon,className:"cate-panel-header-item"}),n=a.createElement("span",{className:"cate-panel-text cate-panel-header-item"},e.title.toUpperCase()),r=a.createElement(ue.Icon,{icon:"cross",className:"cate-icon-small cate-panel-header-item",onClick:e.onClose});return a.createElement("div",{className:"cate-panel-header",style:{flex:"none"}},t,n,r)}Ro.PANEL_ICON_SIZE=20,Ro.PANEL_ICON_PADDING=8,Ro.PANEL_BAR_SIZE=2*Ro.PANEL_ICON_PADDING+Ro.PANEL_ICON_SIZE,Ro.PANEL_BAR_PADDING=8,Ro.PANEL_PANE_PADDING=4,Ro.PANEL_BODY_PADDING=2;var xo={padding:Ro.PANEL_ICON_PADDING},Mo=Object(d.a)(Object(d.a)({},xo),{},{color:ue.Colors.GRAY4}),Vo=Object(d.a)(Object(d.a)({},xo),{},{color:ue.Colors.WHITE,backgroundColor:ue.Colors.DARK_GRAY5}),Bo="rgba(57, 75, 89, 0.5)",Wo={flex:"none",listStyleType:"none",padding:0,margin:0,border:"none"},Fo={flex:"none",listStyleType:"none",padding:0,margin:0,border:"none"},Uo={flex:"auto"},Go={display:"flex",flexDirection:"column",flex:"none",maxHeight:"100%",minWidth:Ro.PANEL_BAR_SIZE,overflow:"hidden",backgroundColor:ue.Colors.DARK_GRAY2,paddingTop:Ro.PANEL_BAR_PADDING,paddingBottom:Ro.PANEL_BAR_PADDING},Yo={textAlign:"center",verticalAlign:"middle"},Ho={flex:1,padding:Ro.PANEL_BODY_PADDING,overflow:"auto"};function Ko(e){var t="left"===(e.position||"left")?ue.PopoverPosition.RIGHT:ue.PopoverPosition.LEFT,n=e.panels||[];function r(n,r){var o=n.props.id,i=n.props.title,l=n.props.icon,c=o===r?Vo:Mo,s=n.props.position||"top";return a.createElement("li",{key:o,onClick:function(){return"top"===s?e.onTopPanelSelected(o):e.onBottomPanelSelected(o)},style:c},a.createElement(ue.Tooltip,{content:i,position:t,hoverOpenDelay:1500},a.createElement("span",{style:Yo},a.createElement(ue.Icon,{icon:l,iconSize:Ro.PANEL_ICON_SIZE}))))}var o,i=[],l=[],c=Object(g.a)(n);try{for(c.s();!(o=c.n()).done;){var s=o.value;if(s.props&&s.props.id)"top"===(s.props.position||"top")?i.push(r(s,e.selectedTopPanelId)):l.push(r(s,e.selectedBottomPanelId));else console.error("PanelBar children must be of type Panel")}}catch(u){c.e(u)}finally{c.f()}return a.createElement("div",{style:Go},a.createElement("ul",{style:Wo},i),a.createElement("div",{style:Uo}),a.createElement("ul",{style:Fo},l))}function zo(e){var t=e.panel;if(!t||!t.props||!t.props.body)return null;var n=t.props.id,r=t.props.body,o=Object(d.a)({display:"flex",flexDirection:"column",alignItems:"stretch"},e.style);return a.createElement("div",{style:o},a.createElement(No,{id:n,title:t.props.title,icon:t.props.icon,onClose:function(){return e.onClose(n)}}),a.createElement("div",{style:Ho},r))}var qo=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(){return Object(re.a)(this,n),t.apply(this,arguments)}return Object(oe.a)(n,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return null}}]),n}(a.PureComponent),Jo=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).viewMap=void 0,a.viewMap=n.createViewMap(a.props.views),a}return Object(oe.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.viewMap=n.createViewMap(e.views)}},{key:"render",value:function(){return this.props.views.length?E(this.props.viewLayout)?this.renderViewSplit(this.props.viewLayout,""):this.renderViewPanel(this.props.viewLayout,""):this.renderNoViews()}},{key:"renderNoViews",value:function(){return a.createElement("div",{style:n.NO_VIEW_CONTAINER_STYLE},a.createElement(ue.NonIdealState,{title:"No views",description:this.props.noViewsDescription,action:this.props.noViewsAction,icon:this.props.noViewsVisual}))}},{key:"renderViewSplit",value:function(e,t){var r,o,i=this,l=e.layouts[0];r=E(l)?this.renderViewSplit(l,t+"0"):this.renderViewPanel(l,t+"0");var c=e.layouts[1];if(o=E(c)?this.renderViewSplit(c,t+"1"):this.renderViewPanel(c,t+"1"),r&&o){var s,u,d;if("hor"===e.dir){s=n.HOR_SPLIT_CONTAINER_STYLE;var p=e.pos;u={flex:"none",width:p,height:"100%"},d={flex:"auto",width:"calc(100% - ".concat(p+4,"px)"),height:"100%"}}else{s=n.VER_SPLIT_CONTAINER_STYLE;var h=e.pos;u={flex:"none",width:"100%",height:h},d={flex:"auto",width:"100%",height:"calc(100% - ".concat(h+4,"px)")}}return a.createElement("div",{style:s},a.createElement("div",{style:u},r),a.createElement(Wt,{dir:e.dir,onChange:function(e){return i.props.onChangeViewSplitPos(t,e)}}),a.createElement("div",{style:d},o))}return r||(o||null)}},{key:"renderViewPanel",value:function(e,t){return a.createElement(Xo,{viewLayout:this.props.viewLayout,viewRenderMap:this.props.viewRenderMap,viewMap:this.viewMap,activeView:this.props.activeView,viewPath:t,viewIds:e.viewIds,selectedViewId:e.selectedViewId,onSelectView:this.props.onSelectView,onCloseView:this.props.onCloseView,onCloseAllViews:this.props.onCloseAllViews,onMoveView:this.props.onMoveView,onSplitViewPanel:this.props.onSplitViewPanel})}}],[{key:"createViewMap",value:function(e){var t={};return e.forEach((function(e){t[e.id]=e})),t}}]),n}(a.PureComponent);Jo.NO_VIEW_CONTAINER_STYLE={width:"100%",height:"100%",flex:"auto"},Jo.HOR_SPLIT_CONTAINER_STYLE={width:"100%",height:"100%",display:"flex",flexFlow:"row nowrap",flex:"auto",boxSizing:"border-box"},Jo.VER_SPLIT_CONTAINER_STYLE={width:"100%",height:"100%",display:"flex",flexFlow:"column nowrap",flex:"auto",boxSizing:"border-box"};var Xo=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).contentElement=void 0,a.onSplitHor=a.onSplitHor.bind(Object(ie.a)(a)),a.onSplitVer=a.onSplitVer.bind(Object(ie.a)(a)),a.onContentDivRef=a.onContentDivRef.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"onSplitHor",value:function(){this.props.onSplitViewPanel(this.props.viewPath,"hor",.5*this.contentElement.clientWidth)}},{key:"onSplitVer",value:function(){this.props.onSplitViewPanel(this.props.viewPath,"ver",.5*this.contentElement.clientHeight)}},{key:"onContentDivRef",value:function(e){this.contentElement=e}},{key:"render",value:function(){var e=this,t=this.props.viewIds;if(!t||!t.length)return null;var r,o=this.props.selectedViewId,i=[],l=null;t.forEach((function(t){var n=e.props.viewMap[t];n&&(o&&t===o&&(l=n),i.push(n))}));for(var c=[],s=function(t){var o=i[t],s=o.id,u=o.title,d=o.icon,p=void 0,h=void 0,f=void 0;if(l&&l.id===s){var m=e.props.viewRenderMap[o.type];r=m(o),p=n.TAB_STYLE_SELECTED,h=l===e.props.activeView?n.TITLE_STYLE_ACTIVE:n.TITLE_STYLE_SELECTED,f=n.CLOSE_ICON_STYLE_SELECTED}else p=n.TAB_STYLE_NORMAL,h=n.TITLE_STYLE_NORMAL,f=n.CLOSE_ICON_STYLE_NORMAL;var b=function(){e.props.onSelectView(e.props.viewPath,s)},v=void 0;d&&""!==d&&(v=a.createElement(ue.Icon,{icon:d,style:h,onClick:b})),c.push(a.createElement("div",{key:s,style:p},v,a.createElement("span",{style:h,onClick:b},u),a.createElement(ue.Icon,{style:f,icon:"cross",onClick:function(){e.props.onCloseView(e.props.viewPath,s)}})))},u=0;u<i.length;u++)s(u);var d,p,h,f=a.createElement("div",{style:n.TABS_STYLE},c),m=a.createElement("div",{key:"spacer",style:n.SPACER_STYLE}),b=n.MENU_ICON_STYLE;if(i.length>1&&(d=a.createElement(ue.Icon,{key:"splitHor",style:b,icon:"add-column-right",onClick:this.onSplitHor}),p=a.createElement(ue.Icon,{key:"splitVer",style:b,icon:"add-row-bottom",onClick:this.onSplitVer})),l){var v,y,g=k(this.props.viewLayout,o),E=this.props.viewMap,O=g.before.map((function(t){var n=E[t];return a.createElement(ue.MenuItem,{key:t,onClick:function(){return e.props.onMoveView(o,"before",n.id)},text:n.title})})),_=g.after.map((function(t){var n=E[t];return a.createElement(ue.MenuItem,{key:t,onClick:function(){return e.props.onMoveView(o,"after",n.id)},text:n.title})}));if(O.length&&(v=a.createElement(ue.MenuItem,{key:"before",text:"Move Before"},O)),_.length&&(y=a.createElement(ue.MenuItem,{key:"after",text:"Move After"},_)),v||y){var C=a.createElement(ue.Menu,null,v,y);h=a.createElement(ue.Popover,{content:C,position:ue.PopoverPosition.BOTTOM},a.createElement(ue.Icon,{key:"more",style:b,icon:"more"}))}}var w=a.createElement("div",{style:n.MENU_STYLE},d,p,h);return a.createElement("div",{style:n.CONTAINER_STYLE},a.createElement("div",{style:n.VIEW_HEADER_STYLE},f,m,w),a.createElement("div",{style:n.VIEW_BODY_STYLE,ref:this.onContentDivRef},r))}}]),n}(a.PureComponent);Xo.SELECTED_BG_COLOR=ue.Colors.DARK_GRAY1,Xo.TAB_STYLE_SELECTED={padding:2,flex:"none",color:ue.Colors.WHITE,backgroundColor:Xo.SELECTED_BG_COLOR},Xo.TAB_STYLE_NORMAL={padding:2,color:ue.Colors.LIGHT_GRAY1},Xo.TITLE_STYLE_BASE={paddingLeft:4,paddingRight:4},Xo.TITLE_STYLE_ACTIVE=Object(d.a)(Object(d.a)({},Xo.TITLE_STYLE_BASE),{},{color:ue.Colors.BLUE5}),Xo.TITLE_STYLE_SELECTED=Xo.TITLE_STYLE_BASE,Xo.TITLE_STYLE_NORMAL=Xo.TITLE_STYLE_BASE,Xo.CLOSE_ICON_STYLE_SELECTED={marginLeft:6,fontSize:12},Xo.CLOSE_ICON_STYLE_NORMAL={marginLeft:6,fontSize:12},Xo.MENU_ICON_STYLE={color:ue.Colors.GRAY5,marginLeft:5,fontSize:12},Xo.TABS_STYLE={flex:"none",display:"flex",flexDirection:"row"},Xo.SPACER_STYLE={flex:"auto"},Xo.MENU_STYLE={flex:"none",height:"100%"},Xo.VIEW_HEADER_STYLE={display:"flex",flexDirection:"row",flex:"none",width:"100%",marginTop:2,borderBottomStyle:"solid",borderBottomWidth:2,borderBottomColor:Xo.SELECTED_BG_COLOR,boxSizing:"border-box",overflow:"hidden"},Xo.VIEW_BODY_STYLE={display:"flex",flexDirection:"column",flex:"auto",width:"100%",height:"100%",overflow:"hidden"},Xo.CONTAINER_STYLE={display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"hidden"};var Zo=n(410),Qo={marginTop:"0.75em",display:"flex",flexDirection:"column",alignItems:"flex-end"},$o={overflow:"auto"},ei=function(e){var t=e.details,n=e.onCopyDetails,r=e.width,o=e.height,i=a.useState(!1),l=Object(te.a)(i,2),c=l[0],s=l[1];return a.createElement("div",{style:Qo},a.createElement("div",null,n&&a.createElement(ue.Button,{onClick:function(){return n(t)},icon:"clipboard",small:!0,style:{marginRight:6}}),a.createElement(ue.Button,{onClick:function(){return s(!c)},rightIcon:c?"chevron-up":"chevron-down",small:!0},c?"Hide Details":"Show Details")),a.createElement(ue.Collapse,{isOpen:c},a.createElement("pre",{className:"user-selectable",style:Object(d.a)(Object(d.a)({},$o),{},{width:r||"32em",height:o||"20em"})},t)))};var ti={wordBreak:"break-all"},ni=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).renderBody=a.renderBody.bind(Object(ie.a)(a)),a.handleConfirm=a.handleConfirm.bind(Object(ie.a)(a)),a.handleCancel=a.handleCancel.bind(Object(ie.a)(a)),a.handleCopyReport=a.handleCopyReport.bind(Object(ie.a)(a)),a.state={copyReport:!1},a}return Object(oe.a)(n,[{key:"handleConfirm",value:function(){if(this.state.copyReport){var e=this.props.jobTitle,t=this.props.jobFailure,a="Job: ".concat(e,"\nMessage: ").concat(t.message,"\n");a+="Code: ".concat(t.code,"\n"),t.data&&(t.data.method&&(a+="Method: ".concat(t.data.method,"\n")),t.data.exception&&(a+="Exception: ".concat(t.data.exception,"\n")),t.data.traceback&&(a+="\n".concat(t.data.traceback,"\n"))),c.Hb(a)}this.props.dispatch(c.Pb(n.DIALOG_ID))}},{key:"handleCancel",value:function(){this.props.dispatch(c.Pb(n.DIALOG_ID))}},{key:"handleCopyReport",value:function(e){this.setState({copyReport:e.target.checked})}},{key:"render",value:function(){if(!this.props.isOpen||!this.props.jobFailure)return null;var e=Object(mr.l)(this.props.jobFailure);return a.createElement(Lt.a,{isOpen:this.props.isOpen,icon:"error",title:e,onConfirm:this.handleConfirm,onCancel:this.handleCancel,noCancelButton:!0,renderBody:this.renderBody,style:n.DIALOG_STYLE})}},{key:"renderBody",value:function(){if(!this.props.isOpen)return null;var e=this.props.jobFailure.message;e||(e="An unknown error occurred (code ".concat(this.props.jobFailure.code,")."));var t,n,r=a.createElement("div",{style:ti},a.createElement("p",null,"Oops, Cate couldn't carry out the request"),a.createElement("em",null,a.createElement("p",{className:"user-selectable"},this.props.jobTitle)),a.createElement("div",null,"Reason:"),a.createElement("div",{className:"user-selectable"},e));!Object(mr.n)(this.props.jobFailure)&&this.props.jobFailure.data&&this.props.jobFailure.data.traceback&&(t=a.createElement(ei,{details:this.props.jobFailure.data.traceback,width:"36em"})),Object(mr.m)(this.props.jobFailure)&&(n=a.createElement("div",{style:{marginTop:"1em"}},a.createElement("span",{className:"bp3-text-muted"},"Please consider reporting this issue in Cate's ",a.createElement("a",{href:"https://github.com/CCI-Tools/cate/issues",target:"_blank",rel:"noopener noreferrer"},"issue tracker"),"."),a.createElement(ue.Checkbox,{label:"Copy error report to clipboard",checked:this.state.copyReport,onChange:this.handleCopyReport})));var o,i=Object(mr.j)(this.props.jobFailure);return o=Object(mr.n)(this.props.jobFailure)?ue.Intent.PRIMARY:ue.Intent.WARNING,a.createElement("div",{style:{display:"flex"}},a.createElement("div",{style:{fontSize:"4em",flex:"0 1 1em"}},a.createElement(ue.Icon,{icon:i,intent:o,iconSize:48})),a.createElement("div",{style:{flex:"1 1 90%",marginLeft:"1em"}},r,t,n))}}]),n}(a.Component);ni.DIALOG_ID="jobFailureDialog",ni.DIALOG_STYLE={width:"600px"};var ai=Object(o.b)((function(e){var t=Oe.x(ni.DIALOG_ID)(e);return{isOpen:t.isOpen,jobTitle:t.jobTitle,jobFailure:t.jobFailure}}))(ni),ri=n(81),oi=n(208),ii={width:"100%",marginBottom:"2em",display:"flex",flexGrow:1},li={flex:"none"};var ci=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).handleOpenFilesOnClose=function(e){e.canceled||a.setState(Object(d.a)(Object(d.a)({},a.state),{},{filePaths:e.filePaths}))},a.handleOpenFilesOpen=function(){a.props.dispatch(Object(c.Zc)({title:"Select Files",properties:["openFile","multiSelections"]},a.handleOpenFilesOnClose))},a.state={filePaths:[]},a.onCancel=a.onCancel.bind(Object(ie.a)(a)),a.onConfirm=a.onConfirm.bind(Object(ie.a)(a)),a.canConfirm=a.canConfirm.bind(Object(ie.a)(a)),a.renderBody=a.renderBody.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.setState({filePaths:[]})}},{key:"onCancel",value:function(){this.props.dispatch(c.Pb(n.DIALOG_ID))}},{key:"canConfirm",value:function(){return this.state.filePaths.length>0}},{key:"onConfirm",value:function(){this.props.dispatch(c.Pb(n.DIALOG_ID,this.state)),this.props.dispatch(c.Lb(this.state.filePaths))}},{key:"render",value:function(){var e=this.props.isOpen;return e?a.createElement(Lt.a,{isOpen:e,title:"Download Files",icon:"download",confirmTitle:"Download",confirmIconName:"download",confirmTooltip:"Download files.",onCancel:this.onCancel,canConfirm:this.canConfirm,onConfirm:this.onConfirm,renderBody:this.renderBody}):null}},{key:"renderBody",value:function(){if(!this.state.filePaths)return null;var e=this.state.filePaths.map((function(e){return a.createElement("li",{key:e},e)}));return a.createElement("div",null,"File download:",a.createElement(ue.ControlGroup,{style:ii,fill:!0},a.createElement(ue.AnchorButton,{intent:ue.Intent.PRIMARY,style:li,onClick:this.handleOpenFilesOpen},"Select Remote Files...")),a.createElement("aside",null,e.length>0?a.createElement("h4",null,"Files"):"",a.createElement("ul",null,e)))}}]),n}(a.Component);ci.DIALOG_ID="fileDownloadDialog";var si=Object(o.b)((function(e){return{isOpen:Oe.x(ci.DIALOG_ID)(e).isOpen,dialogId:"fileDownloadDialog"}}))(ci);var ui={world:function(e){return a.createElement(gt,{view:e})},figure:function(e){return a.createElement(Dt,{view:e})},animation:function(e){return a.createElement(Zo.a,{view:e})},table:function(e){return a.createElement(Bt,{view:e})}};var di={display:"flex",flexFlow:"column nowrap",width:"100%",height:"100%",overflow:"hidden"},pi={display:"flex",flexFlow:"row nowrap",flex:"auto",height:"100%",overflow:"hidden"},hi=Object(o.b)((function(e){return{forceAppBar:e.session.forceAppBar,fileSystemAPI:Oe.B(e),appServiceMode:window.location.pathname.indexOf("/proxy/")>0?"cloud":"local",appServiceURL:e.communication.webAPIServiceURL,appServiceHostOS:e.communication.webAPIServiceInfo&&e.communication.webAPIServiceInfo.hostOS,appServiceVersion:e.communication.webAPIServiceInfo&&e.communication.webAPIServiceInfo.version}}))((function(e){var t,n=e.forceAppBar,r=e.fileSystemAPI,o=e.appServiceMode,i=e.appServiceURL,l=e.appServiceHostOS,s=e.appServiceVersion,u=e.dispatch,d=Object(se.a)().trackPageView;return a.useEffect((function(){var e=[{id:1,value:o},{id:2,value:i},{id:3,value:l},{id:4,value:s}];console.log("Tracking:",e),d({customDimensions:e})}),[d,o,i,l,s]),a.useEffect((function(){u(c.Sb())}),[u]),Object(pe.a)()&&!n||(t=a.createElement(ge,null)),a.createElement("div",{className:"bp3-dark",style:di},a.createElement(de,null),a.createElement(za,null),t,a.createElement("div",{style:pi},a.createElement(mi,null),a.createElement(gi,null),a.createElement(vi,null)),a.createElement(Sr,null),a.createElement(Kr,null),a.createElement(Vr,null),a.createElement(oi.b,null),a.createElement(si,null),a.createElement(Br,null),a.createElement(At,null),a.createElement(Ee.c,{dialogId:Ee.b}),a.createElement(Ee.c,{dialogId:Ee.a}),a.createElement(Ta,{id:"newCtxOperationStepDialog"}),a.createElement(ai,null),!ri.a.isNativeUI&&null!==r&&a.createElement(Co,null),!ri.a.isNativeUI&&null!==r&&a.createElement(wo,null),!ri.a.isNativeUI&&null!==r&&a.createElement(Io,null),!ri.a.isNativeUI&&null!==r&&a.createElement(Do,null),!ri.a.isNativeUI&&a.createElement(Ao,null))}));var fi=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onLeftPanelContainerLayoutChange=a.onLeftPanelContainerLayoutChange.bind(Object(ie.a)(a)),a.onRightPanelContainerLayoutChange=a.onRightPanelContainerLayoutChange.bind(Object(ie.a)(a)),a.onSelectedLeftTopPanelChange=a.onSelectedLeftTopPanelChange.bind(Object(ie.a)(a)),a.onSelectedLeftBottomPanelChange=a.onSelectedLeftBottomPanelChange.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"onLeftPanelContainerLayoutChange",value:function(e){this.props.dispatch(c.Ac(e))}},{key:"onRightPanelContainerLayoutChange",value:function(e){this.props.dispatch(c.Dc(e))}},{key:"onSelectedLeftTopPanelChange",value:function(e){this.props.dispatch(c.Ic(e))}},{key:"onSelectedLeftBottomPanelChange",value:function(e){this.props.dispatch(c.Hc(e))}},{key:"render",value:function(){return a.createElement(Ro,{position:"left",undockedMode:this.props.panelContainerUndockedMode,layout:this.props.leftPanelContainerLayout,onLayoutChange:this.onLeftPanelContainerLayoutChange,selectedTopPanelId:this.props.selectedLeftTopPanelId,selectedBottomPanelId:this.props.selectedLeftBottomPanelId,onSelectedTopPanelChange:this.onSelectedLeftTopPanelChange,onSelectedBottomPanelChange:this.onSelectedLeftBottomPanelChange},a.createElement(qo,{id:"dataSources",position:"top",icon:"database",title:"Data Sources",body:a.createElement(Ga,null)}),a.createElement(qo,{id:"operations",position:"bottom",icon:"function",title:"Operations",body:a.createElement(Ka,null)}))}}]),n}(a.PureComponent),mi=Object(o.b)((function(e){return{panelContainerUndockedMode:Oe.V(e),leftPanelContainerLayout:Oe.M(e),selectedLeftTopPanelId:Oe.ub(e),selectedLeftBottomPanelId:Oe.tb(e)}}))(fi);var bi=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onRightPanelContainerLayoutChange=a.onRightPanelContainerLayoutChange.bind(Object(ie.a)(a)),a.onSelectedRightTopPanelChange=a.onSelectedRightTopPanelChange.bind(Object(ie.a)(a)),a.onSelectedRightBottomPanelChange=a.onSelectedRightBottomPanelChange.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"onRightPanelContainerLayoutChange",value:function(e){this.props.dispatch(c.Dc(e))}},{key:"onSelectedRightTopPanelChange",value:function(e){this.props.dispatch(c.Mc(e))}},{key:"onSelectedRightBottomPanelChange",value:function(e){this.props.dispatch(c.Lc(e))}},{key:"render",value:function(){return a.createElement(Ro,{position:"right",undockedMode:this.props.panelContainerUndockedMode,layout:this.props.rightPanelContainerLayout,onLayoutChange:this.onRightPanelContainerLayoutChange,selectedTopPanelId:this.props.selectedRightTopPanelId,selectedBottomPanelId:this.props.selectedRightBottomPanelId,onSelectedTopPanelChange:this.onSelectedRightTopPanelChange,onSelectedBottomPanelChange:this.onSelectedRightBottomPanelChange},a.createElement(qo,{id:"workspace",position:"top",icon:"flows",title:"Workspace",body:a.createElement(nr,null)}),a.createElement(qo,{id:"layers",position:"top",icon:"layers",title:"Layers",body:a.createElement(Pr,null)}),a.createElement(qo,{id:"placemarks",position:"top",icon:"map-marker",title:"Places",body:a.createElement(dr,null)}),a.createElement(qo,{id:"variables",position:"bottom",icon:"variable",title:"Variables",body:a.createElement(or,null)}),a.createElement(qo,{id:"style",position:"bottom",icon:"style",title:"Styles",body:a.createElement(Nr,null)}),a.createElement(qo,{id:"view",position:"bottom",icon:"eye-open",title:"View",body:a.createElement(fr,null)}),a.createElement(qo,{id:"tasks",position:"bottom",icon:"play",title:"Tasks",body:a.createElement(Er,null)}))}}]),n}(a.PureComponent),vi=Object(o.b)((function(e){return{panelContainerUndockedMode:Oe.V(e),rightPanelContainerLayout:Oe.cb(e),selectedRightTopPanelId:Oe.Fb(e),selectedRightBottomPanelId:Oe.Eb(e)}}))(bi);var yi=function(e){Object(le.a)(n,e);var t=Object(ce.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).onSelectView=a.onSelectView.bind(Object(ie.a)(a)),a.onCloseView=a.onCloseView.bind(Object(ie.a)(a)),a.onCloseAllViews=a.onCloseAllViews.bind(Object(ie.a)(a)),a.onMoveView=a.onMoveView.bind(Object(ie.a)(a)),a.onChangeViewSplitPos=a.onChangeViewSplitPos.bind(Object(ie.a)(a)),a.onSplitViewPanel=a.onSplitViewPanel.bind(Object(ie.a)(a)),a}return Object(oe.a)(n,[{key:"onSelectView",value:function(e,t){this.props.dispatch(c.sc(e,t))}},{key:"onCloseView",value:function(e,t){this.props.dispatch(c.Eb(e,t))}},{key:"onCloseAllViews",value:function(e){this.props.dispatch(c.Db(e))}},{key:"onMoveView",value:function(e,t,n){this.props.dispatch(c.ac(e,t,n))}},{key:"onSplitViewPanel",value:function(e,t,n){this.props.dispatch(c.hd(e,t,n))}},{key:"onChangeViewSplitPos",value:function(e,t){this.props.dispatch(c.Bb(e,t))}},{key:"render",value:function(){return a.createElement("div",{style:n.DIV_STYLE},a.createElement(Jo,{viewRenderMap:ui,viewLayout:this.props.viewLayout,views:this.props.views,activeView:this.props.activeView,noViewsDescription:"You can create new views from the VIEW panel.",noViewsVisual:"eye-open",onSelectView:this.onSelectView,onCloseView:this.onCloseView,onCloseAllViews:this.onCloseAllViews,onMoveView:this.onMoveView,onChangeViewSplitPos:this.onChangeViewSplitPos,onSplitViewPanel:this.onSplitViewPanel}))}}]),n}(a.PureComponent);yi.DIV_STYLE={flex:"auto",height:"100%",overflow:"hidden"};var gi=Object(o.b)((function(e){return{viewLayout:Oe.cc(e),views:Oe.dc(e),activeView:Oe.e(e)}}))(yi);var Ei=Object(o.b)((function(e){return{trackingConsentObtained:e.session.trackingConsentObtained}}))((function(e){var t=e.trackingConsentObtained,n=a.useState(null),r=Object(te.a)(n,2),o=r[0],i=r[1];return a.useEffect((function(){if(null===o){var e=Object(ne.a)({urlBase:"https://matomo-ext.esa.int/",siteId:8,disabled:!t,heartBeat:{active:!0,seconds:10},linkTracking:!1,configurations:{disableCookies:!t,setSecureCookie:!0,setRequestMethod:"POST"}});i(e)}}),[t,o]),a.createElement(ae.a,{value:o},a.createElement(hi,null))}));n(766),n(767),n(768),n(769),n(770),n(771),n(772),n(773);window.CESIUM_BASE_URL="./cesium",function(){var e=[l.a],t=i.a.apply(void 0,e),n=Object(i.d)(ee,t),s=new URLSearchParams(window.location.search),u="http://localhost:9090";s.has("serviceUrl")&&(u=s.get("serviceUrl")),n.dispatch(Object(c.Gb)(u)),r.render(a.createElement(o.a,{store:n},a.createElement(Ei,null)),document.getElementById("root"))}()},8:function(e,t,n){"use strict";n.d(t,"ib",(function(){return R})),n.d(t,"T",(function(){return N})),n.d(t,"P",(function(){return x})),n.d(t,"Q",(function(){return M})),n.d(t,"S",(function(){return V})),n.d(t,"R",(function(){return B})),n.d(t,"hb",(function(){return W})),n.d(t,"eb",(function(){return F})),n.d(t,"sb",(function(){return U})),n.d(t,"z",(function(){return G})),n.d(t,"ab",(function(){return Y})),n.d(t,"qb",(function(){return H})),n.d(t,"n",(function(){return K})),n.d(t,"Gb",(function(){return X})),n.d(t,"Wc",(function(){return Q})),n.d(t,"Pb",(function(){return $})),n.d(t,"mc",(function(){return te})),n.d(t,"uc",(function(){return ne})),n.d(t,"Tb",(function(){return ae})),n.d(t,"qd",(function(){return ie})),n.d(t,"Qc",(function(){return le})),n.d(t,"rd",(function(){return ce})),n.d(t,"id",(function(){return se})),n.d(t,"Ab",(function(){return ue})),n.d(t,"cd",(function(){return de})),n.d(t,"F",(function(){return he})),n.d(t,"G",(function(){return fe})),n.d(t,"wc",(function(){return me})),n.d(t,"xc",(function(){return ve})),n.d(t,"gb",(function(){return ye})),n.d(t,"kd",(function(){return Ee})),n.d(t,"a",(function(){return Oe})),n.d(t,"c",(function(){return _e})),n.d(t,"y",(function(){return Ce})),n.d(t,"nb",(function(){return ke})),n.d(t,"ob",(function(){return we})),n.d(t,"pb",(function(){return Se})),n.d(t,"ub",(function(){return je})),n.d(t,"wb",(function(){return Ie})),n.d(t,"xb",(function(){return Pe})),n.d(t,"lc",(function(){return De})),n.d(t,"nd",(function(){return Le})),n.d(t,"od",(function(){return Te})),n.d(t,"pd",(function(){return Ae})),n.d(t,"Xb",(function(){return Re})),n.d(t,"Kc",(function(){return Ne})),n.d(t,"db",(function(){return xe})),n.d(t,"bb",(function(){return Me})),n.d(t,"cb",(function(){return Ve})),n.d(t,"Fc",(function(){return Ue})),n.d(t,"ic",(function(){return Ge})),n.d(t,"Ec",(function(){return He})),n.d(t,"vc",(function(){return Ke})),n.d(t,"fc",(function(){return qe})),n.d(t,"vb",(function(){return Je})),n.d(t,"kc",(function(){return Xe})),n.d(t,"mb",(function(){return Ze})),n.d(t,"Jc",(function(){return Qe})),n.d(t,"Cc",(function(){return $e})),n.d(t,"Bc",(function(){return et})),n.d(t,"ed",(function(){return tt})),n.d(t,"Qb",(function(){return nt})),n.d(t,"E",(function(){return at})),n.d(t,"tb",(function(){return rt})),n.d(t,"A",(function(){return ot})),n.d(t,"V",(function(){return it})),n.d(t,"U",(function(){return lt})),n.d(t,"W",(function(){return ct})),n.d(t,"bc",(function(){return ut})),n.d(t,"gc",(function(){return dt})),n.d(t,"pc",(function(){return ht})),n.d(t,"Jb",(function(){return ft})),n.d(t,"cc",(function(){return mt})),n.d(t,"hc",(function(){return vt})),n.d(t,"Kb",(function(){return yt})),n.d(t,"Fb",(function(){return gt})),n.d(t,"Cb",(function(){return Et})),n.d(t,"Ib",(function(){return Ot})),n.d(t,"rc",(function(){return _t})),n.d(t,"qc",(function(){return Ct})),n.d(t,"Pc",(function(){return St})),n.d(t,"Oc",(function(){return jt})),n.d(t,"Uc",(function(){return It})),n.d(t,"Vc",(function(){return Pt})),n.d(t,"nc",(function(){return Dt})),n.d(t,"Ob",(function(){return Lt})),n.d(t,"gd",(function(){return Tt})),n.d(t,"Yc",(function(){return At})),n.d(t,"oc",(function(){return Rt})),n.d(t,"N",(function(){return Nt})),n.d(t,"M",(function(){return xt})),n.d(t,"Rc",(function(){return Mt})),n.d(t,"Nc",(function(){return Vt})),n.d(t,"yb",(function(){return Bt})),n.d(t,"Ac",(function(){return Wt})),n.d(t,"Dc",(function(){return Ft})),n.d(t,"Ic",(function(){return Ut})),n.d(t,"Hc",(function(){return Gt})),n.d(t,"Mc",(function(){return Yt})),n.d(t,"Lc",(function(){return Ht})),n.d(t,"e",(function(){return Kt})),n.d(t,"d",(function(){return zt})),n.d(t,"C",(function(){return qt})),n.d(t,"l",(function(){return Jt})),n.d(t,"X",(function(){return Xt})),n.d(t,"f",(function(){return Zt})),n.d(t,"q",(function(){return Qt})),n.d(t,"zb",(function(){return $t})),n.d(t,"sc",(function(){return en})),n.d(t,"Eb",(function(){return tn})),n.d(t,"Db",(function(){return nn})),n.d(t,"hd",(function(){return an})),n.d(t,"Bb",(function(){return rn})),n.d(t,"ac",(function(){return on})),n.d(t,"O",(function(){return ln})),n.d(t,"J",(function(){return cn})),n.d(t,"H",(function(){return sn})),n.d(t,"I",(function(){return un})),n.d(t,"K",(function(){return dn})),n.d(t,"m",(function(){return pn})),n.d(t,"fb",(function(){return hn})),n.d(t,"lb",(function(){return fn})),n.d(t,"Tc",(function(){return mn})),n.d(t,"yc",(function(){return bn})),n.d(t,"zc",(function(){return vn})),n.d(t,"dc",(function(){return yn})),n.d(t,"jd",(function(){return gn})),n.d(t,"rb",(function(){return En})),n.d(t,"Wb",(function(){return _n})),n.d(t,"Y",(function(){return Cn})),n.d(t,"Ub",(function(){return kn})),n.d(t,"L",(function(){return wn})),n.d(t,"b",(function(){return Sn})),n.d(t,"x",(function(){return jn})),n.d(t,"jb",(function(){return In})),n.d(t,"kb",(function(){return Pn})),n.d(t,"p",(function(){return Dn})),n.d(t,"o",(function(){return Ln})),n.d(t,"B",(function(){return Tn})),n.d(t,"D",(function(){return An})),n.d(t,"Gc",(function(){return Rn})),n.d(t,"jc",(function(){return Nn})),n.d(t,"Zb",(function(){return xn})),n.d(t,"Yb",(function(){return Mn})),n.d(t,"ld",(function(){return Vn})),n.d(t,"md",(function(){return Wn})),n.d(t,"Sc",(function(){return Un})),n.d(t,"tc",(function(){return Gn})),n.d(t,"Z",(function(){return Yn})),n.d(t,"Vb",(function(){return Hn})),n.d(t,"fd",(function(){return Kn})),n.d(t,"Rb",(function(){return zn})),n.d(t,"r",(function(){return qn})),n.d(t,"ec",(function(){return Jn})),n.d(t,"s",(function(){return Xn})),n.d(t,"g",(function(){return Zn})),n.d(t,"Xc",(function(){return Qn})),n.d(t,"u",(function(){return $n})),n.d(t,"i",(function(){return ea})),n.d(t,"Zc",(function(){return ta})),n.d(t,"v",(function(){return na})),n.d(t,"j",(function(){return aa})),n.d(t,"ad",(function(){return ra})),n.d(t,"w",(function(){return oa})),n.d(t,"k",(function(){return ia})),n.d(t,"dd",(function(){return la})),n.d(t,"t",(function(){return ca})),n.d(t,"h",(function(){return sa})),n.d(t,"bd",(function(){return ua})),n.d(t,"Hb",(function(){return da})),n.d(t,"Nb",(function(){return pa})),n.d(t,"Mb",(function(){return ha})),n.d(t,"sd",(function(){return fa})),n.d(t,"Lb",(function(){return ma})),n.d(t,"Sb",(function(){return ga}));var a=n(6),r=n(33),o=n(44),i=n(160),l=n.n(i),c=n(253),s=n(23),u=n(204),d=n.n(u),p=n(783),h=n(29),f=n(45),m=n(101),b=n(18),v=n(53),y=n(81),g=n(48),E=n(106);function O(e,t){return!!e[t]}function _(e,t,n){return Object(a.a)(Object(a.a)({},e),{},Object(o.a)({},t,{isValueUsed:!0,constantValue:n,resourceName:null}))}function C(e,t,n){return Object(a.a)(Object(a.a)({},e),{},Object(o.a)({},t,{isValueUsed:!1,constantValue:null,resourceName:n}))}var k=n(208),w=n(211),S=n(135),j=n(10),I=n(25),P=n(67),D=n(38),L=n(209),T=n(136),A=Object(S.b)(),R="UPDATE_INITIAL_STATE",N="SET_WEBAPI_STATUS",x="SET_WEBAPI_AUTO_STOP_INFO",M="SET_WEBAPI_CLIENT",V="SET_WEBAPI_SERVICE_URL",B="SET_WEBAPI_SERVICE_INFO",W="UPDATE_HUB_STATUS",F="UPDATE_DIALOG_STATE",U="UPDATE_TASK_STATE",G="REMOVE_TASK_STATE",Y="UPDATE_CONTROL_STATE",H="UPDATE_SESSION_STATE",K="INVOKE_CTX_OPERATION";function z(e){return{type:N,payload:{webAPIStatus:e}}}function q(e){return{type:M,payload:{webAPIClient:e}}}function J(e){return{type:V,payload:{webAPIServiceURL:e}}}function X(e){return function(){var t=Object(c.a)(l.a.mark((function t(n,a){var r,o,i,c,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(J(e)),n(z("connecting")),t.prev=2,t.next=5,(new L.a).getServiceInfo(e);case 5:r=t.sent,t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(2),va(t.t0,"Failed to retrieve service information"),n(z("error")),t.abrupt("return");case 13:console.log("Cate WebAPI server version ".concat(r.version)),n({type:B,payload:{webAPIServiceInfo:r}}),o=Object(D.o)(j.h(a())),i=function(e,t){return t.message?"".concat(e," (").concat(t.message,")"):e},c=function(){o.isOpen&&o.call("keep_alive",[]).then((function(e){if(e){var t={availableTime:e.available_time,inactivityTime:e.inactivity_time,remainingTime:e.remaining_time};n({type:x,payload:{webAPIAutoStopInfo:t}})}}))},s=null,5,o.onOpen=function(){n(q(o)),n((function(e,t){pe({title:"Load configuration",dispatch:e,call:function(){return j.i(t()).getBackendConfig()},action:function(t){e(function(e){return ce({backendConfig:e})}(t))}})})),n(Hn()),n((function(e,t){pe({title:"Loading Preferences",dispatch:e,call:function(){return j.X(t()).loadPreferences()},action:function(n){e(ce(n)),e(Be()),e((a=t().session.reopenLastWorkspace,r=t().session.lastWorkspacePath,function(e){e(a&&r?dt(r):ut(null))}));var a,r},planB:function(t){e(la({type:"error",title:"Loading Preferences",message:"Failed to load preferences.",detail:t.message}))},requireDoneNotification:!0})})),n((function(e,t){pe({title:"Load operations",dispatch:e,call:function(){return j.Q(t()).getOperations()},action:function(t){e(function(e){return{type:Ze,payload:{operations:e}}}(t))}})})),s=setInterval(c,5e3)},o.onClose=function(e){null!==s&&clearInterval(s);var t=a().communication.webAPIStatus;if("shuttingDown"!==t&&"loggingOut"!==t){console.error("webAPIClient.onClose:",e);var r="reason=".concat(e.reason,", code=").concat(e.code,", clean=").concat(e.wasClean);Object(P.a)({type:"notification",text:i("Connection to Cate service closed: ".concat(r),e)},12e4),n(z("closed"))}},o.onError=function(e){console.error("webAPIClient.onError:",e),n(z("error")),Object(P.a)({type:"error",text:i("Error connecting to Cate service",e)})},o.onWarning=function(e){console.warn("webAPIClient.onWarning:",e),Object(P.a)({type:"warning",text:i("Warning from Cate service",e)})};case 24:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,n){return t.apply(this,arguments)}}()}function Z(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return{type:F,payload:{dialogId:e,dialogState:Object.assign.apply(Object,[{}].concat(n))}}}function Q(e,t){return Z(e,t,{isOpen:!0})}function $(e,t){return Z(e,t,{isOpen:!1})}function ee(e,t){return{type:U,payload:{jobId:e,taskState:t}}}function te(e){return{type:G,payload:{jobId:e}}}function ne(e,t){return re(Object(o.a)({},e,t))}function ae(e,t){return function(n,a){var o=j.Bb(a());if(o){var i,l=Object(r.a)(e.inputs);try{for(l.s();!(i=l.n()).done;){var c=i.value;if(!O(t,c.name)&&Object(f.x)(c.dataType,o.dataType)){t=C(t,c.name,o.name);break}}}catch(h){l.e(h)}finally{l.f()}}var s=j.Kb(a());if(s){var u,d=Object(r.a)(e.inputs);try{for(d.s();!(u=d.n()).done;){var p=u.value;if(!O(t,p.name)&&(p.dataType===f.w||p.dataType===f.v)){t=_(t,p.name,s.name);break}}}catch(h){d.e(h)}finally{d.f()}}n(function(e,t){return{type:K,payload:{selectedCtxOperationName:e,inputAssignments:t}}}(e.name,t))}}function re(e){return{type:Y,payload:e}}function oe(e){return function(t,n){t(ie(n().session,e))}}function ie(e,t){return function(n,a){pe({title:"Update Preferences",dispatch:n,call:function(){return j.X(a()).updatePreferences(e)},action:function(){t&&n(t)},planB:function(e){n(la({type:"error",title:"Update Preferences",message:"Failed to update preferences.",detail:e.message})),t&&n(t)},requireDoneNotification:!0})}}function le(e,t){return ce(Object(o.a)({},e,t))}function ce(e){return{type:H,payload:e}}function se(e){return function(t,n){pe({title:"Store configuration",dispatch:t,call:function(){return j.i(n()).setBackendConfig(e)}})}}function ue(e){return function(t,n){j.ec(n()).cancel(e)}}function de(e,t){return Q("jobFailureDialog",{jobTitle:e,jobFailure:t})}function pe(e){var t,n=e.call,a=e.title,r=e.dispatch,o=e.action,i=e.requestLock,l=e.planB,c=e.disableNotifications,s=void 0!==c&&c,u=e.requireDoneNotification,d=void 0!==u&&u,p=e.startToastDelay,h=void 0===p?500:p,f=n((function(e){s||r(function(e){return ee(e.id,{status:D.g.IN_PROGRESS,progress:e})}(e))})),m=!1;s||(t=setTimeout((function(){Object(P.a)({type:"notification",text:"Started: "+a}),m=!0}),h),r(function(e,t,n){return ee(e,{status:D.g.SUBMITTED,title:t,requestLock:n})}(f.getJobId(),a,i)));f.then((function(e){s||(clearTimeout(t),(m||d)&&Object(P.a)({type:"success",text:"Done: "+a}),r(ee(f.getJobId(),{status:D.g.DONE}))),o&&o(e)}),(function(e){s||m||clearTimeout(t),function(e,t,n,a,r){var o,i,l,c=n.code===D.d?D.g.CANCELLED:D.g.FAILED;c===D.g.CANCELLED?(o="notification",i="Cancelled: ".concat(t)):(o="error",i=n.message||"Failed: ".concat(t),l={text:"Details",onClick:function(){a(de(t,n))}}),a(ee(e,{status:c,failure:n})),r||(n.code===D.e?a(de(t,n)):Object(P.a)({type:o,text:i,action:l}))}(f.getJobId(),a,e,r,s),l&&l(e)}))}var he="SET_GLOBE_MOUSE_POSITION",fe="SET_GLOBE_VIEW_POSITION";function me(e){return{type:he,payload:{position:e}}}function be(e,t){return{type:fe,payload:{position:e,positionData:t}}}function ve(e){return function(t,n){if(e){if("variables"===j.Eb(n())){var a=j.kc(n());if(!a)return;var r=j.Bb(n()),o=j.Ib(n());if(o&&r){var i=Object(I.K)(r,o);return void pe({title:"Load cell values",dispatch:t,call:function(){return j.v(n()).extractPixelValues(a,r.name,[e.longitude,e.latitude],i)},action:function(n){t(be(e,n))},disableNotifications:!0})}}}else t(be(null,null))}}var ye="UPDATE_FS_ROOT_NODE";function ge(e,t){return{type:ye,payload:{path:e,updatedFileNode:t}}}function Ee(e,t){var n=e.split("/");return function(e,r){if(null!==j.B(r())){var o=[];n.forEach((function(e,a){var i=n.slice(0,a+1).join("/");if(0===o.length){var l=Object(g.g)(r().data.fsRootNode,i);l?l.status&&!t||o.push(i):(o.push(""),o.push(i))}else o.push(i)})),e(function e(t,n){return function(r,o){if(0!==t.length){var i=j.B(o());if(null!==i){var l=t[0],c=Object(g.g)(o().data.fsRootNode,l);if(c){if(!c.status||n){r(ge(l,Object(a.a)(Object(a.a)({},c),{},{status:"updating"})));var s=function(a){r(ge(l,a)),t.length>1&&r(e(t.slice(1),n))};pe({title:"Updating Files",dispatch:r,call:function(){return i.updateFileNode(l)},action:s,planB:function(e){r(la({type:"error",title:"File System Update",message:"Failed updating file in file system.",detail:e.message}))},requireDoneNotification:!1})}}else console.error('sub-path not found in file system root node: "'.concat(l,'"'))}else console.error("fileSystemAPI not ready")}}}(o,t))}else console.error("fileSystemAPI not ready")}}var Oe="ACTIVATE_NEW_PLACEMARK_TOOL",_e="ADD_PLACEMARK",Ce="REMOVE_PLACEMARK",ke="UPDATE_PLACEMARK_GEOMETRY",we="UPDATE_PLACEMARK_PROPERTIES",Se="UPDATE_PLACEMARK_STYLE";function je(e){return{type:Oe,payload:{newPlacemarkToolType:e}}}function Ie(e){return{type:_e,payload:{placemark:e}}}function Pe(e,t,n){return Ie({id:Object(I.w)(I.i),type:"Feature",geometry:{type:"Point",coordinates:[e,t]},properties:n})}function De(e){return{type:Ce,payload:{placemarkId:e}}}function Le(e,t){return{type:ke,payload:{placemarkId:e,geometry:t}}}function Te(e,t){return{type:we,payload:{placemarkId:e,properties:t}}}function Ae(e,t){return{type:Se,payload:{placemarkId:e,style:t}}}function Re(e){return function(){var t=Object(c.a)(l.a.mark((function t(n,a){var r,o,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=j.Qb(a()))){t.next=7;break}if(!(o=Object(v.h)(r,e))){t.next=7;break}return o.position&&(0,-1.570795,25e5,i=new s.l(0,-1.570795,25e5)),t.next=7,r.zoomTo(o,i);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function Ne(e){return ce({selectedPlacemarkId:e})}var xe="UPDATE_DATA_STORES",Me="UPDATE_DATA_SOURCES",Ve="UPDATE_DATA_SOURCE_META_INFO";function Be(){return function(e,t){pe({title:"Loading data stores",dispatch:e,call:function(){return j.v(t()).getDataStores()},action:function(n){if(j.P(t())&&(n=n.filter((function(e){return e.isLocal}))),e(function(e){return{type:xe,payload:{dataStores:e}}}(n)),n&&n.length){var a=j.kb(t()),r=n.find((function(e){return e.id===a}));a=r?r.id:n[0].id,e(Ue(a))}}})}}function We(e,t){return function(n,a){var r=Object(I.H)(e);if(!j.c(a()).has(r)){var o=a().data.dataStores.find((function(t){return t.id===e}));pe({title:'Load data sources for store "'.concat(o?o.id:"?",'"'),dispatch:n,call:function(t){return j.v(a()).getDataSources(e,t)},action:function(r){if(n(Fe(e,r)),t){var o=j.gb(a());if(r&&r.length){var i=r.find((function(e){return e.id===o}));o=i?i.id:o}n(He(o))}},requestLock:r})}}}function Fe(e,t){return{type:Me,payload:{dataStoreId:e,dataSources:t}}}function Ue(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,a){if(n(Ye(e)),null!==e){var r=a().data.dataStores.find((function(t){return t.id===e}));!t&&r.dataSources||n(We(e,!0))}}}function Ge(){return function(e){e(Ue("local",!0))}}function Ye(e){return ce({selectedDataStoreId:e})}function He(e){return function(t,n){t(ce({selectedDataSourceId:e}));var a=n().session.selectedDataStoreId;a&&e&&t(function(e,t){return function(n,a){var r=a().data.dataStores;if(r){var o=Object(I.q)(r,e,t);o&&"init"===o.metaInfoStatus&&(n(ze(e,t,void 0,"loading")),pe({title:"Loading metadata for ".concat(t),dispatch:n,call:function(n){return j.v(a()).getDataSourceMetaInfo(e,t,n)},action:function(a){n(ze(e,t,a,"ok"))},planB:function(){n(ze(e,t,void 0,"error"))}}))}}}(a,e))}}function Ke(e){return ce({dataSourceFilterExpr:e})}function ze(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ok";return{type:Ve,payload:{dataStoreId:e,dataSourceId:t,metaInfo:n,metaInfoStatus:a}}}function qe(e,t,n,r){return function(o){var i,l=Object(a.a)({ds_id:t,data_store_id:e},n),c={};Object.keys(l).forEach((function(e){c[e]={value:l[e]}})),r&&(i=function(e){e(We("local",!1))}),o(It("open_dataset",c,null,!1,'Opening data source "'.concat(t,'"'),i))}}function Je(e,t){return function(n,a){pe({title:'Add file data source "'.concat(e,'"'),dispatch:n,call:function(n){return j.v(a()).addLocalDataSource(e,t,n)},action:function(e){n(Fe("local",e))},requireDoneNotification:!0})}}function Xe(e,t){return function(n,a){pe({title:'Remove copy of file data source "'.concat(e,'"'),dispatch:n,call:function(n){return j.v(a()).removeLocalDataSource(e,t,n)},action:function(e){n(Fe("local",e))},requireDoneNotification:!0})}}var Ze="UPDATE_OPERATIONS";function Qe(e){return ce({selectedOperationName:e})}function $e(e){return ce({operationFilterTags:e})}function et(e){return ce({operationFilterExpr:e})}function tt(e){return Q(e)}function nt(e,t){return function(n,r){if(t){var o=r().control.dialogs[e];t=Object(a.a)(Object(a.a)({},o.inputAssignments),t)}n($(e,{inputAssignments:t}))}}var at="SET_CURRENT_WORKSPACE",rt="UPDATE_WORKSPACE_NAMES",ot="RENAME_RESOURCE",it="SHOW_FIGURE_VIEW",lt="SHOW_ANIMATION_VIEW",ct="SHOW_TABLE_VIEW";function st(e){return{type:rt,payload:{workspaceNames:e}}}function ut(e){return function(t,n){pe({title:"New workspace"+(e?' "'.concat(e,'"'):""),dispatch:t,call:function(){return j.jc(n()).newWorkspace(e)},action:function(e){t(wt(e)),t(pt()),e&&e.workflow.steps.length>0?t(St(e.workflow.steps[0].id)):t(St(null)),t(oe())},planB:function(e){t(la({type:"error",title:"New Workspace",message:"Failed to create new workspace.",detail:e.message}))},requireDoneNotification:!0})}}function dt(e){return function(t,n){pe({title:'Open workspace "'.concat(e,'"'),dispatch:t,call:function(t){return j.jc(n()).openWorkspace(e,t)},action:function(e){t(wt(e)),e&&e.workflow.steps.length>0?t(St(e.workflow.steps[0].id)):t(St(null)),t(oe())},planB:function(){n().data.workspace||t(ut(null))},requireDoneNotification:!0})}}function pt(){return function(e,t){var n=t().data.workspace;if(h.a(n),n.isScratch)return ht;var a=n.baseDir;pe({title:"Save workspace",dispatch:e,call:function(e){return j.jc(t()).saveWorkspace(a,e)},action:function(t){e(wt(t)),e(oe())},planB:function(t){e(la({type:"error",title:"Save Workspace",message:"Failed to save workspace.",detail:t.message}))},requireDoneNotification:!0})}}function ht(e){return function(t,n){var a=j.kc(n());h.a(a),pe({title:'Save workspace as "'.concat(e,'"'),dispatch:t,call:function(t){return j.jc(n()).saveWorkspaceAs(a,e,t)},action:function(e){t(wt(e)),t(oe())},planB:function(e){t(la({type:"error",title:"Save Workspace As",message:"Failed to save workspace.",detail:e.message}))},requireDoneNotification:!0})}}function ft(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n,a){pe({title:'Delete step/workspace "'.concat(e,'"'),dispatch:n,call:function(){return j.jc(a()).deleteWorkspace(e,t)},requireDoneNotification:!0})}}function mt(){return Q("newWorkspaceDialog")}function bt(e,t){e(function(e,t){var n=new Set(e.properties);return n.delete("multiSelections"),ta(e=Object(a.a)(Object(a.a)({},e),{},{properties:Array.from(n)}),(function(e){t(!e.canceled&&e.filePaths.length>0?e.filePaths[0]:null)}))}({title:"Open Workspace - Select Directory",buttonLabel:"Open",properties:["openDirectory"]},(function(n){if(n){var a=t().data.workspace,r=!0;if(a){if(a.baseDir===n)return void Object(P.a)({type:"warning",text:"Workspace is already open."});r=kt(e,t,"Open Workspace","Would you like to save the current workspace before opening the new one?",'Press "Cancel" to cancel opening a new workspace.')}r&&e(dt(n))}})))}function vt(){return function(e,t){j.I(t())?bt(e,t):function(e,t){j.jc(t()).listWorkspaces().then((function(t){e(st(t)),e(Q(E.b))}))}(e,t)}}function yt(){return function(e,t){j.I(t())||function(e,t){j.jc(t()).listWorkspaces().then((function(t){e(st(t)),e(Q(E.a))}))}(e,t)}}function gt(){return function(e,t){kt(e,t,"Close Workspace","Would you like to save the current workspace before closing it?",'Press "Cancel" to cancel closing the workspace.')&&e((function(e,t){var n=j.kc(t());h.a(n),pe({title:"Close workspace",dispatch:e,call:function(){return j.jc(t()).closeWorkspace(n)},action:function(){e(ut(null))},requireDoneNotification:!0})}))}}function Et(){return function(e){e(la({type:"question",title:"Clean Workspace",message:"Do you really want to clean this workspace?",detail:"This will delete all resources and workflow steps.\nYou will not be able to undo this operation.",buttons:["Yes","No"],defaultId:1,cancelId:1},(function(t){t&&0===t.buttonIndex&&e((function(e,t){var n=t().data.workspace;h.a(n);var a=n.baseDir;pe({title:'Clean workspace "'.concat(a,'"'),dispatch:e,call:function(){return j.jc(t()).cleanWorkspace(a)},action:function(t){e(wt(t))},requireDoneNotification:!0})}))})))}}function Ot(e){return function(t){t(la({type:"question",title:"Remove Resource and Workflow Step",message:'Do you really want to delete resource and step "'.concat(e,'"?'),detail:"This will also delete the workflow step that created it.\nYou will not be able to undo this operation.",buttons:["Yes","No"],defaultId:1,cancelId:1},(function(n){n&&0===n.buttonIndex&&t(function(e){return function(t,n){var a=n().data.workspace;h.a(a);var r=a.baseDir;pe({title:'Delete step/resource "'.concat(e,'"'),dispatch:t,call:function(){return j.jc(n()).deleteWorkspaceResource(r,e)},action:function(e){t(wt(e))},requireDoneNotification:!0})}}(e))})))}}function _t(){return function(e,t){t().data.workspace.isScratch?e(Ct()):e(pt())}}function Ct(){return Q("saveWorkspaceAsDialog")}function kt(e,t,n,a,r){var o=t().data.workspace;o&&(o.workflow.steps.length&&(o.isModified||!o.isSaved)&&e(la({type:"question",title:n,message:a,detail:r,buttons:["Yes","No","Cancel"],defaultId:0,cancelId:2},(function(t){if(!t)return!1;if(0===t.buttonIndex)o.isScratch?e(Ct()):e(pt());else if(2===t.buttonIndex)return!1}))));return!0}function wt(e){return function(t,n){t(function(e){return{type:at,payload:{workspace:e}}}(e));var a=e.baseDir;n().session.lastWorkspacePath!==a&&(e.isScratch?t(ce({lastWorkspacePath:null})):t(ce({lastWorkspacePath:a})))}}function St(e){return function(t,n){if(t(function(e){return re({selectedWorkspaceResourceName:e})}(e)),e&&n().data.workspace){var a=n().data.workspace.resources;if(a){var r=a.find((function(t){return t.name===e}));if(r&&r.variables&&r.variables.length){var o=r.variables.find((function(e){return!!e.isDefault}));t(Vt(r,o||r.variables[0],j.db(n())))}}}}}function jt(e){return function(t,n){if(e){var a=j.Z(n())[e];a&&t(St(a.name))}t(function(e){return re({selectedWorkflowStepId:e})}(e))}}function It(e,t,n,a,r,o){return function(i,l){var c=j.kc(l());h.a(c),pe({dispatch:i,title:r,call:function(r){return j.jc(l()).setWorkspaceResource(c,e,t,n,a,r)},action:function(e){var t=e[0],n=e[1];i(wt(t));var a=Object(I.t)(j.bb(l()),n),r=Object(I.U)(a),c=Object(I.S)(a);r||c||i(St(n)),(r||c)&&l().session.autoShowNewFigures&&(r?i(At(a,j.d(l()))):c&&i(function(e,t){return{type:lt,payload:{resource:e,placeAfterViewId:t}}}(a,j.d(l())))),o&&i(o)},requireDoneNotification:!0})}}function Pt(e,t){return function(n,a){var r=j.kc(a());h.a(r),pe({title:"Change resource persistence",dispatch:n,call:function(){return j.jc(a()).setWorkspaceResourcePersistence(r,e,t)},action:function(e){n(wt(e))}})}}function Dt(e,t){return function(n,a){var r=j.kc(a());h.a(r),pe({title:"Rename resource",dispatch:n,call:function(){return j.jc(a()).renameWorkspaceResource(r,e,t)},action:function(a){n(wt(a)),n(function(e,t){return{type:ot,payload:{resName:e,newResName:t}}}(e,t))}})}}function Lt(e,t,n,a){return function(r,o){var i=j.kc(o());h.a(i);var l='Computing statistics for variable "'.concat(t,'"'),c=Object(I.G)(e,t,n);pe({title:l,dispatch:r,call:function(a){return j.jc(o()).getWorkspaceVariableStatistics(i,e,t,n,a)},action:function(e){r(a(e))},requestLock:c})}}function Tt(e,t,n){return{type:ct,payload:{resName:e,varName:t,placeAfterViewId:n}}}function At(e,t){return{type:it,payload:{resource:e,placeAfterViewId:t}}}function Rt(e,t){return function(){A&&A.shell.openExternal(e+"/png")}}var Nt="SET_SHOW_SELECTED_VARIABLE_LAYER",xt="SET_SELECTED_VARIABLE";function Mt(e){return{type:Nt,payload:{showSelectedVariableLayer:e}}}function Vt(e,t,n){return{type:xt,payload:{resource:e,selectedVariable:t,savedLayers:n}}}function Bt(e,t,n,a,r){return function(e,t,n){return{type:Sn,payload:{viewId:e,layer:t,selectLayer:n}}}(e,Object(I.eb)(t,n,r),a)}function Wt(e){return ce({leftPanelContainerLayout:e})}function Ft(e){return ce({rightPanelContainerLayout:e})}function Ut(e){return ce({selectedLeftTopPanelId:e})}function Gt(e){return ce({selectedLeftBottomPanelId:e})}function Yt(e){return ce({selectedRightTopPanelId:e})}function Ht(e){return ce({selectedRightBottomPanelId:e})}var Kt="ADD_WORLD_VIEW",zt="ADD_TABLE_VIEW",qt="SELECT_VIEW",Jt="CLOSE_VIEW",Xt="SPLIT_VIEW_PANEL",Zt="CHANGE_VIEW_SPLIT_POS",Qt="MOVE_VIEW";function $t(e,t){return{type:Kt,payload:{placeAfterViewId:e,baseMapId:t}}}function en(e,t){return{type:qt,payload:{viewPath:e,viewId:t}}}function tn(e,t){return{type:Jt,payload:{viewPath:e,viewId:t}}}function nn(e){return{type:"CLOSE_ALL_VIEWS",payload:{viewPath:e}}}function an(e,t,n){return{type:Xt,payload:{viewPath:e,dir:t,pos:n}}}function rn(e,t){return{type:Zt,payload:{viewPath:e,delta:t}}}function on(e,t,n){return{type:Qt,payload:{sourceViewId:e,placement:t,targetViewId:n}}}var ln="SET_VIEW_MODE",cn="SET_PROJECTION_CODE",sn="SET_LAYER_SPLIT_MODE",un="SET_LAYER_SPLIT_POSITION",dn="SET_SELECTED_ENTITY_ID",pn="INC_ENTITY_UPDATE_COUNT",hn="UPDATE_ENTITY_STYLE",fn="UPDATE_MOUSE_IDLE_STATE";function mn(e,t){return{type:ln,payload:{viewId:e,viewMode:t}}}function bn(e,t,n){return{type:sn,payload:{viewId:e,layerId:t,splitMode:n}}}function vn(e,t){return{type:un,payload:{viewId:e,layerSplitPosition:t}}}function yn(e,t,n){return function(a,r){var o=n&&n.id;if((a(function(e,t){return{type:dn,payload:{viewId:e,selectedEntityId:t}}}(e,Object(b.b)(o)?o:null)),n&&Object(b.d)(n._simp)&&Object(b.d)(n._resId)&&Object(b.d)(n._idx))&&0!==(1&n._simp)){var i=j.oc(r());if(i){var l=n._resId,c=+n._idx,s=j.fc(r()),u=i.id,d=Object(I.A)(s,u,{resId:l},c);Object(w.b)(n,d,t.style)}}}}function gn(e,t,n){return function(a){var r=Object(I.P)(e,t);r&&(r.id===I.h?a(Ae(t.id,n)):a(function(e,t,n,a){return{type:hn,payload:{viewId:e,layerId:t,entityId:n,style:a}}}(e.id,r.id,t.id,n))),a({type:pn})}}var En="UPDATE_TABLE_VIEW_DATA";function On(e,t,n,a,r,o){return{type:En,payload:{viewId:e,resName:t,varName:n,dataRows:a=a||null,error:r=r||null,isLoading:o=o||!1}}}function _n(e,t,n){return function(a,r){var o=j.fc(r()),i=j.mc(r()),l=j.bb(r()).find((function(e){return e.name===t}));if(l){var c=Object(I.x)(o,i,{resId:l.id},n);a(On(e,t,n,null,null,!0)),p.a(c).then((function(r){a(On(e,t,n,r,null,!1))})).catch((function(r){a(On(e,t,n,null,r,!1))}))}}}var Cn="UPDATE_ANIMATION_VIEW_DATA";function kn(e,t){return function(n,a){var r=j.fc(a()),o=j.mc(a()),i=Object(I.D)(r,o,t),l=new XMLHttpRequest;l.onreadystatechange=function(){4===l.readyState&&n(function(e,t,n){return{type:Cn,payload:{viewId:e,innerHTML:t,status:n}}}(e,l.responseText,l.status))},l.open("GET",i,!0),l.send(null)}}var wn="SET_SELECTED_LAYER_ID",Sn="ADD_LAYER",jn="REMOVE_LAYER",In="UPDATE_LAYER",Pn="UPDATE_LAYER_STYLE",Dn="MOVE_LAYER_UP",Ln="MOVE_LAYER_DOWN",Tn="SAVE_LAYER",An="SET_BASE_MAP_ID";function Rn(e,t){return{type:wn,payload:{viewId:e,selectedLayerId:t}}}function Nn(e,t){return{type:jn,payload:{viewId:e,id:t}}}function xn(e,t){return{type:Dn,payload:{viewId:e,id:t}}}function Mn(e,t){return{type:Ln,payload:{viewId:e,id:t}}}function Vn(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];return function(n){if(a.length&&(t=m.a.apply(void 0,[{},t].concat(a))),n(Bn(e,t)),t.id===I.a){var r=t.varName;r&&n(Fn(r,t))}}}function Bn(e,t){return{type:In,payload:{viewId:e,layer:t}}}function Wn(e,t,n){return{type:Pn,payload:{viewId:e,layerId:t,style:n}}}function Fn(e,t){return{type:Tn,payload:{key:e,layer:t}}}function Un(e){return ce({styleContext:e})}function Gn(e,t){return{type:An,payload:{viewId:e,baseMapId:t}}}var Yn="UPDATE_COLOR_MAPS";function Hn(){return function(e,t){pe({title:"Load color maps",dispatch:e,call:function(){return j.r(t()).getColorMaps()},action:function(t){e(function(e){return{type:Yn,payload:{colorMaps:e}}}(t))}})}}function Kn(){return Q("preferencesDialog")}function zn(){return $("preferencesDialog")}var qn="OBTAIN_COOKIE_CONSENT";function Jn(e){return{type:qn,payload:{trackingConsentObtained:e}}}var Xn="OPEN_DIRECTORY_SELECT_DIALOG",Zn="CLOSE_DIRECTORY_SELECT_DIALOG";function Qn(e,t){var n=new Set(e.properties);return n.delete("openFile"),n.delete("multiSelections"),n.add("openDirectory"),e=Object(a.a)(Object(a.a)({},e),{},{title:e.title||"Select Directory",buttonLabel:e.buttonLabel||"Select",properties:Array.from(n)}),function(n){var a=function(e){n(function(e){return{type:Zn,payload:{result:e}}}(e)),t(!e.canceled&&e.filePaths&&e.filePaths.length>0?e.filePaths[0]:null)};n(function(e,t){return{type:Xn,payload:{options:e,onClose:t}}}(e,a)),y.a.showFileOpenDialog(e,a)}}var $n="OPEN_FILE_OPEN_DIALOG",ea="CLOSE_FILE_OPEN_DIALOG";function ta(e,t){return function(n){var a=function(e){n(function(e){return{type:ea,payload:{result:e}}}(e)),t(e)};n(function(e,t){return{type:$n,payload:{options:e,onClose:t}}}(e,a)),y.a.showFileOpenDialog(e,a)}}var na="OPEN_FILE_SAVE_DIALOG",aa="CLOSE_FILE_SAVE_DIALOG";function ra(e,t){return function(n){var a=function(e){n(function(e){return{type:aa,payload:{result:e}}}(e)),t(e)};n(function(e,t){return{type:na,payload:{options:e,onClose:t}}}(e,a)),y.a.showFileSaveDialog(e,a)}}var oa="OPEN_MESSAGE_BOX",ia="CLOSE_MESSAGE_BOX";function la(e,t){return function(n){var a=function(e){n(function(e){return{type:ia,payload:{result:e}}}(e)),t&&t(e)};n(function(e,t){return{type:oa,payload:{options:e,onClose:t}}}(e,a)),y.a.showMessageBox(e,a)}}var ca="OPEN_FILE_BROWSE_DIALOG",sa="CLOSE_FILE_BROWSE_DIALOG";function ua(e){return function(t){t({type:ca,payload:{options:{defaultPath:e},onClose:function(){t({type:sa})}}}),y.a.showItemInFolder(e)}}function da(e){ba("copyTextToClipboard")?A.clipboard.writeText(e):d()(e)}function pa(){return Q("fileUploadDialog")}function ha(){return Q("fileDownloadDialog")}function fa(e,t){return function(n,a){var r=a(),o=r.communication.webAPIServiceURL;j.A(r).uploadFiles(e,t,o).then((function(a){n(Ee(e+"/"+t.name,!0)),Object(P.a)({type:a.status,text:"Upload finished: "+a.message})})).catch((function(e){Object(P.a)({type:"error",text:e.toString()}),console.error(e)}))}}function ma(e){return function(t,n){var a=n(),r=a.communication.webAPIServiceURL;j.A(a).downloadFiles(e,"ignore",r).then((function(){Object(P.a)({type:"success",text:"Zip ready for download."})})).catch((function(e){Object(P.a)({type:"error",text:e.toString()}),console.error(e)}))}}function ba(e){return A?!!A.ipcRenderer||(console.warn("".concat(e,"() cannot be executed, module electron.ipcRenderer not available")),!1):(console.warn("".concat(e,"() cannot be executed, module electron not available")),!1)}function va(e,t){console.info("fetch error: ",t,e);var n="";e instanceof T.a?n=e.statusText?" (HTTP status ".concat(e.status,": ").concat(e.statusText,")"):" (HTTP status ".concat(e.status,")"):e instanceof TypeError?n=" (wrong URL or no internet)":e instanceof Error&&e.message&&(n=" (".concat(e.message,")")),Object(P.a)({type:"error",text:t+n})}var ya=!1;function ga(){return function(e,t){if(!ya){if(A&&A.ipcRenderer){var n=A.ipcRenderer;n.on("update-initial-state",(function(t,n){e(function(e){return{type:R,payload:e}}(n))})),n.on("new-workspace",(function(){e(mt())})),n.on("open-workspace",(function(){e(vt())})),n.on("close-workspace",(function(){e(gt())})),n.on("save-workspace",(function(){e(_t())})),n.on("save-workspace-as",(function(){e(Ct())})),n.on("delete-workspace",(function(){e(yt())})),n.on("show-preferences-dialog",(function(){e(Kn())})),n.on("logout",(function(){}))}document.addEventListener("drop",(function(t){t.preventDefault(),t.stopPropagation();var n,a=Object(r.a)(t.dataTransfer.files);try{for(a.s();!(n=a.n()).done;){Ea(n.value,e)}}catch(o){a.e(o)}finally{a.f()}})),document.addEventListener("dragover",(function(e){e.preventDefault(),e.stopPropagation()})),window.addEventListener("beforeunload",(function(n){return n.preventDefault(),t().communication.webAPIClient&&e(oe()),null})),ya=!0}}}function Ea(e,t){var n,a;e.name.endsWith(".nc")?n="read_netcdf":e.name.endsWith(".txt")?n="read_text":e.name.endsWith(".json")?n="read_json":e.name.endsWith(".csv")?n="read_csv":(e.name.endsWith(".geojson")||e.name.endsWith(".shp")||e.name.endsWith(".gml"))&&(n="read_geo_data_frame"),a||(a={file:{value:e.name}}),n?t(function(e,t,n,a,r,o,i){return function(l,c){var s=c(),u=j.x(k.a)(s),d=s.communication.webAPIServiceURL,p=j.kc(c());u.isOpen||j.A(s).uploadFiles(p,t,d).then((function(t){Object(P.a)({type:t.status,text:"Upload finished: "+t.message}),l(It(e,n,a,r,o,i))})).catch((function(e){Object(P.a)({type:"error",text:e.toString()}),console.error(e)}))}}(n,e,a,null,!1,"Reading dropped file ".concat(e.name))):console.warn("Dropped file of unrecognized type: ",e.name)}},81:function(e,t,n){"use strict";var a=n(6),r=n(204),o=n.n(r),i=window.electron||null;t.a=i?{isNativeUI:!0,showFileOpenDialog:function(e,t){i.ipcRenderer.send("show-open-dialog",e,!1),i.ipcRenderer.once("show-open-dialog-reply",(function(e,n){t(n)}))},showFileSaveDialog:function(e,t){i.ipcRenderer.send("show-save-dialog",e,!1),i.ipcRenderer.once("show-save-dialog-reply",(function(e,n){t(n)}))},showMessageBox:function(e,t){e.buttons||(e=Object(a.a)(Object(a.a)({},e),{},{buttons:["OK"]})),i.ipcRenderer.send("show-message-box",e,!1),i.ipcRenderer.once("show-message-box-reply",(function(e,n,a){t({buttonIndex:n,checkboxChecked:a})}))},showItemInFolder:function(e){return Promise.resolve(i.shell.showItemInFolder(e))},openItem:function(e){return Promise.resolve(i.shell.openItem(e))},openExternal:function(e){return Promise.resolve(i.shell.openExternal(e))},copyTextToClipboard:function(e){return i.clipboard.writeText(e)}}:{isNativeUI:!1,showFileOpenDialog:function(e,t){},showFileSaveDialog:function(e,t){},showMessageBox:function(e,t){},showItemInFolder:function(e){return Promise.resolve(!0)},copyTextToClipboard:function(e){return new Promise((function(t){o()(e,{onCopy:function(){return t(!0)}})}))}}},91:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(15),r=function e(){Object(a.a)(this,e)};r.NEW="NEW",r.SUBMITTED="SUBMITTED",r.IN_PROGRESS="IN_PROGRESS",r.DONE="DONE",r.FAILED="FAILED",r.CANCELLED="CANCELLED"}},[[430,1,2]]]);
//# sourceMappingURL=main.cb6b92f3.chunk.js.map